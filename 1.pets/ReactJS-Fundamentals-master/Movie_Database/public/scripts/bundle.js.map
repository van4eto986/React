{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/alt/lib/actions/index.js","node_modules/alt/lib/functions.js","node_modules/alt/lib/index.js","node_modules/alt/lib/store/AltStore.js","node_modules/alt/lib/store/StoreMixin.js","node_modules/alt/lib/store/index.js","node_modules/alt/lib/utils/AltUtils.js","node_modules/alt/lib/utils/StateFunctions.js","node_modules/deep-equal/index.js","node_modules/deep-equal/lib/is_arguments.js","node_modules/deep-equal/lib/keys.js","node_modules/flux/index.js","node_modules/flux/lib/Dispatcher.js","node_modules/flux/node_modules/fbjs/lib/invariant.js","node_modules/history/lib/Actions.js","node_modules/history/lib/AsyncUtils.js","node_modules/history/lib/DOMStateStorage.js","node_modules/history/lib/DOMUtils.js","node_modules/history/lib/ExecutionEnvironment.js","node_modules/history/lib/createBrowserHistory.js","node_modules/history/lib/createDOMHistory.js","node_modules/history/lib/createHistory.js","node_modules/history/lib/createLocation.js","node_modules/history/lib/deprecate.js","node_modules/history/lib/extractPath.js","node_modules/history/lib/parsePath.js","node_modules/history/lib/runTransitionHook.js","node_modules/invariant/browser.js","node_modules/is-promise/index.js","node_modules/process/browser.js","node_modules/transmitter/dist/transmitter.js","node_modules/warning/browser.js","source/client/actions/FormActions.js","source/client/actions/MovieActions.js","source/client/actions/MovieAddActions.js","source/client/actions/NavbarActions.js","source/client/actions/UserActions.js","source/client/alt.js","source/client/components/App.js","source/client/components/Footer.js","source/client/components/Home.js","source/client/components/MovieAdd.js","source/client/components/Navbar.js","source/client/components/UserLogin.js","source/client/components/UserProfile.js","source/client/components/UserRegister.js","source/client/components/form/Form.js","source/client/components/form/RadioElement.js","source/client/components/form/RadioGroup.js","source/client/components/form/Submit.js","source/client/components/form/TextGroup.js","source/client/components/sub-components/CommentForm.js","source/client/components/sub-components/MovieCard.js","source/client/components/sub-components/MovieCommentsPanel.js","source/client/components/sub-components/MovieInfo.js","source/client/components/sub-components/MoviePanelsToggle.js","source/client/components/sub-components/MoviePoster.js","source/client/components/sub-components/MovieVotePanel.js","source/client/components/sub-components/NavbarUserMenu.js","source/client/main.js","source/client/routes.js","source/client/stores/FormStore.js","source/client/stores/MovieAddStore.js","source/client/stores/MovieStore.js","source/client/stores/NavbarStore.js","source/client/stores/UserStore.js","source/client/utilities/Authorize.js","source/client/utilities/Helpers.js","source/client/utilities/RequesterTMDB.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = makeAction;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _AltUtils = require('../utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _isPromise = require('is-promise');\n\nvar _isPromise2 = _interopRequireDefault(_isPromise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction makeAction(alt, namespace, name, implementation, obj) {\n  var id = utils.uid(alt._actionsRegistry, String(namespace) + '.' + String(name));\n  alt._actionsRegistry[id] = 1;\n\n  var data = { id: id, namespace: namespace, name: name };\n\n  var dispatch = function dispatch(payload) {\n    return alt.dispatch(id, payload, data);\n  };\n\n  // the action itself\n  var action = function action() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var invocationResult = implementation.apply(obj, args);\n    var actionResult = invocationResult;\n\n    // async functions that return promises should not be dispatched\n    if (invocationResult !== undefined && !(0, _isPromise2['default'])(invocationResult)) {\n      if (fn.isFunction(invocationResult)) {\n        // inner function result should be returned as an action result\n        actionResult = invocationResult(dispatch, alt);\n      } else {\n        dispatch(invocationResult);\n      }\n    }\n\n    if (invocationResult === undefined) {\n      utils.warn('An action was called but nothing was dispatched');\n    }\n\n    return actionResult;\n  };\n  action.defer = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return setTimeout(function () {\n      return action.apply(null, args);\n    });\n  };\n  action.id = id;\n  action.data = data;\n\n  // ensure each reference is unique in the namespace\n  var container = alt.actions[namespace];\n  var namespaceId = utils.uid(container, name);\n  container[namespaceId] = action;\n\n  // generate a constant\n  var constant = utils.formatAsConstant(namespaceId);\n  container[constant] = id;\n\n  return action;\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMutableObject = isMutableObject;\nexports.eachObject = eachObject;\nexports.assign = assign;\nvar isFunction = exports.isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nfunction isMutableObject(target) {\n  var Ctor = target.constructor;\n\n  return !!target && Object.prototype.toString.call(target) === '[object Object]' && isFunction(Ctor) && !Object.isFrozen(target) && (Ctor instanceof Ctor || target.type === 'AltStore');\n}\n\nfunction eachObject(f, o) {\n  o.forEach(function (from) {\n    Object.keys(Object(from)).forEach(function (key) {\n      f(key, from[key]);\n    });\n  });\n}\n\nfunction assign(target) {\n  for (var _len = arguments.length, source = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    source[_key - 1] = arguments[_key];\n  }\n\n  eachObject(function (key, value) {\n    return target[key] = value;\n  }, source);\n  return target;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _flux = require('flux');\n\nvar _StateFunctions = require('./utils/StateFunctions');\n\nvar StateFunctions = _interopRequireWildcard(_StateFunctions);\n\nvar _functions = require('./functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _store = require('./store');\n\nvar store = _interopRequireWildcard(_store);\n\nvar _AltUtils = require('./utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _actions = require('./actions');\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /* global window */\n\n\nvar Alt = function () {\n  function Alt() {\n    var config = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Alt);\n\n    this.config = config;\n    this.serialize = config.serialize || JSON.stringify;\n    this.deserialize = config.deserialize || JSON.parse;\n    this.dispatcher = config.dispatcher || new _flux.Dispatcher();\n    this.batchingFunction = config.batchingFunction || function (callback) {\n      return callback();\n    };\n    this.actions = { global: {} };\n    this.stores = {};\n    this.storeTransforms = config.storeTransforms || [];\n    this.trapAsync = false;\n    this._actionsRegistry = {};\n    this._initSnapshot = {};\n    this._lastSnapshot = {};\n  }\n\n  Alt.prototype.dispatch = function () {\n    function dispatch(action, data, details) {\n      var _this = this;\n\n      this.batchingFunction(function () {\n        var id = Math.random().toString(18).substr(2, 16);\n\n        // support straight dispatching of FSA-style actions\n        if (action.hasOwnProperty('type') && action.hasOwnProperty('payload')) {\n          var fsaDetails = {\n            id: action.type,\n            namespace: action.type,\n            name: action.type\n          };\n          return _this.dispatcher.dispatch(utils.fsa(id, action.type, action.payload, fsaDetails));\n        }\n\n        if (action.id && action.dispatch) {\n          return utils.dispatch(id, action, data, _this);\n        }\n\n        return _this.dispatcher.dispatch(utils.fsa(id, action, data, details));\n      });\n    }\n\n    return dispatch;\n  }();\n\n  Alt.prototype.createUnsavedStore = function () {\n    function createUnsavedStore(StoreModel) {\n      var key = StoreModel.displayName || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n    }\n\n    return createUnsavedStore;\n  }();\n\n  Alt.prototype.createStore = function () {\n    function createStore(StoreModel, iden) {\n      var key = iden || StoreModel.displayName || StoreModel.name || '';\n      store.createStoreConfig(this.config, StoreModel);\n      var Store = store.transformStore(this.storeTransforms, StoreModel);\n\n      /* istanbul ignore next */\n      if (module.hot) delete this.stores[key];\n\n      if (this.stores[key] || !key) {\n        if (this.stores[key]) {\n          utils.warn('A store named ' + String(key) + ' already exists, double check your store ' + 'names or pass in your own custom identifier for each store');\n        } else {\n          utils.warn('Store name was not specified');\n        }\n\n        key = utils.uid(this.stores, key);\n      }\n\n      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n        args[_key2 - 2] = arguments[_key2];\n      }\n\n      var storeInstance = fn.isFunction(Store) ? store.createStoreFromClass.apply(store, [this, Store, key].concat(args)) : store.createStoreFromObject(this, Store, key);\n\n      this.stores[key] = storeInstance;\n      StateFunctions.saveInitialSnapshot(this, key);\n\n      return storeInstance;\n    }\n\n    return createStore;\n  }();\n\n  Alt.prototype.generateActions = function () {\n    function generateActions() {\n      var actions = { name: 'global' };\n\n      for (var _len3 = arguments.length, actionNames = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        actionNames[_key3] = arguments[_key3];\n      }\n\n      return this.createActions(actionNames.reduce(function (obj, action) {\n        obj[action] = utils.dispatchIdentity;\n        return obj;\n      }, actions));\n    }\n\n    return generateActions;\n  }();\n\n  Alt.prototype.createAction = function () {\n    function createAction(name, implementation, obj) {\n      return (0, _actions2['default'])(this, 'global', name, implementation, obj);\n    }\n\n    return createAction;\n  }();\n\n  Alt.prototype.createActions = function () {\n    function createActions(ActionsClass) {\n      var _this3 = this;\n\n      var exportObj = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var actions = {};\n      var key = utils.uid(this._actionsRegistry, ActionsClass.displayName || ActionsClass.name || 'Unknown');\n\n      if (fn.isFunction(ActionsClass)) {\n        fn.assign(actions, utils.getPrototypeChain(ActionsClass));\n\n        var ActionsGenerator = function (_ActionsClass) {\n          _inherits(ActionsGenerator, _ActionsClass);\n\n          function ActionsGenerator() {\n            _classCallCheck(this, ActionsGenerator);\n\n            for (var _len5 = arguments.length, args = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n              args[_key5] = arguments[_key5];\n            }\n\n            return _possibleConstructorReturn(this, _ActionsClass.call.apply(_ActionsClass, [this].concat(args)));\n          }\n\n          ActionsGenerator.prototype.generateActions = function () {\n            function generateActions() {\n              for (var _len6 = arguments.length, actionNames = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n                actionNames[_key6] = arguments[_key6];\n              }\n\n              actionNames.forEach(function (actionName) {\n                actions[actionName] = utils.dispatchIdentity;\n              });\n            }\n\n            return generateActions;\n          }();\n\n          return ActionsGenerator;\n        }(ActionsClass);\n\n        for (var _len4 = arguments.length, argsForConstructor = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n          argsForConstructor[_key4 - 2] = arguments[_key4];\n        }\n\n        fn.assign(actions, new (Function.prototype.bind.apply(ActionsGenerator, [null].concat(argsForConstructor)))());\n      } else {\n        fn.assign(actions, ActionsClass);\n      }\n\n      this.actions[key] = this.actions[key] || {};\n\n      fn.eachObject(function (actionName, action) {\n        if (!fn.isFunction(action)) {\n          exportObj[actionName] = action;\n          return;\n        }\n\n        // create the action\n        exportObj[actionName] = (0, _actions2['default'])(_this3, key, actionName, action, exportObj);\n\n        // generate a constant\n        var constant = utils.formatAsConstant(actionName);\n        exportObj[constant] = exportObj[actionName].id;\n      }, [actions]);\n\n      return exportObj;\n    }\n\n    return createActions;\n  }();\n\n  Alt.prototype.takeSnapshot = function () {\n    function takeSnapshot() {\n      for (var _len7 = arguments.length, storeNames = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        storeNames[_key7] = arguments[_key7];\n      }\n\n      var state = StateFunctions.snapshot(this, storeNames);\n      fn.assign(this._lastSnapshot, state);\n      return this.serialize(state);\n    }\n\n    return takeSnapshot;\n  }();\n\n  Alt.prototype.rollback = function () {\n    function rollback() {\n      StateFunctions.setAppState(this, this.serialize(this._lastSnapshot), function (storeInst) {\n        storeInst.lifecycle('rollback');\n        storeInst.emitChange();\n      });\n    }\n\n    return rollback;\n  }();\n\n  Alt.prototype.recycle = function () {\n    function recycle() {\n      for (var _len8 = arguments.length, storeNames = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        storeNames[_key8] = arguments[_key8];\n      }\n\n      var initialSnapshot = storeNames.length ? StateFunctions.filterSnapshots(this, this._initSnapshot, storeNames) : this._initSnapshot;\n\n      StateFunctions.setAppState(this, this.serialize(initialSnapshot), function (storeInst) {\n        storeInst.lifecycle('init');\n        storeInst.emitChange();\n      });\n    }\n\n    return recycle;\n  }();\n\n  Alt.prototype.flush = function () {\n    function flush() {\n      var state = this.serialize(StateFunctions.snapshot(this));\n      this.recycle();\n      return state;\n    }\n\n    return flush;\n  }();\n\n  Alt.prototype.bootstrap = function () {\n    function bootstrap(data) {\n      StateFunctions.setAppState(this, data, function (storeInst, state) {\n        storeInst.lifecycle('bootstrap', state);\n        storeInst.emitChange();\n      });\n    }\n\n    return bootstrap;\n  }();\n\n  Alt.prototype.prepare = function () {\n    function prepare(storeInst, payload) {\n      var data = {};\n      if (!storeInst.displayName) {\n        throw new ReferenceError('Store provided does not have a name');\n      }\n      data[storeInst.displayName] = payload;\n      return this.serialize(data);\n    }\n\n    return prepare;\n  }();\n\n  // Instance type methods for injecting alt into your application as context\n\n  Alt.prototype.addActions = function () {\n    function addActions(name, ActionsClass) {\n      for (var _len9 = arguments.length, args = Array(_len9 > 2 ? _len9 - 2 : 0), _key9 = 2; _key9 < _len9; _key9++) {\n        args[_key9 - 2] = arguments[_key9];\n      }\n\n      this.actions[name] = Array.isArray(ActionsClass) ? this.generateActions.apply(this, ActionsClass) : this.createActions.apply(this, [ActionsClass].concat(args));\n    }\n\n    return addActions;\n  }();\n\n  Alt.prototype.addStore = function () {\n    function addStore(name, StoreModel) {\n      for (var _len10 = arguments.length, args = Array(_len10 > 2 ? _len10 - 2 : 0), _key10 = 2; _key10 < _len10; _key10++) {\n        args[_key10 - 2] = arguments[_key10];\n      }\n\n      this.createStore.apply(this, [StoreModel, name].concat(args));\n    }\n\n    return addStore;\n  }();\n\n  Alt.prototype.getActions = function () {\n    function getActions(name) {\n      return this.actions[name];\n    }\n\n    return getActions;\n  }();\n\n  Alt.prototype.getStore = function () {\n    function getStore(name) {\n      return this.stores[name];\n    }\n\n    return getStore;\n  }();\n\n  Alt.debug = function () {\n    function debug(name, alt, win) {\n      var key = 'alt.js.org';\n      var context = win;\n      if (!context && typeof window !== 'undefined') {\n        context = window;\n      }\n      if (typeof context !== 'undefined') {\n        context[key] = context[key] || [];\n        context[key].push({ name: name, alt: alt });\n      }\n      return alt;\n    }\n\n    return debug;\n  }();\n\n  return Alt;\n}();\n\nexports['default'] = Alt;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _transmitter = require('transmitter');\n\nvar _transmitter2 = _interopRequireDefault(_transmitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AltStore = function () {\n  function AltStore(alt, model, state, StoreModel) {\n    var _this = this;\n\n    _classCallCheck(this, AltStore);\n\n    var lifecycleEvents = model.lifecycleEvents;\n    this.transmitter = (0, _transmitter2['default'])();\n    this.lifecycle = function (event, x) {\n      if (lifecycleEvents[event]) lifecycleEvents[event].publish(x);\n    };\n    this.state = state;\n\n    this.alt = alt;\n    this.preventDefault = false;\n    this.displayName = model.displayName;\n    this.boundListeners = model.boundListeners;\n    this.StoreModel = StoreModel;\n    this.reduce = model.reduce || function (x) {\n      return x;\n    };\n    this.subscriptions = [];\n\n    var output = model.output || function (x) {\n      return x;\n    };\n\n    this.emitChange = function () {\n      return _this.transmitter.publish(output(_this.state));\n    };\n\n    var handleDispatch = function handleDispatch(f, payload) {\n      try {\n        return f();\n      } catch (e) {\n        if (model.handlesOwnErrors) {\n          _this.lifecycle('error', {\n            error: e,\n            payload: payload,\n            state: _this.state\n          });\n          return false;\n        }\n\n        throw e;\n      }\n    };\n\n    fn.assign(this, model.publicMethods);\n\n    // Register dispatcher\n    this.dispatchToken = alt.dispatcher.register(function (payload) {\n      _this.preventDefault = false;\n\n      _this.lifecycle('beforeEach', {\n        payload: payload,\n        state: _this.state\n      });\n\n      var actionHandlers = model.actionListeners[payload.action];\n\n      if (actionHandlers || model.otherwise) {\n        var result = void 0;\n\n        if (actionHandlers) {\n          result = handleDispatch(function () {\n            return actionHandlers.filter(Boolean).every(function (handler) {\n              return handler.call(model, payload.data, payload.action) !== false;\n            });\n          }, payload);\n        } else {\n          result = handleDispatch(function () {\n            return model.otherwise(payload.data, payload.action);\n          }, payload);\n        }\n\n        if (result !== false && !_this.preventDefault) _this.emitChange();\n      }\n\n      if (model.reduce) {\n        handleDispatch(function () {\n          var value = model.reduce(_this.state, payload);\n          if (value !== undefined) _this.state = value;\n        }, payload);\n        if (!_this.preventDefault) _this.emitChange();\n      }\n\n      _this.lifecycle('afterEach', {\n        payload: payload,\n        state: _this.state\n      });\n    });\n\n    this.lifecycle('init');\n  }\n\n  AltStore.prototype.listen = function () {\n    function listen(cb) {\n      var _this2 = this;\n\n      if (!fn.isFunction(cb)) throw new TypeError('listen expects a function');\n\n      var _transmitter$subscrib = this.transmitter.subscribe(cb);\n\n      var dispose = _transmitter$subscrib.dispose;\n\n      this.subscriptions.push({ cb: cb, dispose: dispose });\n      return function () {\n        _this2.lifecycle('unlisten');\n        dispose();\n      };\n    }\n\n    return listen;\n  }();\n\n  AltStore.prototype.unlisten = function () {\n    function unlisten(cb) {\n      this.lifecycle('unlisten');\n      this.subscriptions.filter(function (subscription) {\n        return subscription.cb === cb;\n      }).forEach(function (subscription) {\n        return subscription.dispose();\n      });\n    }\n\n    return unlisten;\n  }();\n\n  AltStore.prototype.getState = function () {\n    function getState() {\n      return this.StoreModel.config.getState.call(this, this.state);\n    }\n\n    return getState;\n  }();\n\n  return AltStore;\n}();\n\nexports['default'] = AltStore;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _transmitter = require('transmitter');\n\nvar _transmitter2 = _interopRequireDefault(_transmitter);\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar StoreMixin = {\n  waitFor: function () {\n    function waitFor() {\n      for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {\n        sources[_key] = arguments[_key];\n      }\n\n      if (!sources.length) {\n        throw new ReferenceError('Dispatch tokens not provided');\n      }\n\n      var sourcesArray = sources;\n      if (sources.length === 1) {\n        sourcesArray = Array.isArray(sources[0]) ? sources[0] : sources;\n      }\n\n      var tokens = sourcesArray.map(function (source) {\n        return source.dispatchToken || source;\n      });\n\n      this.dispatcher.waitFor(tokens);\n    }\n\n    return waitFor;\n  }(),\n  exportAsync: function () {\n    function exportAsync(asyncMethods) {\n      this.registerAsync(asyncMethods);\n    }\n\n    return exportAsync;\n  }(),\n  registerAsync: function () {\n    function registerAsync(asyncDef) {\n      var _this = this;\n\n      var loadCounter = 0;\n\n      var asyncMethods = fn.isFunction(asyncDef) ? asyncDef(this.alt) : asyncDef;\n\n      var toExport = Object.keys(asyncMethods).reduce(function (publicMethods, methodName) {\n        var desc = asyncMethods[methodName];\n        var spec = fn.isFunction(desc) ? desc(_this) : desc;\n\n        var validHandlers = ['success', 'error', 'loading'];\n        validHandlers.forEach(function (handler) {\n          if (spec[handler] && !spec[handler].id) {\n            throw new Error(String(handler) + ' handler must be an action function');\n          }\n        });\n\n        publicMethods[methodName] = function () {\n          for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          var state = _this.getInstance().getState();\n          var value = spec.local && spec.local.apply(spec, [state].concat(args));\n          var shouldFetch = spec.shouldFetch ? spec.shouldFetch.apply(spec, [state].concat(args))\n          /*eslint-disable*/\n          : value == null;\n          /*eslint-enable*/\n          var intercept = spec.interceptResponse || function (x) {\n            return x;\n          };\n\n          var makeActionHandler = function () {\n            function makeActionHandler(action, isError) {\n              return function (x) {\n                var fire = function () {\n                  function fire() {\n                    loadCounter -= 1;\n                    action(intercept(x, action, args));\n                    if (isError) throw x;\n                    return x;\n                  }\n\n                  return fire;\n                }();\n                return _this.alt.trapAsync ? function () {\n                  return fire();\n                } : fire();\n              };\n            }\n\n            return makeActionHandler;\n          }();\n\n          // if we don't have it in cache then fetch it\n          if (shouldFetch) {\n            loadCounter += 1;\n            /* istanbul ignore else */\n            if (spec.loading) spec.loading(intercept(null, spec.loading, args));\n            return spec.remote.apply(spec, [state].concat(args)).then(makeActionHandler(spec.success), makeActionHandler(spec.error, 1));\n          }\n\n          // otherwise emit the change now\n          _this.emitChange();\n          return value;\n        };\n\n        return publicMethods;\n      }, {});\n\n      this.exportPublicMethods(toExport);\n      this.exportPublicMethods({\n        isLoading: function () {\n          function isLoading() {\n            return loadCounter > 0;\n          }\n\n          return isLoading;\n        }()\n      });\n    }\n\n    return registerAsync;\n  }(),\n  exportPublicMethods: function () {\n    function exportPublicMethods(methods) {\n      var _this2 = this;\n\n      fn.eachObject(function (methodName, value) {\n        if (!fn.isFunction(value)) {\n          throw new TypeError('exportPublicMethods expects a function');\n        }\n\n        _this2.publicMethods[methodName] = value;\n      }, [methods]);\n    }\n\n    return exportPublicMethods;\n  }(),\n  emitChange: function () {\n    function emitChange() {\n      this.getInstance().emitChange();\n    }\n\n    return emitChange;\n  }(),\n  on: function () {\n    function on(lifecycleEvent, handler) {\n      if (lifecycleEvent === 'error') this.handlesOwnErrors = true;\n      var bus = this.lifecycleEvents[lifecycleEvent] || (0, _transmitter2['default'])();\n      this.lifecycleEvents[lifecycleEvent] = bus;\n      return bus.subscribe(handler.bind(this));\n    }\n\n    return on;\n  }(),\n  bindAction: function () {\n    function bindAction(symbol, handler) {\n      if (!symbol) {\n        throw new ReferenceError('Invalid action reference passed in');\n      }\n      if (!fn.isFunction(handler)) {\n        throw new TypeError('bindAction expects a function');\n      }\n\n      // You can pass in the constant or the function itself\n      var key = symbol.id ? symbol.id : symbol;\n      this.actionListeners[key] = this.actionListeners[key] || [];\n      this.actionListeners[key].push(handler.bind(this));\n      this.boundListeners.push(key);\n    }\n\n    return bindAction;\n  }(),\n  bindActions: function () {\n    function bindActions(actions) {\n      var _this3 = this;\n\n      fn.eachObject(function (action, symbol) {\n        var matchFirstCharacter = /./;\n        var assumedEventHandler = action.replace(matchFirstCharacter, function (x) {\n          return 'on' + String(x[0].toUpperCase());\n        });\n\n        if (_this3[action] && _this3[assumedEventHandler]) {\n          // If you have both action and onAction\n          throw new ReferenceError('You have multiple action handlers bound to an action: ' + (String(action) + ' and ' + String(assumedEventHandler)));\n        }\n\n        var handler = _this3[action] || _this3[assumedEventHandler];\n        if (handler) {\n          _this3.bindAction(symbol, handler);\n        }\n      }, [actions]);\n    }\n\n    return bindActions;\n  }(),\n  bindListeners: function () {\n    function bindListeners(obj) {\n      var _this4 = this;\n\n      fn.eachObject(function (methodName, symbol) {\n        var listener = _this4[methodName];\n\n        if (!listener) {\n          throw new ReferenceError(String(methodName) + ' defined but does not exist in ' + String(_this4.displayName));\n        }\n\n        if (Array.isArray(symbol)) {\n          symbol.forEach(function (action) {\n            _this4.bindAction(action, listener);\n          });\n        } else {\n          _this4.bindAction(symbol, listener);\n        }\n      }, [obj]);\n    }\n\n    return bindListeners;\n  }()\n};\n\nexports['default'] = StoreMixin;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createStoreConfig = createStoreConfig;\nexports.transformStore = transformStore;\nexports.createStoreFromObject = createStoreFromObject;\nexports.createStoreFromClass = createStoreFromClass;\n\nvar _AltUtils = require('../utils/AltUtils');\n\nvar utils = _interopRequireWildcard(_AltUtils);\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nvar _AltStore = require('./AltStore');\n\nvar _AltStore2 = _interopRequireDefault(_AltStore);\n\nvar _StoreMixin = require('./StoreMixin');\n\nvar _StoreMixin2 = _interopRequireDefault(_StoreMixin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction doSetState(store, storeInstance, state) {\n  if (!state) {\n    return;\n  }\n\n  var config = storeInstance.StoreModel.config;\n\n\n  var nextState = fn.isFunction(state) ? state(storeInstance.state) : state;\n\n  storeInstance.state = config.setState.call(store, storeInstance.state, nextState);\n\n  if (!store.alt.dispatcher.isDispatching()) {\n    store.emitChange();\n  }\n}\n\nfunction createPrototype(proto, alt, key, extras) {\n  return fn.assign(proto, _StoreMixin2['default'], {\n    displayName: key,\n    alt: alt,\n    dispatcher: alt.dispatcher,\n    preventDefault: function () {\n      function preventDefault() {\n        this.getInstance().preventDefault = true;\n      }\n\n      return preventDefault;\n    }(),\n\n    boundListeners: [],\n    lifecycleEvents: {},\n    actionListeners: {},\n    publicMethods: {},\n    handlesOwnErrors: false\n  }, extras);\n}\n\nfunction createStoreConfig(globalConfig, StoreModel) {\n  StoreModel.config = fn.assign({\n    getState: function () {\n      function getState(state) {\n        if (Array.isArray(state)) {\n          return state.slice();\n        } else if (fn.isMutableObject(state)) {\n          return fn.assign({}, state);\n        }\n\n        return state;\n      }\n\n      return getState;\n    }(),\n    setState: function () {\n      function setState(currentState, nextState) {\n        if (fn.isMutableObject(nextState)) {\n          return fn.assign(currentState, nextState);\n        }\n        return nextState;\n      }\n\n      return setState;\n    }()\n  }, globalConfig, StoreModel.config);\n}\n\nfunction transformStore(transforms, StoreModel) {\n  return transforms.reduce(function (Store, transform) {\n    return transform(Store);\n  }, StoreModel);\n}\n\nfunction createStoreFromObject(alt, StoreModel, key) {\n  var storeInstance = void 0;\n\n  var StoreProto = createPrototype({}, alt, key, fn.assign({\n    getInstance: function () {\n      function getInstance() {\n        return storeInstance;\n      }\n\n      return getInstance;\n    }(),\n    setState: function () {\n      function setState(nextState) {\n        doSetState(this, storeInstance, nextState);\n      }\n\n      return setState;\n    }()\n  }, StoreModel));\n\n  // bind the store listeners\n  /* istanbul ignore else */\n  if (StoreProto.bindListeners) {\n    _StoreMixin2['default'].bindListeners.call(StoreProto, StoreProto.bindListeners);\n  }\n  /* istanbul ignore else */\n  if (StoreProto.observe) {\n    _StoreMixin2['default'].bindListeners.call(StoreProto, StoreProto.observe(alt));\n  }\n\n  // bind the lifecycle events\n  /* istanbul ignore else */\n  if (StoreProto.lifecycle) {\n    fn.eachObject(function (eventName, event) {\n      _StoreMixin2['default'].on.call(StoreProto, eventName, event);\n    }, [StoreProto.lifecycle]);\n  }\n\n  // create the instance and fn.assign the public methods to the instance\n  storeInstance = fn.assign(new _AltStore2['default'](alt, StoreProto, StoreProto.state !== undefined ? StoreProto.state : {}, StoreModel), StoreProto.publicMethods, {\n    displayName: key,\n    config: StoreModel.config\n  });\n\n  return storeInstance;\n}\n\nfunction createStoreFromClass(alt, StoreModel, key) {\n  var storeInstance = void 0;\n  var config = StoreModel.config;\n\n  // Creating a class here so we don't overload the provided store's\n  // prototype with the mixin behaviour and I'm extending from StoreModel\n  // so we can inherit any extensions from the provided store.\n\n  var Store = function (_StoreModel) {\n    _inherits(Store, _StoreModel);\n\n    function Store() {\n      _classCallCheck(this, Store);\n\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return _possibleConstructorReturn(this, _StoreModel.call.apply(_StoreModel, [this].concat(args)));\n    }\n\n    return Store;\n  }(StoreModel);\n\n  createPrototype(Store.prototype, alt, key, {\n    type: 'AltStore',\n    getInstance: function () {\n      function getInstance() {\n        return storeInstance;\n      }\n\n      return getInstance;\n    }(),\n    setState: function () {\n      function setState(nextState) {\n        doSetState(this, storeInstance, nextState);\n      }\n\n      return setState;\n    }()\n  });\n\n  for (var _len = arguments.length, argsForClass = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    argsForClass[_key - 3] = arguments[_key];\n  }\n\n  var store = new (Function.prototype.bind.apply(Store, [null].concat(argsForClass)))();\n\n  /* istanbul ignore next */\n  if (config.bindListeners) store.bindListeners(config.bindListeners);\n  /* istanbul ignore next */\n  if (config.datasource) store.registerAsync(config.datasource);\n\n  storeInstance = fn.assign(new _AltStore2['default'](alt, store, store.state !== undefined ? store.state : store, StoreModel), utils.getInternalMethods(StoreModel), config.publicMethods, { displayName: key });\n\n  return storeInstance;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.getInternalMethods = getInternalMethods;\nexports.getPrototypeChain = getPrototypeChain;\nexports.warn = warn;\nexports.uid = uid;\nexports.formatAsConstant = formatAsConstant;\nexports.dispatchIdentity = dispatchIdentity;\nexports.fsa = fsa;\nexports.dispatch = dispatch;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\n/*eslint-disable*/\nvar builtIns = Object.getOwnPropertyNames(NoopClass);\nvar builtInProto = Object.getOwnPropertyNames(NoopClass.prototype);\n/*eslint-enable*/\n\nfunction getInternalMethods(Obj, isProto) {\n  var excluded = isProto ? builtInProto : builtIns;\n  var obj = isProto ? Obj.prototype : Obj;\n  return Object.getOwnPropertyNames(obj).reduce(function (value, m) {\n    if (excluded.indexOf(m) !== -1) {\n      return value;\n    }\n\n    value[m] = obj[m];\n    return value;\n  }, {});\n}\n\nfunction getPrototypeChain(Obj) {\n  var methods = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  return Obj === Function.prototype ? methods : getPrototypeChain(Object.getPrototypeOf(Obj), fn.assign(getInternalMethods(Obj, true), methods));\n}\n\nfunction warn(msg) {\n  /* istanbul ignore else */\n  /*eslint-disable*/\n  if (typeof console !== 'undefined') {\n    console.warn(new ReferenceError(msg));\n  }\n  /*eslint-enable*/\n}\n\nfunction uid(container, name) {\n  var count = 0;\n  var key = name;\n  while (Object.hasOwnProperty.call(container, key)) {\n    key = name + String(++count);\n  }\n  return key;\n}\n\nfunction formatAsConstant(name) {\n  return name.replace(/[a-z]([A-Z])/g, function (i) {\n    return String(i[0]) + '_' + String(i[1].toLowerCase());\n  }).toUpperCase();\n}\n\nfunction dispatchIdentity(x) {\n  if (x === undefined) return null;\n\n  for (var _len = arguments.length, a = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    a[_key - 1] = arguments[_key];\n  }\n\n  return a.length ? [x].concat(a) : x;\n}\n\nfunction fsa(id, type, payload, details) {\n  return {\n    type: type,\n    payload: payload,\n    meta: _extends({\n      dispatchId: id\n    }, details),\n\n    id: id,\n    action: type,\n    data: payload,\n    details: details\n  };\n}\n\nfunction dispatch(id, actionObj, payload, alt) {\n  var data = actionObj.dispatch(payload);\n  if (data === undefined) return null;\n\n  var type = actionObj.id;\n  var namespace = type;\n  var name = type;\n  var details = { id: type, namespace: namespace, name: name };\n\n  var dispatchLater = function dispatchLater(x) {\n    return alt.dispatch(type, x, details);\n  };\n\n  if (fn.isFunction(data)) return data(dispatchLater, alt);\n\n  // XXX standardize this\n  return alt.dispatcher.dispatch(fsa(id, type, data, details));\n}\n\n/* istanbul ignore next */\nfunction NoopClass() {}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAppState = setAppState;\nexports.snapshot = snapshot;\nexports.saveInitialSnapshot = saveInitialSnapshot;\nexports.filterSnapshots = filterSnapshots;\n\nvar _functions = require('../functions');\n\nvar fn = _interopRequireWildcard(_functions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction setAppState(instance, data, onStore) {\n  var obj = instance.deserialize(data);\n  fn.eachObject(function (key, value) {\n    var store = instance.stores[key];\n    if (store) {\n      (function () {\n        var config = store.StoreModel.config;\n\n        var state = store.state;\n        if (config.onDeserialize) obj[key] = config.onDeserialize(value) || value;\n        if (fn.isMutableObject(state)) {\n          fn.eachObject(function (k) {\n            return delete state[k];\n          }, [state]);\n          fn.assign(state, obj[key]);\n        } else {\n          store.state = obj[key];\n        }\n        onStore(store, store.state);\n      })();\n    }\n  }, [obj]);\n}\n\nfunction snapshot(instance) {\n  var storeNames = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n  var stores = storeNames.length ? storeNames : Object.keys(instance.stores);\n  return stores.reduce(function (obj, storeHandle) {\n    var storeName = storeHandle.displayName || storeHandle;\n    var store = instance.stores[storeName];\n    var config = store.StoreModel.config;\n\n    store.lifecycle('snapshot');\n    var customSnapshot = config.onSerialize && config.onSerialize(store.state);\n    obj[storeName] = customSnapshot ? customSnapshot : store.getState();\n    return obj;\n  }, {});\n}\n\nfunction saveInitialSnapshot(instance, key) {\n  var state = instance.deserialize(instance.serialize(instance.stores[key].state));\n  instance._initSnapshot[key] = state;\n  instance._lastSnapshot[key] = state;\n}\n\nfunction filterSnapshots(instance, state, stores) {\n  return stores.reduce(function (obj, store) {\n    var storeName = store.displayName || store;\n    if (!state[storeName]) {\n      throw new ReferenceError(String(storeName) + ' is not a valid store');\n    }\n    obj[storeName] = state[storeName];\n    return obj;\n  }, {});\n}","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nmodule.exports.Dispatcher = require('./lib/Dispatcher');\n","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Dispatcher\n * \n * @preventMunge\n */\n\n'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar _prefix = 'ID_';\n\n/**\n * Dispatcher is used to broadcast payloads to registered callbacks. This is\n * different from generic pub-sub systems in two ways:\n *\n *   1) Callbacks are not subscribed to particular events. Every payload is\n *      dispatched to every registered callback.\n *   2) Callbacks can be deferred in whole or part until other callbacks have\n *      been executed.\n *\n * For example, consider this hypothetical flight destination form, which\n * selects a default city when a country is selected:\n *\n *   var flightDispatcher = new Dispatcher();\n *\n *   // Keeps track of which country is selected\n *   var CountryStore = {country: null};\n *\n *   // Keeps track of which city is selected\n *   var CityStore = {city: null};\n *\n *   // Keeps track of the base flight price of the selected city\n *   var FlightPriceStore = {price: null}\n *\n * When a user changes the selected city, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'city-update',\n *     selectedCity: 'paris'\n *   });\n *\n * This payload is digested by `CityStore`:\n *\n *   flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'city-update') {\n *       CityStore.city = payload.selectedCity;\n *     }\n *   });\n *\n * When the user selects a country, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'country-update',\n *     selectedCountry: 'australia'\n *   });\n *\n * This payload is digested by both stores:\n *\n *   CountryStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       CountryStore.country = payload.selectedCountry;\n *     }\n *   });\n *\n * When the callback to update `CountryStore` is registered, we save a reference\n * to the returned token. Using this token with `waitFor()`, we can guarantee\n * that `CountryStore` is updated before the callback that updates `CityStore`\n * needs to query its data.\n *\n *   CityStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       // `CountryStore.country` may not be updated.\n *       flightDispatcher.waitFor([CountryStore.dispatchToken]);\n *       // `CountryStore.country` is now guaranteed to be updated.\n *\n *       // Select the default city for the new country\n *       CityStore.city = getDefaultCityForCountry(CountryStore.country);\n *     }\n *   });\n *\n * The usage of `waitFor()` can be chained, for example:\n *\n *   FlightPriceStore.dispatchToken =\n *     flightDispatcher.register(function(payload) {\n *       switch (payload.actionType) {\n *         case 'country-update':\n *         case 'city-update':\n *           flightDispatcher.waitFor([CityStore.dispatchToken]);\n *           FlightPriceStore.price =\n *             getFlightPriceStore(CountryStore.country, CityStore.city);\n *           break;\n *     }\n *   });\n *\n * The `country-update` payload will be guaranteed to invoke the stores'\n * registered callbacks in order: `CountryStore`, `CityStore`, then\n * `FlightPriceStore`.\n */\n\nvar Dispatcher = (function () {\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n\n  Dispatcher.prototype.register = function register(callback) {\n    var id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  };\n\n  /**\n   * Removes a callback based on its token.\n   */\n\n  Dispatcher.prototype.unregister = function unregister(id) {\n    !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.unregister(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n    delete this._callbacks[id];\n  };\n\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n\n  Dispatcher.prototype.waitFor = function waitFor(ids) {\n    !this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Must be invoked while dispatching.') : invariant(false) : undefined;\n    for (var ii = 0; ii < ids.length; ii++) {\n      var id = ids[ii];\n      if (this._isPending[id]) {\n        !this._isHandled[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Circular dependency detected while ' + 'waiting for `%s`.', id) : invariant(false) : undefined;\n        continue;\n      }\n      !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n      this._invokeCallback(id);\n    }\n  };\n\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n\n  Dispatcher.prototype.dispatch = function dispatch(payload) {\n    !!this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.') : invariant(false) : undefined;\n    this._startDispatching(payload);\n    try {\n      for (var id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  };\n\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n\n  Dispatcher.prototype.isDispatching = function isDispatching() {\n    return this._isDispatching;\n  };\n\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._invokeCallback = function _invokeCallback(id) {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  };\n\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._startDispatching = function _startDispatching(payload) {\n    for (var id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  };\n\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._stopDispatching = function _stopDispatching() {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  };\n\n  return Dispatcher;\n})();\n\nmodule.exports = Dispatcher;","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n\"use strict\";\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function (condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error('Invariant Violation: ' + format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;","/**\n * Indicates that navigation was caused by a call to history.push.\n */\n'use strict';\n\nexports.__esModule = true;\nvar PUSH = 'PUSH';\n\nexports.PUSH = PUSH;\n/**\n * Indicates that navigation was caused by a call to history.replace.\n */\nvar REPLACE = 'REPLACE';\n\nexports.REPLACE = REPLACE;\n/**\n * Indicates that navigation was caused by some other action such\n * as using a browser's back/forward buttons and/or manually manipulating\n * the URL in a browser's location bar. This is the default.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onpopstate\n * for more information.\n */\nvar POP = 'POP';\n\nexports.POP = POP;\nexports['default'] = {\n  PUSH: PUSH,\n  REPLACE: REPLACE,\n  POP: POP\n};","\"use strict\";\n\nexports.__esModule = true;\nexports.loopAsync = loopAsync;\n\nfunction loopAsync(turns, work, callback) {\n  var currentTurn = 0;\n  var isDone = false;\n\n  function done() {\n    isDone = true;\n    callback.apply(this, arguments);\n  }\n\n  function next() {\n    if (isDone) return;\n\n    if (currentTurn < turns) {\n      work.call(this, currentTurn++, next, done);\n    } else {\n      done.apply(this, arguments);\n    }\n  }\n\n  next();\n}","/*eslint-disable no-empty */\n'use strict';\n\nexports.__esModule = true;\nexports.saveState = saveState;\nexports.readState = readState;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar KeyPrefix = '@@History/';\nvar QuotaExceededError = 'QuotaExceededError';\nvar SecurityError = 'SecurityError';\n\nfunction createKey(key) {\n  return KeyPrefix + key;\n}\n\nfunction saveState(key, state) {\n  try {\n    window.sessionStorage.setItem(createKey(key), JSON.stringify(state));\n  } catch (error) {\n    if (error.name === SecurityError) {\n      // Blocking cookies in Chrome/Firefox/Safari throws SecurityError on any\n      // attempt to access window.sessionStorage.\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](false, '[history] Unable to save state; sessionStorage is not available due to security settings') : undefined;\n\n      return;\n    }\n\n    if (error.name === QuotaExceededError && window.sessionStorage.length === 0) {\n      // Safari \"private mode\" throws QuotaExceededError.\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](false, '[history] Unable to save state; sessionStorage is not available in Safari private mode') : undefined;\n\n      return;\n    }\n\n    throw error;\n  }\n}\n\nfunction readState(key) {\n  var json = undefined;\n  try {\n    json = window.sessionStorage.getItem(createKey(key));\n  } catch (error) {\n    if (error.name === SecurityError) {\n      // Blocking cookies in Chrome/Firefox/Safari throws SecurityError on any\n      // attempt to access window.sessionStorage.\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](false, '[history] Unable to read state; sessionStorage is not available due to security settings') : undefined;\n\n      return null;\n    }\n  }\n\n  if (json) {\n    try {\n      return JSON.parse(json);\n    } catch (error) {\n      // Ignore invalid JSON.\n    }\n  }\n\n  return null;\n}","'use strict';\n\nexports.__esModule = true;\nexports.addEventListener = addEventListener;\nexports.removeEventListener = removeEventListener;\nexports.getHashPath = getHashPath;\nexports.replaceHashPath = replaceHashPath;\nexports.getWindowPath = getWindowPath;\nexports.go = go;\nexports.getUserConfirmation = getUserConfirmation;\nexports.supportsHistory = supportsHistory;\nexports.supportsGoWithoutReloadUsingHash = supportsGoWithoutReloadUsingHash;\n\nfunction addEventListener(node, event, listener) {\n  if (node.addEventListener) {\n    node.addEventListener(event, listener, false);\n  } else {\n    node.attachEvent('on' + event, listener);\n  }\n}\n\nfunction removeEventListener(node, event, listener) {\n  if (node.removeEventListener) {\n    node.removeEventListener(event, listener, false);\n  } else {\n    node.detachEvent('on' + event, listener);\n  }\n}\n\nfunction getHashPath() {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  return window.location.href.split('#')[1] || '';\n}\n\nfunction replaceHashPath(path) {\n  window.location.replace(window.location.pathname + window.location.search + '#' + path);\n}\n\nfunction getWindowPath() {\n  return window.location.pathname + window.location.search + window.location.hash;\n}\n\nfunction go(n) {\n  if (n) window.history.go(n);\n}\n\nfunction getUserConfirmation(message, callback) {\n  callback(window.confirm(message));\n}\n\n/**\n * Returns true if the HTML5 history API is supported. Taken from Modernizr.\n *\n * https://github.com/Modernizr/Modernizr/blob/master/LICENSE\n * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n * changed to avoid false negatives for Windows Phones: https://github.com/rackt/react-router/issues/586\n */\n\nfunction supportsHistory() {\n  var ua = navigator.userAgent;\n  if ((ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) && ua.indexOf('Mobile Safari') !== -1 && ua.indexOf('Chrome') === -1 && ua.indexOf('Windows Phone') === -1) {\n    return false;\n  }\n  // FIXME: Work around our browser history not working correctly on Chrome\n  // iOS: https://github.com/rackt/react-router/issues/2565\n  if (ua.indexOf('CriOS') !== -1) {\n    return false;\n  }\n  return window.history && 'pushState' in window.history;\n}\n\n/**\n * Returns false if using go(n) with hash history causes a full page reload.\n */\n\nfunction supportsGoWithoutReloadUsingHash() {\n  var ua = navigator.userAgent;\n  return ua.indexOf('Firefox') === -1;\n}","'use strict';\n\nexports.__esModule = true;\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nexports.canUseDOM = canUseDOM;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\n/**\n * Creates and returns a history object that uses HTML5's history API\n * (pushState, replaceState, and the popstate event) to manage history.\n * This is the recommended method of managing history in browsers because\n * it provides the cleanest URLs.\n *\n * Note: In browsers that do not support the HTML5 history API full\n * page reloads will be used to preserve URLs.\n */\nfunction createBrowserHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Browser history needs a DOM') : _invariant2['default'](false) : undefined;\n\n  var forceRefresh = options.forceRefresh;\n\n  var isSupported = _DOMUtils.supportsHistory();\n  var useRefresh = !isSupported || forceRefresh;\n\n  function getCurrentLocation(historyState) {\n    historyState = historyState || window.history.state || {};\n\n    var path = _DOMUtils.getWindowPath();\n    var _historyState = historyState;\n    var key = _historyState.key;\n\n    var state = undefined;\n    if (key) {\n      state = _DOMStateStorage.readState(key);\n    } else {\n      state = null;\n      key = history.createKey();\n\n      if (isSupported) window.history.replaceState(_extends({}, historyState, { key: key }), null, path);\n    }\n\n    var location = _parsePath2['default'](path);\n\n    return history.createLocation(_extends({}, location, { state: state }), undefined, key);\n  }\n\n  function startPopStateListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function popStateListener(event) {\n      if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n      transitionTo(getCurrentLocation(event.state));\n    }\n\n    _DOMUtils.addEventListener(window, 'popstate', popStateListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'popstate', popStateListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    _DOMStateStorage.saveState(key, state);\n\n    var path = (basename || '') + pathname + search + hash;\n    var historyState = {\n      key: key\n    };\n\n    if (action === _Actions.PUSH) {\n      if (useRefresh) {\n        window.location.href = path;\n        return false; // Prevent location update.\n      } else {\n          window.history.pushState(historyState, null, path);\n        }\n    } else {\n      // REPLACE\n      if (useRefresh) {\n        window.location.replace(path);\n        return false; // Prevent location update.\n      } else {\n          window.history.replaceState(historyState, null, path);\n        }\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopPopStateListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listenBefore(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listen(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    history.registerTransitionHook(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n\n    if (--listenerCount === 0) stopPopStateListener();\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    registerTransitionHook: registerTransitionHook,\n    unregisterTransitionHook: unregisterTransitionHook\n  });\n}\n\nexports['default'] = createBrowserHistory;\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _createHistory = require('./createHistory');\n\nvar _createHistory2 = _interopRequireDefault(_createHistory);\n\nfunction createDOMHistory(options) {\n  var history = _createHistory2['default'](_extends({\n    getUserConfirmation: _DOMUtils.getUserConfirmation\n  }, options, {\n    go: _DOMUtils.go\n  }));\n\n  function listen(listener) {\n    !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'DOM history needs a DOM') : _invariant2['default'](false) : undefined;\n\n    return history.listen(listener);\n  }\n\n  return _extends({}, history, {\n    listen: listen\n  });\n}\n\nexports['default'] = createDOMHistory;\nmodule.exports = exports['default'];","//import warning from 'warning'\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _deepEqual = require('deep-equal');\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _AsyncUtils = require('./AsyncUtils');\n\nvar _Actions = require('./Actions');\n\nvar _createLocation2 = require('./createLocation');\n\nvar _createLocation3 = _interopRequireDefault(_createLocation2);\n\nvar _runTransitionHook = require('./runTransitionHook');\n\nvar _runTransitionHook2 = _interopRequireDefault(_runTransitionHook);\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\nvar _deprecate = require('./deprecate');\n\nvar _deprecate2 = _interopRequireDefault(_deprecate);\n\nfunction createRandomKey(length) {\n  return Math.random().toString(36).substr(2, length);\n}\n\nfunction locationsAreEqual(a, b) {\n  return a.pathname === b.pathname && a.search === b.search &&\n  //a.action === b.action && // Different action !== location change.\n  a.key === b.key && _deepEqual2['default'](a.state, b.state);\n}\n\nvar DefaultKeyLength = 6;\n\nfunction createHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  var getCurrentLocation = options.getCurrentLocation;\n  var finishTransition = options.finishTransition;\n  var saveState = options.saveState;\n  var go = options.go;\n  var keyLength = options.keyLength;\n  var getUserConfirmation = options.getUserConfirmation;\n\n  if (typeof keyLength !== 'number') keyLength = DefaultKeyLength;\n\n  var transitionHooks = [];\n\n  function listenBefore(hook) {\n    transitionHooks.push(hook);\n\n    return function () {\n      transitionHooks = transitionHooks.filter(function (item) {\n        return item !== hook;\n      });\n    };\n  }\n\n  var allKeys = [];\n  var changeListeners = [];\n  var location = undefined;\n\n  function getCurrent() {\n    if (pendingLocation && pendingLocation.action === _Actions.POP) {\n      return allKeys.indexOf(pendingLocation.key);\n    } else if (location) {\n      return allKeys.indexOf(location.key);\n    } else {\n      return -1;\n    }\n  }\n\n  function updateLocation(newLocation) {\n    var current = getCurrent();\n\n    location = newLocation;\n\n    if (location.action === _Actions.PUSH) {\n      allKeys = [].concat(allKeys.slice(0, current + 1), [location.key]);\n    } else if (location.action === _Actions.REPLACE) {\n      allKeys[current] = location.key;\n    }\n\n    changeListeners.forEach(function (listener) {\n      listener(location);\n    });\n  }\n\n  function listen(listener) {\n    changeListeners.push(listener);\n\n    if (location) {\n      listener(location);\n    } else {\n      var _location = getCurrentLocation();\n      allKeys = [_location.key];\n      updateLocation(_location);\n    }\n\n    return function () {\n      changeListeners = changeListeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  }\n\n  function confirmTransitionTo(location, callback) {\n    _AsyncUtils.loopAsync(transitionHooks.length, function (index, next, done) {\n      _runTransitionHook2['default'](transitionHooks[index], location, function (result) {\n        if (result != null) {\n          done(result);\n        } else {\n          next();\n        }\n      });\n    }, function (message) {\n      if (getUserConfirmation && typeof message === 'string') {\n        getUserConfirmation(message, function (ok) {\n          callback(ok !== false);\n        });\n      } else {\n        callback(message !== false);\n      }\n    });\n  }\n\n  var pendingLocation = undefined;\n\n  function transitionTo(nextLocation) {\n    if (location && locationsAreEqual(location, nextLocation)) return; // Nothing to do.\n\n    pendingLocation = nextLocation;\n\n    confirmTransitionTo(nextLocation, function (ok) {\n      if (pendingLocation !== nextLocation) return; // Transition was interrupted.\n\n      if (ok) {\n        // treat PUSH to current path like REPLACE to be consistent with browsers\n        if (nextLocation.action === _Actions.PUSH) {\n          var prevPath = createPath(location);\n          var nextPath = createPath(nextLocation);\n\n          if (nextPath === prevPath) nextLocation.action = _Actions.REPLACE;\n        }\n\n        if (finishTransition(nextLocation) !== false) updateLocation(nextLocation);\n      } else if (location && nextLocation.action === _Actions.POP) {\n        var prevIndex = allKeys.indexOf(location.key);\n        var nextIndex = allKeys.indexOf(nextLocation.key);\n\n        if (prevIndex !== -1 && nextIndex !== -1) go(prevIndex - nextIndex); // Restore the URL.\n      }\n    });\n  }\n\n  function push(location) {\n    transitionTo(createLocation(location, _Actions.PUSH, createKey()));\n  }\n\n  function replace(location) {\n    transitionTo(createLocation(location, _Actions.REPLACE, createKey()));\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  function createKey() {\n    return createRandomKey(keyLength);\n  }\n\n  function createPath(location) {\n    if (location == null || typeof location === 'string') return location;\n\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n\n    var result = pathname;\n\n    if (search) result += search;\n\n    if (hash) result += hash;\n\n    return result;\n  }\n\n  function createHref(location) {\n    return createPath(location);\n  }\n\n  function createLocation(location, action) {\n    var key = arguments.length <= 2 || arguments[2] === undefined ? createKey() : arguments[2];\n\n    if (typeof action === 'object') {\n      //warning(\n      //  false,\n      //  'The state (2nd) argument to history.createLocation is deprecated; use a ' +\n      //  'location descriptor instead'\n      //)\n\n      if (typeof location === 'string') location = _parsePath2['default'](location);\n\n      location = _extends({}, location, { state: action });\n\n      action = key;\n      key = arguments[3] || createKey();\n    }\n\n    return _createLocation3['default'](location, action, key);\n  }\n\n  // deprecated\n  function setState(state) {\n    if (location) {\n      updateLocationState(location, state);\n      updateLocation(location);\n    } else {\n      updateLocationState(getCurrentLocation(), state);\n    }\n  }\n\n  function updateLocationState(location, state) {\n    location.state = _extends({}, location.state, state);\n    saveState(location.key, location.state);\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (transitionHooks.indexOf(hook) === -1) transitionHooks.push(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    transitionHooks = transitionHooks.filter(function (item) {\n      return item !== hook;\n    });\n  }\n\n  // deprecated\n  function pushState(state, path) {\n    if (typeof path === 'string') path = _parsePath2['default'](path);\n\n    push(_extends({ state: state }, path));\n  }\n\n  // deprecated\n  function replaceState(state, path) {\n    if (typeof path === 'string') path = _parsePath2['default'](path);\n\n    replace(_extends({ state: state }, path));\n  }\n\n  return {\n    listenBefore: listenBefore,\n    listen: listen,\n    transitionTo: transitionTo,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    createKey: createKey,\n    createPath: createPath,\n    createHref: createHref,\n    createLocation: createLocation,\n\n    setState: _deprecate2['default'](setState, 'setState is deprecated; use location.key to save state instead'),\n    registerTransitionHook: _deprecate2['default'](registerTransitionHook, 'registerTransitionHook is deprecated; use listenBefore instead'),\n    unregisterTransitionHook: _deprecate2['default'](unregisterTransitionHook, 'unregisterTransitionHook is deprecated; use the callback returned from listenBefore instead'),\n    pushState: _deprecate2['default'](pushState, 'pushState is deprecated; use push instead'),\n    replaceState: _deprecate2['default'](replaceState, 'replaceState is deprecated; use replace instead')\n  };\n}\n\nexports['default'] = createHistory;\nmodule.exports = exports['default'];","//import warning from 'warning'\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _Actions = require('./Actions');\n\nvar _parsePath = require('./parsePath');\n\nvar _parsePath2 = _interopRequireDefault(_parsePath);\n\nfunction createLocation() {\n  var location = arguments.length <= 0 || arguments[0] === undefined ? '/' : arguments[0];\n  var action = arguments.length <= 1 || arguments[1] === undefined ? _Actions.POP : arguments[1];\n  var key = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n  var _fourthArg = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\n  if (typeof location === 'string') location = _parsePath2['default'](location);\n\n  if (typeof action === 'object') {\n    //warning(\n    //  false,\n    //  'The state (2nd) argument to createLocation is deprecated; use a ' +\n    //  'location descriptor instead'\n    //)\n\n    location = _extends({}, location, { state: action });\n\n    action = key || _Actions.POP;\n    key = _fourthArg;\n  }\n\n  var pathname = location.pathname || '/';\n  var search = location.search || '';\n  var hash = location.hash || '';\n  var state = location.state || null;\n\n  return {\n    pathname: pathname,\n    search: search,\n    hash: hash,\n    state: state,\n    action: action,\n    key: key\n  };\n}\n\nexports['default'] = createLocation;\nmodule.exports = exports['default'];","//import warning from 'warning'\n\n\"use strict\";\n\nexports.__esModule = true;\nfunction deprecate(fn) {\n  return fn;\n  //return function () {\n  //  warning(false, '[history] ' + message)\n  //  return fn.apply(this, arguments)\n  //}\n}\n\nexports[\"default\"] = deprecate;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nexports.__esModule = true;\nfunction extractPath(string) {\n  var match = string.match(/^https?:\\/\\/[^\\/]*/);\n\n  if (match == null) return string;\n\n  return string.substring(match[0].length);\n}\n\nexports[\"default\"] = extractPath;\nmodule.exports = exports[\"default\"];","'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _extractPath = require('./extractPath');\n\nvar _extractPath2 = _interopRequireDefault(_extractPath);\n\nfunction parsePath(path) {\n  var pathname = _extractPath2['default'](path);\n  var search = '';\n  var hash = '';\n\n  process.env.NODE_ENV !== 'production' ? _warning2['default'](path === pathname, 'A path must be pathname + search + hash only, not a fully qualified URL like \"%s\"', path) : undefined;\n\n  var hashIndex = pathname.indexOf('#');\n  if (hashIndex !== -1) {\n    hash = pathname.substring(hashIndex);\n    pathname = pathname.substring(0, hashIndex);\n  }\n\n  var searchIndex = pathname.indexOf('?');\n  if (searchIndex !== -1) {\n    search = pathname.substring(searchIndex);\n    pathname = pathname.substring(0, searchIndex);\n  }\n\n  if (pathname === '') pathname = '/';\n\n  return {\n    pathname: pathname,\n    search: search,\n    hash: hash\n  };\n}\n\nexports['default'] = parsePath;\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction runTransitionHook(hook, location, callback) {\n  var result = hook(location, callback);\n\n  if (hook.length < 2) {\n    // Assume the hook runs synchronously and automatically\n    // call the callback with the return value.\n    callback(result);\n  } else {\n    process.env.NODE_ENV !== 'production' ? _warning2['default'](result === undefined, 'You should not \"return\" in a transition hook with a callback argument; call the callback instead') : undefined;\n  }\n}\n\nexports['default'] = runTransitionHook;\nmodule.exports = exports['default'];","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\n\nfunction transmitter() {\n  var subscriptions = [];\n  var nowDispatching = false;\n  var toUnsubscribe = {};\n\n  var unsubscribe = function unsubscribe(onChange) {\n    var id = subscriptions.indexOf(onChange);\n    if (id < 0) return;\n    if (nowDispatching) {\n      toUnsubscribe[id] = onChange;\n      return;\n    }\n    subscriptions.splice(id, 1);\n  };\n\n  var subscribe = function subscribe(onChange) {\n    var id = subscriptions.push(onChange);\n    var dispose = function dispose() {\n      return unsubscribe(onChange);\n    };\n    return { dispose: dispose };\n  };\n\n  var publish = function publish() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    nowDispatching = true;\n    try {\n      subscriptions.forEach(function (subscription, id) {\n        return toUnsubscribe[id] || subscription.apply(undefined, args);\n      });\n    } finally {\n      nowDispatching = false;\n      Object.keys(toUnsubscribe).forEach(function (id) {\n        return unsubscribe(toUnsubscribe[id]);\n      });\n      toUnsubscribe = {};\n    }\n  };\n\n  return {\n    publish: publish,\n    subscribe: subscribe,\n    $subscriptions: subscriptions\n  };\n}\n\nmodule.exports = transmitter;","/**\n * Copyright 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar warning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n        '`warning(condition, format, ...args)` requires a warning ' +\n        'message argument'\n      );\n    }\n\n    if (format.length < 10 || (/^[s\\W]*$/).test(format)) {\n      throw new Error(\n        'The warning format should be able to uniquely identify this ' +\n        'warning. Please, use a more descriptive format than: ' + format\n      );\n    }\n\n    if (!condition) {\n      var argIndex = 0;\n      var message = 'Warning: ' +\n        format.replace(/%s/g, function() {\n          return args[argIndex++];\n        });\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n      try {\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        throw new Error(message);\n      } catch(x) {}\n    }\n  };\n}\n\nmodule.exports = warning;\n","import alt from '../alt'\r\n\r\nclass FormActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'handleUsernameChange',\r\n      'handlePasswordChange',\r\n      'handleConfirmedPasswordChange',\r\n      'handleFirstNameChange',\r\n      'handleLastNameChange',\r\n      'handleAgeChange',\r\n      'handleGenderChange',\r\n      'usernameValidationFail',\r\n      'passwordValidationFail',\r\n      'unauthorizedAccessAttempt',\r\n      'handleCommentChange',\r\n      'commentValidationFail',\r\n      'handleScoreChange',\r\n      'scoreValidationFail'\r\n    )\r\n  }\r\n}\r\n\r\nexport default alt.createActions(FormActions)\r\n","import alt from '../alt'\r\n\r\nimport TMDB from '../utilities/RequesterTMDB'\r\n\r\nclass MovieActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'getTopTenMoviesSuccess',\r\n      'getTopTenMoviesFail',\r\n      'getFiveRecentMoviesSuccess',\r\n      'getFiveRecentMoviesFail',\r\n      'emptyTopTenMovies',\r\n      'addMovieToTopTen',\r\n      'addCommentSuccess',\r\n      'addCommentFail',\r\n      'addVoteSuccess',\r\n      'addVoteFail'\r\n    )\r\n  }\r\n\r\n  getFiveRecentMovies () {\r\n    let request = {\r\n      method: 'get',\r\n      url: '/api/movies/five-recent'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(data => this.getFiveRecentMoviesSuccess(data))\r\n\r\n    return true\r\n  }\r\n\r\n  getTopTenMovies () {\r\n    let request = {\r\n      url: '/api/movies/top-ten',\r\n      method: 'get'\r\n    }\r\n    $.ajax(request)\r\n      .done((payload) => {\r\n        this.emptyTopTenMovies()\r\n        for (let movie of payload) {\r\n          let movieData = {\r\n            _id: movie._id,\r\n            name: movie.name,\r\n            description: movie.description,\r\n            genres: movie.genres,\r\n            votes: movie.votes,\r\n            score: movie.score\r\n          }\r\n\r\n          TMDB.getMoviePoster(movie.name)\r\n            .then((tmdbResponse) => {\r\n              movieData.moviePosterUrl = tmdbResponse.posterUrl\r\n\r\n              getComments(movie._id)\r\n                .then((comments) => {\r\n                  movieData.comments = comments\r\n\r\n                  getLoggedInUserVote(movie._id)\r\n                    .then((vote) => {\r\n                      movieData.loggedInUserScore = vote.voteScore\r\n                      this.addMovieToTopTen(movieData)\r\n                    })\r\n                })\r\n            })\r\n        }\r\n      })\r\n      .fail(err => this.getTopTenMoviesFail(err))\r\n\r\n    return true\r\n  }\r\n\r\n  addComment (movieId, comment) {\r\n    let request = {\r\n      url: `/api/movies/${movieId}/comments`,\r\n      method: 'post',\r\n      contentType: 'application/json',\r\n      data: JSON.stringify({content: comment})\r\n    }\r\n    $.ajax(request)\r\n      .done((data) => {\r\n        this.addCommentSuccess(data)\r\n      })\r\n      .fail(err => this.addCommentFail(err.responseJSON))\r\n\r\n    return true\r\n  }\r\n\r\n  addVote (movieId, score) {\r\n    let request = {\r\n      url: `/api/movies/${movieId}/vote`,\r\n      method: 'post',\r\n      contentType: 'application/json',\r\n      data: JSON.stringify({score})\r\n    }\r\n\r\n    $.ajax(request)\r\n      .then((data) => {\r\n        data.movieId = movieId\r\n        this.addVoteSuccess(data)\r\n      })\r\n      .fail(err => this.addVoteFail(err.responseJSON))\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default alt.createActions(MovieActions)\r\n\r\nfunction getComments (movieId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = {\r\n      url: `/api/movies/${movieId}/comments`,\r\n      method: 'get'\r\n    }\r\n    $.ajax(request)\r\n      .done(data => resolve(data))\r\n      .fail(err => reject(err))\r\n  })\r\n}\r\n\r\nfunction getLoggedInUserVote (movieId, userId) {\r\n  return new Promise((resolve) => {\r\n    let request = {\r\n      method: 'get'\r\n    }\r\n\r\n    if (userId) {\r\n      request.url = `/api/movies/${movieId}/vote?userId=${userId}`\r\n    } else {\r\n      request.url = `/api/movies/${movieId}/vote?user=loggedInUser`\r\n    }\r\n\r\n    $.ajax(request).done(data => resolve(data))\r\n  })\r\n}\r\n","import alt from '../alt'\r\n\r\nclass MovieAddActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'handleNameChange',\r\n      'handleDescriptionChange',\r\n      'handleGenresChange',\r\n      'nameValidationFail',\r\n      'genresValidationFail',\r\n      'addMovieSuccess',\r\n      'addMovieFail'\r\n    )\r\n  }\r\n\r\n  addMovie (data) {\r\n    let request = {\r\n      url: '/api/movies/add',\r\n      method: 'POST',\r\n      data: JSON.stringify(data),\r\n      contentType: 'application/json'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(() => this.addMovieSuccess())\r\n      .fail((err) => this.addMovieFail(err))\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default alt.createActions(MovieAddActions)\r\n","import alt from '../alt'\r\n\r\nclass NavbarActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'updateAjaxAnimation'\r\n    )\r\n  }\r\n}\r\n\r\nexport default alt.createActions(NavbarActions)\r\n","import alt from '../alt'\r\n\r\nclass UserActions {\r\n  constructor () {\r\n    this.generateActions(\r\n      'registerUserSuccess',\r\n      'registerUserFail',\r\n      'loginUserSuccess',\r\n      'loginUserFail',\r\n      'logoutUserSuccess'\r\n    )\r\n  }\r\n\r\n  registerUser (data) {\r\n    let request = {\r\n      url: '/user/register',\r\n      method: 'post',\r\n      data: JSON.stringify(data),\r\n      contentType: 'application/json'\r\n    }\r\n    $.ajax(request)\r\n      .done(() => this.registerUserSuccess)\r\n      .fail((err) => {\r\n        console.log('error', err)\r\n        this.registerUserFail(err.responseJSON.message)\r\n      })\r\n\r\n    return true\r\n  }\r\n\r\n  loginUser (data) {\r\n    let request = {\r\n      url: '/user/login',\r\n      method: 'post',\r\n      data: JSON.stringify(data),\r\n      contentType: 'application/json'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done((data) => {\r\n        this.loginUserSuccess(data)\r\n      })\r\n      .fail((err) => {\r\n        this.loginUserFail(err.responseJSON)\r\n      })\r\n\r\n    return true\r\n  }\r\n\r\n  logoutUser () {\r\n    let request = {\r\n      url: '/user/logout',\r\n      method: 'post'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(() => this.logoutUserSuccess())\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default alt.createActions(UserActions)\r\n","import Alt from 'alt'\r\n\r\nexport default new Alt()\r\n","import React from 'react'\r\n\r\nimport UserStore from '../stores/UserStore'\r\n\r\nimport Navbar from './Navbar'\r\nimport Footer from './Footer'\r\n\r\nexport default class App extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = UserStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    UserStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    UserStore.unlisten(this.onChange)\r\n  }\r\n\r\n  logoutUser () {\r\n    let request = {\r\n      url: '/user/logout',\r\n      method: 'post'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done(() => {\r\n        this.setState({\r\n          loggedInUserId: ''\r\n        })\r\n      })\r\n      .fail((err) => {\r\n        this.setState({\r\n          error: err.responseJSON.message\r\n        })\r\n      })\r\n  }\r\n\r\n  render () {\r\n    // console.log('App.js')\r\n    // console.log(this.props.children)\r\n    // console.log('App.js')\r\n\r\n    return (\r\n      <div>\r\n        <Navbar />\r\n        { this.props.children }\r\n        <Footer />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router'\r\n\r\nimport MovieActions from '../actions/MovieActions'\r\nimport MovieStore from '../stores/MovieStore'\r\n\r\nexport default class Footer extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = MovieStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    MovieStore.listen(this.onChange)\r\n\r\n    MovieActions.getFiveRecentMovies()\r\n    this.interval = setInterval(() => MovieActions.getFiveRecentMovies(), 5000)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    MovieStore.unlisten(this.onChange)\r\n    clearInterval(this.interval)\r\n  }\r\n\r\n  getFiveRecentMovies () {\r\n    let request = {\r\n      method: 'get',\r\n      url: 'api/movies/five-recent'\r\n    }\r\n\r\n    $.ajax(request)\r\n      .done((data) => {\r\n        this.setState({\r\n          mostRecentMovies: data\r\n        })\r\n      })\r\n      .fail(err => toastr.error(err.responseJSON.message))\r\n  }\r\n\r\n  render () {\r\n    let mostRecentMovies = this.state.mostRecentMovies.map((movie) => {\r\n      return (\r\n        <li key={movie._id}>\r\n          <Link to={`/...`}>{movie.name}</Link>\r\n        </li>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <footer>\r\n        <div className='container'>\r\n          <div className='row'>\r\n            <div className='col-sm-5'>\r\n              <h3 className='lead'>\r\n                <strong>Information</strong> and\r\n                <strong> Copyright</strong>\r\n              </h3>\r\n              <p>\r\n                Powered by\r\n                <strong> Express</strong>\r\n                <strong> MongoDb</strong>\r\n                <strong> React</strong>\r\n              </p>\r\n              <p>&copy; 2017 SoftUni.</p>\r\n            </div>\r\n            <div className='col-sm-4 hidden-xs'>\r\n              <h3 className='lead'>\r\n                <strong>Newest</strong> 5 Movies\r\n              </h3>\r\n              <ul className='list-inline'>\r\n                {mostRecentMovies}\r\n              </ul>\r\n            </div>\r\n            <div className='col-sm-3'>\r\n              <h3 className='lead'>Author</h3>\r\n              <a href='https://github.com/CvetanPetkov'>\r\n                <strong> Cvetan Petkov</strong>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport MovieAction from '../actions/MovieActions'\r\nimport MovieStore from '../stores/MovieStore'\r\n\r\nimport MovieCard from './sub-components/MovieCard'\r\n\r\nexport default class Home extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = MovieStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    MovieStore.listen(this.onChange)\r\n\r\n    MovieAction.getTopTenMovies()\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    MovieStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    let movies = this.state.topTenMovies.map((movie, index) => {\r\n      return (\r\n        <MovieCard\r\n          key={movie._id}\r\n          movie={movie}\r\n          index={index} />\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className='container'>\r\n        <h3 className='text-center'>Welcome to\r\n          <strong> Movie Database</strong>\r\n        </h3>\r\n        <div className='list-group'>\r\n          {movies}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport MovieAddActions from '../actions/MovieAddActions'\r\nimport MovieAddStore from '../stores/MovieAddStore'\r\n\r\nimport Helpers from '../utilities/Helpers'\r\n\r\nexport default class AddMovie extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = MovieAddStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    MovieAddStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    MovieAddStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (e) {\r\n    e.preventDefault()\r\n\r\n    let name = this.state.name.trim()\r\n    let genres = this.state.genres\r\n    if (!name) {\r\n      MovieAddActions.nameValidationFail()\r\n    }\r\n    if (genres.length === 0) {\r\n      MovieAddActions.genresValidationFail()\r\n    }\r\n\r\n    if (name) {\r\n      let data = {\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        genres: this.state.genres\r\n      }\r\n\r\n      MovieAddActions.addMovie(data)\r\n    }\r\n  }\r\n\r\n  handleNameChange (e) {\r\n    let name = e.target.value\r\n    this.setState({\r\n      name: name\r\n    })\r\n  }\r\n\r\n  handleDescriptionChange (e) {\r\n    let description = e.target.value\r\n    this.setState({\r\n      description: description\r\n    })\r\n  }\r\n\r\n  handleGenresChange (e) {\r\n    let genreValue = e.target.value\r\n    console.log('MovieAdd state', this.state)\r\n    if (this.state.genres.indexOf(genreValue) === -1) {\r\n      this.setState(prevState => ({\r\n        genres: Helpers.appendToArray(genreValue, prevState.genres)\r\n      }))\r\n    } else {\r\n      this.setState(prevState => ({\r\n        genres: Helpers.removeFromArray(genreValue, prevState.genres)\r\n      }))\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='container'>\r\n        <div className='row flipInX animated'>\r\n          <div className='col-sm-8'>\r\n            <div className='panel panel-default'>\r\n              <div className='panel-heading'>Add Movie</div>\r\n              <div className='panel-body'>\r\n                <form onSubmit={this.handleSubmit.bind(this)}>\r\n                  <div className={'form-group ' + this.state.nameValidationState}>\r\n                    <label className='control-label'>Name</label>\r\n                    <input type='text' className='form-control' ref='nameTextField'\r\n                           value={this.state.name}\r\n                           onChange={MovieAddActions.handleNameChange} autoFocus />\r\n                    <span className='help-block'>{ this.state.helpBlock }</span>\r\n                  </div>\r\n                  <div className='form-group'>\r\n                    <label className='control-label'>Description</label>\r\n                    <textarea className='form-control'\r\n                              rows=\"5\"\r\n                              value={ this.state.description }\r\n                              onChange={MovieAddActions.handleDescriptionChange} />\r\n                  </div>\r\n                  <div className={'form-group ' + this.state.genresValidationState}>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='action' value='Action'\r\n                             checked={ this.state.genres.indexOf('Action') !== -1 }\r\n                             onClick={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='action'>Action</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='horror' value='Horror'\r\n                             checked={ this.state.genres.indexOf('Horror') !== -1 }\r\n                             onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='horror'>Horror</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='sci-fi' value='Sci-fi'\r\n                             checked={ this.state.genres.indexOf('Sci-fi') !== -1 }\r\n                             onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='sci-fi'>Sci-fi</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='fantasy' value='Fantasy'\r\n                             checked={ this.state.genres.indexOf('Fantasy') !== -1 }\r\n                             onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='fantasy'>Fantasy</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='romance' value='Romance'\r\n                             checked={ this.state.genres.indexOf('Romance') !== -1 }\r\n                             onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='romance'>Romance</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='thriller' value='Thriller'\r\n                             checked={ this.state.genres.indexOf('Thriller') !== -1 }\r\n                             onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='thriller'>Thriller</label>\r\n                    </div>\r\n                    <div className='checkbox checkbox-inline'>\r\n                      <input type='checkbox' name='genres' id='adventure' value='Adventure'\r\n                             checked={ this.state.genres.indexOf('Adventure') !== -1 }\r\n                             onChange={MovieAddActions.handleGenresChange} />\r\n                      <label htmlFor='adventure'>Adventure</label>\r\n                    </div>\r\n                  </div>\r\n                  <button type='submit' className='btn btn-primary'>Submit</button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router'\r\n\r\nimport NavbarActions from '../actions/NavbarActions'\r\nimport NavbarStore from '../stores/NavbarStore'\r\nimport NavbarUserMenu from './sub-components/NavbarUserMenu'\r\n\r\nexport default class Navbar extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = NavbarStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    NavbarStore.listen(this.onChange)\r\n\r\n    $(document).ajaxStart(() => NavbarActions.updateAjaxAnimation('fadeIn'))\r\n\r\n    $(document).ajaxComplete(() => NavbarActions.updateAjaxAnimation('fadeOut'))\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    NavbarStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    // console.log('Navbar.js')\r\n    // console.log(this.props)\r\n    // console.log('Navbar.js')\r\n\r\n    let navbarUserMenu = <NavbarUserMenu userData={this.props.userData} />\r\n\r\n    return (\r\n      <nav className='navbar navbar-default navbar-static-top'>\r\n        <div className='navbar-header'>\r\n          <button\r\n            type='button'\r\n            className='navbar-toggle'\r\n            data-toggle='collapse'\r\n            data-target='#navbar'>\r\n            <span className='sr-only'>Toggle navigation</span>\r\n            <span className='icon-bar' />\r\n            <span className='icon-bar' />\r\n            <span className='icon-bar' />\r\n          </button>\r\n          <Link to='/' className='navbar-brand'>\r\n            <span\r\n              ref='triangles'\r\n              className={'triangles animated ' + this.state.ajaxAnimationClass}>\r\n              <div className='tri invert' />\r\n              <div className='tri invert' />\r\n              <div className='tri' />\r\n              <div className='tri invert' />\r\n              <div className='tri invert' />\r\n              <div className='tri' />\r\n              <div className='tri invert' />\r\n              <div className='tri' />\r\n              <div className='tri invert' />\r\n            </span>\r\n            MDB\r\n          </Link>\r\n        </div>\r\n        <div id='navbar' className='navbar-collapse'>\r\n          <ul className='nav navbar-nav'>\r\n            <li>\r\n              <Link to='/'>Home</Link>\r\n            </li>\r\n            <li>\r\n              <Link to='/movie/add'>Add Movie</Link>\r\n            </li>\r\n          </ul>\r\n          {navbarUserMenu}\r\n        </div>\r\n      </nav>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport UserActions from '../actions/UserActions'\r\nimport FormActions from '../actions/FormActions'\r\nimport FormStore from '../stores/FormStore'\r\nimport Form from './form/Form'\r\nimport TextGroup from './form/TextGroup'\r\nimport Submit from './form/Submit'\r\n\r\nexport default class UserLogin extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = FormStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    FormStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    FormStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (e) {\r\n    e.preventDefault()\r\n\r\n    let username = this.state.username\r\n    let password = this.state.password\r\n\r\n    if (!username) {\r\n      FormActions.usernameValidationFail()\r\n      return\r\n    }\r\n\r\n    if (!password) {\r\n      FormActions.passwordValidationFail()\r\n      return\r\n    }\r\n\r\n    UserActions.loginUser({username, password})\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Form\r\n        title='login'\r\n        handleSubmit={this.handleSubmit.bind(this)}\r\n        submitState={this.state.formSubmitState}\r\n        message={this.state.message}>\r\n\r\n        <TextGroup\r\n          type='text'\r\n          label='Username'\r\n          handleChange={FormActions.handleUsernameChange}\r\n          validationState={this.state.usernameValidationState} />\r\n\r\n        <TextGroup\r\n          type='password'\r\n          value={this.state.password}\r\n          label='Password'\r\n          handleChange={FormActions.handlePasswordChange}\r\n          validationState={this.state.passwordValidationState}\r\n          message={this.state.message} />\r\n\r\n        <Submit type='btn-primary' value='Login' />\r\n\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router'\r\n\r\nimport UserStore from '../stores/UserStore'\r\n\r\nexport default class UserProfile extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = UserStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    UserStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    UserStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    let nodes = {}\r\n    nodes.roles = this.state.roles.map((role, index) => {\r\n      return (\r\n        <h4 key={index} className='lead'>\r\n          <strong>{role}</strong>\r\n        </h4>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div>\r\n        <div className='container profile-container'>\r\n          <div className='profile-img'>\r\n            <img src='/public/images/user-default.png' />\r\n          </div>\r\n          <div className='profile-info clearfix'>\r\n            <h2><strong>{this.state.name}</strong></h2>\r\n            <h4 className='lead'>Roles:</h4>\r\n            {nodes.roles}\r\n            <p>{this.state.information}</p>\r\n          </div>\r\n        </div>\r\n        <div className='container profile-container'>\r\n          <div className='profile-stats clearfix'>\r\n            <ul>\r\n              <li>\r\n                <span className='stats-number'>{this.state.votes}</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div className='pull-right btn-group'>\r\n            <Link to='/user/profile/:userId' className='btn btn-primary' />\r\n            {this.state.showRatedMovies ? 'Hide' : 'Rated movies'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport FormActions from '../actions/FormActions'\r\nimport UserActions from '../actions/UserActions'\r\nimport FormStore from '../stores/FormStore'\r\nimport Form from './form/Form'\r\nimport TextGroup from './form/TextGroup'\r\nimport RadioGroup from './form/RadioGroup'\r\nimport RadioElement from './form/RadioElement'\r\nimport Submit from './form/Submit'\r\n\r\nexport default class UserRegister extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = FormStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    FormStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    FormStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (e) {\r\n    e.preventDefault()\r\n\r\n    let data = {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n      confirmedPassword: this.state.confirmedPassword,\r\n      firstName: this.state.firstName,\r\n      lastName: this.state.lastName,\r\n      age: this.state.age,\r\n      gender: this.state.gender\r\n    }\r\n\r\n    if (!data.username) {\r\n      return FormActions.usernameValidationFail()\r\n    }\r\n\r\n    if (!data.password ||\r\n      !data.confirmedPassword ||\r\n      data.password !== data.confirmedPassword) {\r\n      return FormActions.passwordValidationFail()\r\n    }\r\n\r\n    UserActions.registerUser(data)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Form\r\n        title='Register'\r\n        handleSubmit={this.handleSubmit.bind(this)}\r\n        submitState={this.state.formSubmitState}\r\n        message={this.state.message}>\r\n\r\n        <TextGroup\r\n          type='text'\r\n          label='Username'\r\n          value={this.state.username}\r\n          autoFocus={true}\r\n          handleChange={FormActions.handleUsernameChange}\r\n          validationState={this.state.usernameValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='password'\r\n          label='Password'\r\n          value={this.state.Password}\r\n          handleChange={FormActions.handlePasswordChange}\r\n          validationState={this.state.passwordValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='password'\r\n          label='Confirm Password'\r\n          value={this.state.confirmPassword}\r\n          handleChange={FormActions.handleConfirmedPasswordChange}\r\n          validationState={this.state.passwordValidationState}\r\n          message={this.state.message} />\r\n\r\n        <TextGroup\r\n          type='text'\r\n          label='First Name'\r\n          handleChange={FormActions.handleFirstNameChange}\r\n          value={this.state.firstName} />\r\n\r\n        <TextGroup\r\n          type='text'\r\n          label='Last Name'\r\n          handleChange={FormActions.handleLastNameChange}\r\n          value={this.state.lastName} />\r\n\r\n        <TextGroup\r\n          type='number'\r\n          label='Age'\r\n          handleChange={FormActions.handleAgeChange}\r\n          value={this.state.age} />\r\n\r\n        <RadioGroup\r\n          validationState={this.state.genderValidationState}\r\n          message={this.state.message}>\r\n          <RadioElement\r\n            groupName='gender'\r\n            value='Male'\r\n            selectedValue={this.state.gender}\r\n            handleChange={FormActions.handleGenderChange} />\r\n\r\n          <RadioElement\r\n            groupName='gender'\r\n            value='Female'\r\n            selectedValue={this.state.gender}\r\n            handleChange={FormActions.handleGenderChange} />\r\n        </RadioGroup>\r\n\r\n        <Submit type='btn-primary' value='Register' />\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport default class Form extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='container'>\r\n        <div className='row flipInX animated'>\r\n          <div className='col-sm-8'>\r\n            <div className='panel panel-defaults'>\r\n              <div className='panel-heading'>\r\n                {this.props.title}\r\n              </div>\r\n              <div className='panel-body'>\r\n                <form onSubmit={this.props.handleSubmit}>\r\n                  <div className={`form-group ${this.props.submitState}`}>\r\n                    <span className='help-block'>\r\n                      {this.props.message}\r\n                    </span>\r\n                  </div>\r\n                  {this.props.children}\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport default class RadioElement extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='radio radio-inline'>\r\n        <input\r\n          type='radio'\r\n          name={this.props.groupName}\r\n          id={this.props.value.toLowerCase()}\r\n          value={this.props.value}\r\n          checked={this.props.selectedValue === this.props.value}\r\n          onChange={this.props.handleChange} />\r\n        <label htmlFor={this.props.value.toLowerCase()}>\r\n          { this.props.value }\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport default class RadioGroup extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={`form-group ${this.props.validationState}` }>\r\n        <span className='help-block'>\r\n          {this.props.message}\r\n        </span>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport default class Submit extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n  }\r\n\r\n  render () {\r\n    return <input type='submit' className={`btn ${this.props.type}`} value={this.props.value} />\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport default class TextGroup extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={'form-group ' + this.props.validationState}>\r\n        <label className='control-label'>\r\n          {this.props.label}\r\n        </label>\r\n        <input type={this.props.type} className='form-control'\r\n               value={this.props.value}\r\n               onChange={this.props.handleChange} autoFocus={this.props.autoFocus} />\r\n        <span className='help-block'>\r\n          {this.props.message}\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport FormActions from '../../actions/FormActions'\r\nimport FormStore from '../../stores/FormStore'\r\nimport MovieActions from '../../actions/MovieActions'\r\n\r\nexport default class CommentForm extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = FormStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    FormStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    FormStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (e) {\r\n    e.preventDefault()\r\n\r\n    if (!this.state.comment) {\r\n      FormActions.commentValidationFail()\r\n      return\r\n    }\r\n\r\n    MovieActions.addComment(this.props.movieId, this.state.comment)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <form onSubmit={this.handleSubmit.bind(this)}>\r\n        <div className={`form-group ${this.state.commentValidationState}`}>\r\n          <label className='control-label' htmlFor='content'>Add comment</label>\r\n          <textarea\r\n            id='content'\r\n            className='form-control'\r\n            value={this.state.comment}\r\n            onChange={FormActions.handleCommentChange}\r\n            rows='5' />\r\n          <span className={`help-block`}>{this.state.message}</span>\r\n        </div>\r\n        <div className='form-group'>\r\n          <input type='submit' className='btn btn-primary' value='Comment' />\r\n        </div>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport MoviePoster from './MoviePoster'\r\nimport MovieInfo from './MovieInfo'\r\nimport MoviePanelsToggle from './MoviePanelsToggle'\r\nimport MovieVotePanel from './MovieVotePanel'\r\nimport MovieCommentsPanel from './MovieCommentsPanel'\r\n\r\nexport default class MovieCard extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      showVotePanel: false,\r\n      showCommentsPanel: false\r\n    }\r\n  }\r\n\r\n  toggleCommentsPanel () {\r\n    this.setState((prevState) => ({\r\n      showCommentsPanel: !prevState.showCommentsPanel,\r\n      showVotePanel: false\r\n    }))\r\n  }\r\n\r\n  toggleVotePanel () {\r\n    this.setState((prevState) => ({\r\n      showVotePanel: !prevState.showVotePanel,\r\n      showCommentsPanel: false\r\n    }))\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='animated fadeIn'>\r\n        <div className='media movie'>\r\n          <span className='position pull-left'>{this.props.index + 1}</span>\r\n          <MoviePoster posterUrl={this.props.movie.moviePosterUrl} />\r\n          <MovieInfo movie={this.props.movie} />\r\n          <MoviePanelsToggle\r\n            toggleCommentsPanel={this.toggleCommentsPanel.bind(this)}\r\n            toggleVotePanel={this.toggleVotePanel.bind(this)}\r\n            showCommentsPanel={this.state.showCommentsPanel}\r\n            showVotePanel={this.state.showVotePanel}\r\n            movieId={this.props.movie._id} />\r\n        </div>\r\n        {this.state.showVotePanel ? <MovieVotePanel movieId={this.props.movie._id} /> : null}\r\n        {this.state.showCommentsPanel ? <MovieCommentsPanel movieId={this.props.movie._id} /> : null}\r\n        <div id='clear' />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nimport CommentForm from './CommentForm'\r\n\r\nexport default class MovieCommentsPanel extends React.Component {\r\n  render () {\r\n    console.log('[MovieCommentsPanel]', this.props)\r\n    let comments = this.props.comments.map((comment) => {\r\n      return (\r\n        <div key={comment._id} className='comment col-sm-9 list-group-item animated fadeIn'>\r\n          <div className='media'>\r\n            <div className='media-body'>\r\n              <p>{comment.content}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className='list-group'>\r\n        <h3 className='col-sm-3'>Comments:</h3>\r\n        {comments}\r\n        <div className='col-sm-6 col-xs-offset-6 list-group-item animated fadeIn'>\r\n          <div className='media'>\r\n            <CommentForm movieId={this.props.movieId} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router'\r\nimport Helpers from '../../utilities/Helpers'\r\n\r\nexport default class MovieInfo extends React.Component {\r\n  render () {\r\n    let genres = this.props.movie.genres.map((genre) => {\r\n      return (\r\n        <strong key={this.props.movie._id + genre}>{genre}</strong>\r\n      )\r\n    })\r\n\r\n    let rating = Helpers.formatMovieRating(this.props.movie.score, this.props.movie.votes)\r\n\r\n    return (\r\n      <div className='media-body'>\r\n        <h4 className='media-heading'>\r\n          <Link to={`/movie/${this.props.movie._id}/${this.props.movie.name}`}>\r\n            {this.props.movie.name}\r\n          </Link>\r\n        </h4>\r\n        <small>Genres: {genres}</small>\r\n        <br />\r\n        <p>{this.props.movie.description}</p>\r\n        <span className='votes'>\r\n          Votes:\r\n          <strong>\r\n            {this.props.votesAmount}\r\n          </strong>\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router'\r\n\r\nimport { Concealer } from '../../utilities/Authorize'\r\n\r\nclass VoteToggle extends React.Component {\r\n  render () {\r\n    return (\r\n      <a\r\n        className='btn btn-primary'\r\n        onClick={this.props.toggleVotePanel}>\r\n        {this.props.showVotePanel ? 'Hide' : 'Vote'}\r\n      </a>\r\n    )\r\n  }\r\n}\r\n\r\nexport default class MoviePanelToggles extends React.Component {\r\n  render () {\r\n    return (\r\n      <div className='pull-right btn-group'>\r\n        <a\r\n          className='btn btn-primary'\r\n          onClick={this.props.toggleCommentsPanel}>\r\n          {this.props.showCommentsPanel ? 'Hide' : 'Comments'}\r\n        </a>\r\n        <Concealer\r\n          ChildComponent={VoteToggle}\r\n          toggleVotePanel={this.props.toggleVotePanel}\r\n          showVotePanel={this.props.showVotePanel} />\r\n        <Link to={`/movie/${this.props.movieId}/review/add`} className='btn btn-warning'>\r\n          Write review\r\n        </Link>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport default class MoviePoster extends React.Component {\r\n  render () {\r\n    let poster = null\r\n\r\n    if (this.props.posterUrl) {\r\n      poster = (\r\n        <div className='pull-left thumb-lg'>\r\n          <img className='media-object' src={this.props.posterUrl} />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return poster\r\n  }\r\n}\r\n","import React from 'react'\r\nimport FormActions from '../../actions/FormActions'\r\nimport MovieActions from '../../actions/MovieActions'\r\nimport FormStore from '../../stores/FormStore'\r\n\r\nexport default class MovieVotePanel extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = FormStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentWillMount () {\r\n    FormStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    FormStore.unlisten(this.onChange)\r\n  }\r\n\r\n  handleSubmit (e) {\r\n    e.preventDefault()\r\n\r\n    if (this.state.score > 10) {\r\n      FormActions.scoreValidationFail()\r\n      return\r\n    }\r\n\r\n    MovieActions.addVote(this.props.movieId, this.state.score)\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='col-sm-4 col-xs-offset-8 list-group-item animated fadeIn vote'>\r\n        <div className='media'>\r\n          <div className='media-body'>\r\n            <div className={`form-group ${this.state.scoreValidationState}`}>\r\n              <span className='help-block'>{this.state.message}</span>\r\n            </div>\r\n            <form className='form-inline' onSubmit={this.handleSubmit.bind(this)}>\r\n              <div className={`form-group ${this.state.scoreValidationState}`}>\r\n                <label className='control-label'>Score</label>\r\n                <input\r\n                  className='form-control'\r\n                  step='0.1'\r\n                  type='number'\r\n                  value={this.state.score || this.props.loggedInUserScore}\r\n                  onChange={FormActions.handleScoreChange} />\r\n                <input className='btn btn-primary' type='submit' value='Vote' />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router'\r\n\r\nimport UserActions from '../../actions/UserActions'\r\nimport UserStore from '../../stores/UserStore'\r\n\r\nexport default class NavbarUserMenu extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = UserStore.getState()\r\n\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    UserStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    UserStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    let userMenu\r\n    if (!this.state.loggedInUserId) {\r\n      userMenu = (\r\n        <ul className='nav navbar-nav pull-right'>\r\n          <li>\r\n            <Link to='/user/login'>Login</Link>\r\n          </li>\r\n          <li>\r\n            <Link to='/user/register'>Register</Link>\r\n          </li>\r\n        </ul>\r\n      )\r\n    } else {\r\n      userMenu = (\r\n        <ul className='nav navbar-nav pull-right'>\r\n          <li>\r\n            <Link to={`/user/profile/${this.state.loggedInUserId}`}>Profile</Link>\r\n          </li>\r\n          <li>\r\n            <a href='#' onClick={UserActions.logoutUser}>Logout</a>\r\n          </li>\r\n        </ul>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        {userMenu}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Router from 'react-router'\r\nimport ReactDOM from 'react-dom'\r\nimport createBrowserHistory from 'history/lib/createBrowserHistory'\r\n\r\nimport routes from './routes'\r\n\r\nlet history = createBrowserHistory()\r\n\r\nReactDOM.render(\r\n  <Router history={history}>{ routes }</Router>,\r\n  document.getElementById('app')\r\n)\r\n","import React from 'react'\r\nimport { Route } from 'react-router'\r\n\r\nimport App from './components/App'\r\nimport UserRegister from './components/UserRegister'\r\nimport UserLogin from './components/UserLogin'\r\nimport UserProfile from './components/UserProfile'\r\nimport Home from './components/Home'\r\nimport MovieAdd from './components/MovieAdd'\r\nimport authorize from './utilities/Authorize'\r\n\r\nexport default (\r\n  <Route component={App}>\r\n    <Route path='/' component={Home} />\r\n    <Route path='/movie/add' component={authorize(MovieAdd)} />\r\n    <Route path='/user/login' component={UserLogin} />\r\n    <Route path='/user/register' component={UserRegister} />\r\n    <Route path='/user/profile/:userId' component={authorize(UserProfile)} />\r\n  </Route>\r\n)\r\n","import alt from '../alt'\r\nimport UserActions from '../actions/UserActions'\r\nimport FormActions from '../actions/FormActions'\r\nimport MovieActions from '../actions/MovieActions'\r\n\r\nclass FormStore {\r\n  constructor () {\r\n    this.bindActions(FormActions)\r\n    this.bindListeners({\r\n      onRegisterUserFail: UserActions.registerUserFail,\r\n      onRegisterUserSuccess: UserActions.registerUserSuccess,\r\n      onLoginUserSuccess: UserActions.loginUserSuccess,\r\n      onLoginUserFail: UserActions.loginUserFail,\r\n      onAddCommentFail: MovieActions.addCommentFail,\r\n      onAddVoteSuccess: MovieActions.addVoteSuccess,\r\n      onAddVoteFail: MovieActions.addVoteFail\r\n    })\r\n\r\n    this.username = ''\r\n    this.password = ''\r\n    this.confirmedPassword = ''\r\n    this.firstName = ''\r\n    this.lastName = ''\r\n    this.age = ''\r\n    this.gender = ''\r\n    this.comment = ''  // !\r\n    this.score = ''  // !\r\n    this.formSubmitState = ''\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.commentValidationState = ''  // !\r\n    this.scoreValidationState = ''  // !\r\n    this.message = ''\r\n  }\r\n\r\n  onRegisterUserSuccess () {\r\n    console.log('FormStore register success')\r\n    this.formSubmitState = 'has-success'\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.message = 'User register successful'\r\n  }\r\n\r\n  onRegisterUserFail (err) {\r\n    console.log('FormStore register error', err)\r\n    if (err.code === 11000) {\r\n      this.usernameValidationState = 'has-error'\r\n      this.message = 'Username already in use'\r\n      return\r\n    }\r\n\r\n    this.formSubmitState = 'has-error'\r\n    this.message = err.errmsg\r\n  }\r\n\r\n  onLoginUserSuccess () {\r\n    this.formSubmitState = 'has-success'\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.message = 'User login successful'\r\n  }\r\n\r\n  onLoginUserFail (err) {\r\n    this.formSubmitState = 'has-error'\r\n    this.usernameValidationState = 'has-error'\r\n    this.passwordValidationState = 'has-error'\r\n    this.message = err.message\r\n  }\r\n\r\n  onUsernameValidationFail () {\r\n    this.usernameValidationState = 'has-error'\r\n    this.passwordValidationState = ''\r\n    this.formSubmitState = ''\r\n    this.message = 'Enter username'\r\n  }\r\n\r\n  onPasswordValidationFail () {\r\n    this.passwordValidationState = 'has-error'\r\n    this.usernameValidationState = ''\r\n    this.formSubmitState = ''\r\n    this.message = 'Invalid password, or passwords do not match'\r\n  }\r\n\r\n  onHandleUsernameChange (e) {\r\n    this.username = e.target.value\r\n  }\r\n\r\n  onHandlePasswordChange (e) {\r\n    this.password = e.target.value\r\n  }\r\n\r\n  onHandleConfirmedPasswordChange (e) {\r\n    this.confirmedPassword = e.target.value\r\n  }\r\n\r\n  onHandleFirstNameChange (e) {\r\n    this.firstName = e.target.value\r\n  }\r\n\r\n  onHandleLastNameChange (e) {\r\n    this.lastName = e.target.value\r\n  }\r\n\r\n  onHandleAgeChange (e) {\r\n    this.age = e.target.value\r\n  }\r\n\r\n  onHandleGenderChange (e) {\r\n    this.gender = e.target.value\r\n  }\r\n\r\n  onUnauthorizedAccessAttempt () {\r\n    this.formSubmitState = 'has-error'\r\n    this.usernameValidationState = ''\r\n    this.passwordValidationState = ''\r\n    this.message = 'Please login'\r\n  }\r\n\r\n  onAddCommentFail (err) {\r\n    this.commentValidationState = 'has-error'\r\n    this.message = err.message\r\n  }\r\n\r\n  onCommentValidationFail () {\r\n    this.commentValidationState = 'has-error'\r\n    this.message = 'Please enter comment text'\r\n  }\r\n\r\n  onHandleCommentChange (e) {\r\n    this.comment = e.target.value\r\n  }\r\n\r\n  onHandleScoreChange (e) {\r\n    this.score = e.target.value\r\n  }\r\n\r\n  onScoreValidationFail () {\r\n    this.scoreValidationState = 'has-error'\r\n    this.message = 'Valid score is between 0 - 10'\r\n  }\r\n\r\n  onAddVoteSuccess () {\r\n    this.scoreValidationState = ''\r\n    this.message = ''\r\n  }\r\n\r\n  onAddVoteFail (err) {\r\n    this.scoreValidationState = 'has-error'\r\n    this.message = err.message\r\n  }\r\n}\r\n\r\nexport default alt.createStore(FormStore)\r\n","import alt from '../alt'\r\nimport MovieAddActions from '../actions/MovieAddActions'\r\nimport Helpers from '../utilities/Helpers'\r\n\r\nclass MovieAddStore {\r\n  constructor () {\r\n    this.bindActions(MovieAddActions)\r\n\r\n    this.name = ''\r\n    this.description = ''\r\n    this.genres = []\r\n    this.moviePosterUrl = ''\r\n    this.genresValidationState = ''\r\n    this.nameValidationState = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onAddMovieSuccess () {\r\n    console.log('Added movie successfully!')\r\n  }\r\n\r\n  onAddMovieFail (err) {\r\n    console.log('Failed to add movie', err)\r\n  }\r\n\r\n  onHandleNameChange (e) {\r\n    this.name = e.target.value\r\n    this.nameValidationState = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onHandleDescriptionChange (e) {\r\n    this.description = e.target.value\r\n    this.genresValidationState = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onHandleGenresChange (e) {\r\n    console.log(e)\r\n    let genreValue = e.target.value\r\n\r\n    if (this.genres.indexOf(genreValue) === -1) {\r\n      this.genres = Helpers.appendToArray(genreValue, this.genres)\r\n    } else {\r\n      this.genres = Helpers.removeFromArray(genreValue, this.genres)\r\n    }\r\n\r\n    this.genresValidationState = ''\r\n    this.helpBlock = ''\r\n  }\r\n\r\n  onNameValidationFail () {\r\n    this.nameValidationState = 'has-error'\r\n    this.helpBlock = 'Enter movie name'\r\n  }\r\n\r\n  onGenresValidationFail () {\r\n    this.genresValidationState = 'has-error'\r\n    this.helpBlock = 'Select at least one movie genre'\r\n  }\r\n}\r\n\r\nexport default alt.createStore(MovieAddStore)\r\n","import alt from '../alt'\r\nimport MovieActions from '../actions/MovieActions'\r\n\r\nclass MovieStore {\r\n  constructor () {\r\n    this.bindActions(MovieActions)\r\n    this.topTenMovies = []\r\n    this.mostRecentMovies = []\r\n  }\r\n\r\n  onAddCommentSuccess (data) {\r\n    let comment = data.comment\r\n    let movieId = data.comment.movie\r\n\r\n    for (let i = 0, n = this.topTenMovies.length; i < n; i++) {\r\n      if (this.topTenMovies[i]._id === movieId) {\r\n        this.topTenMovies[i].comments.unshift(comment)\r\n      }\r\n    }\r\n  }\r\n\r\n  onAddMovieToTopTen (movie) {\r\n    this.topTenMovies.push(movie)\r\n  }\r\n\r\n  onEmptyTopTenMovies () {\r\n    this.topTenMovies = []\r\n  }\r\n\r\n  onGetTopTenMoviesSuccess (movies) {\r\n    this.topTenMovies = movies\r\n  }\r\n\r\n  onGetTopTenMoviesFail (err) {\r\n    console.log('Could not connect to DB', err)\r\n  }\r\n\r\n  onGetFiveRecentMoviesSuccess (data) {\r\n    this.mostRecentMovies = data\r\n  }\r\n\r\n  onGetFiveRecentMoviesFail () {\r\n    console.log('Could not connect to DB')\r\n  }\r\n\r\n  onAddVoteSuccess (data) {\r\n    let movieId = data.movieId\r\n    let loggedInUserScore = data.voteScore\r\n    let movieScore = data.movieScore\r\n    let movieVotes = data.movieVotes\r\n\r\n    for (let movie of this.topTenMovies) {\r\n      if (movie._id === movieId) {\r\n        movie.loggedInUserScore = loggedInUserScore\r\n        movie.score = movieScore\r\n        movie.votes = movieVotes\r\n        break\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default alt.createStore(MovieStore)\r\n","import alt from '../alt'\r\nimport NavbarActions from '../actions/NavbarActions'\r\n\r\nclass NavbarStore {\r\n  constructor () {\r\n    this.bindActions(NavbarActions)\r\n\r\n    this.ajaxAnimationClass = ''\r\n  }\r\n\r\n  onUpdateAjaxAnimation (animationClass) {\r\n    this.ajaxAnimationClass = animationClass\r\n  }\r\n}\r\n\r\nexport default alt.createStore(NavbarStore)\r\n","import alt from '../alt'\r\nimport UserActions from '../actions/UserActions'\r\n\r\nclass UserStore {\r\n  constructor () {\r\n    this.bindActions(UserActions)\r\n\r\n    this.loggedInUserId = ''\r\n    this.username = ''\r\n    this.roles = []\r\n  }\r\n\r\n  onLoginUserSuccess (user) {\r\n    this.loggedInUserId = user._id\r\n    this.username = user.username\r\n    this.roles = user.roles\r\n  }\r\n\r\n  onLoginUserFail () {\r\n    console.log('Failed to Login')\r\n  }\r\n\r\n  onLogoutUserSuccess () {\r\n    this.loggedInUserId = ''\r\n    this.username = ''\r\n    this.roles = []\r\n  }\r\n}\r\n\r\nexport default alt.createStore(UserStore)\r\n","import React from 'react'\r\nimport UserStore from '../stores/UserStore'\r\nimport FormActions from '../actions/FormActions'\r\n\r\nexport default function authorize (ChildComponent) {\r\n  return class Authorization extends React.Component {\r\n    constructor (props) {\r\n      super(props)\r\n\r\n      this.state = UserStore.getState()\r\n      this.onChange = this.onChange.bind(this)\r\n    }\r\n\r\n    onChange (state) {\r\n      this.setState(state)\r\n    }\r\n\r\n    componentWillMount () {\r\n      if (!this.state.userIsLoggedIn) {\r\n        this.props.history.pushState(null, '/user/login')\r\n        FormActions.unauthorizedAccessAttempt()\r\n      }\r\n    }\r\n\r\n    componentDidMount () {\r\n      UserStore.listen(this.onChange)\r\n    }\r\n\r\n    componentWillUnmount () {\r\n      UserStore.unlisten(this.onChange)\r\n    }\r\n\r\n    render () {\r\n      return <ChildComponent {...this.props} />\r\n    }\r\n  }\r\n}\r\n\r\nexport class Concealer extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = UserStore.getState()\r\n    this.onChange = this.onChange.bind(this)\r\n  }\r\n\r\n  onChange (state) {\r\n    this.setState(state)\r\n  }\r\n\r\n  componentDidMount () {\r\n    UserStore.listen(this.onChange)\r\n  }\r\n\r\n  componentWillUnmount () {\r\n    UserStore.unlisten(this.onChange)\r\n  }\r\n\r\n  render () {\r\n    let ChildComponent = this.props.ChildComponent\r\n    return this.state.loggedInUserId ? <ChildComponent {...this.props} /> : null\r\n  }\r\n}\r\n","export default class Helpers {\r\n  static formatMovieRating (score, votes) {\r\n    let rating = score / votes\r\n\r\n    if (isNaN(rating)) {  // division by zero is NaN\r\n      rating = 0\r\n    }\r\n\r\n    if (rating % 1 !== 0) {\r\n      rating = rating.toFixed(1)\r\n    }\r\n\r\n    return rating\r\n  }\r\n}","const API_KEY = '71aabd79c7082bcacabc96877ac7238b'\r\nconst SEARCH_BASE_URL = 'https://api.themoviedb.org/3/search/movie'\r\nconst POSTER_BASE_URL = 'https://image.tmdb.org/t/p/w500'\r\nconst UNVERIFIED_MOVIE_POSTER_URL = '/images/movie-unverified.png'\r\nconst MISSING_DATA_POSTER_URL = '/images/movie-missing-data.jpg'\r\n\r\nexport default class RequesterTMDB {\r\n  static getMoviePoster (movieName) {\r\n    return new Promise((resolve, reject) => {\r\n      let request = {\r\n        method: 'get',\r\n        url: `${SEARCH_BASE_URL}?api_key=${API_KEY}&query=${movieName}`\r\n      }\r\n\r\n      $.ajax(request)\r\n        .done((tmdbResponse) => {\r\n          console.log('TMDB response', tmdbResponse)\r\n\r\n          if (tmdbResponse.total_results === 0) {\r\n            resolve({posterUrl: UNVERIFIED_MOVIE_POSTER_URL})\r\n            return\r\n          }\r\n\r\n          let posterPath = tmdbResponse.results[0].poster_path\r\n          if (posterPath === null) {\r\n            resolve({posterUrl: MISSING_DATA_POSTER_URL})\r\n            return\r\n          }\r\n\r\n          resolve({posterUrl: `${POSTER_BASE_URL}/${posterPath}`})\r\n        })\r\n        .fail((error) => {\r\n          reject({\r\n            clientMessage: 'Request failed',\r\n            error: error\r\n          })\r\n        })\r\n    })\r\n  }\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYWx0L2xpYi9hY3Rpb25zL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2FsdC9saWIvZnVuY3Rpb25zLmpzIiwibm9kZV9tb2R1bGVzL2FsdC9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYWx0L2xpYi9zdG9yZS9BbHRTdG9yZS5qcyIsIm5vZGVfbW9kdWxlcy9hbHQvbGliL3N0b3JlL1N0b3JlTWl4aW4uanMiLCJub2RlX21vZHVsZXMvYWx0L2xpYi9zdG9yZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9hbHQvbGliL3V0aWxzL0FsdFV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL2FsdC9saWIvdXRpbHMvU3RhdGVGdW5jdGlvbnMuanMiLCJub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9kZWVwLWVxdWFsL2xpYi9pc19hcmd1bWVudHMuanMiLCJub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9saWIva2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9mbHV4L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2ZsdXgvbGliL0Rpc3BhdGNoZXIuanMiLCJub2RlX21vZHVsZXMvZmx1eC9ub2RlX21vZHVsZXMvZmJqcy9saWIvaW52YXJpYW50LmpzIiwibm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL0FjdGlvbnMuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvQXN5bmNVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9ET01TdGF0ZVN0b3JhZ2UuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvRE9NVXRpbHMuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvY3JlYXRlQnJvd3Nlckhpc3RvcnkuanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvY3JlYXRlRE9NSGlzdG9yeS5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9jcmVhdGVIaXN0b3J5LmpzIiwibm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL2NyZWF0ZUxvY2F0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2hpc3RvcnkvbGliL2RlcHJlY2F0ZS5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9leHRyYWN0UGF0aC5qcyIsIm5vZGVfbW9kdWxlcy9oaXN0b3J5L2xpYi9wYXJzZVBhdGguanMiLCJub2RlX21vZHVsZXMvaGlzdG9yeS9saWIvcnVuVHJhbnNpdGlvbkhvb2suanMiLCJub2RlX21vZHVsZXMvaW52YXJpYW50L2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvaXMtcHJvbWlzZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdHJhbnNtaXR0ZXIvZGlzdC90cmFuc21pdHRlci5qcyIsIm5vZGVfbW9kdWxlcy93YXJuaW5nL2Jyb3dzZXIuanMiLCJzb3VyY2VcXGNsaWVudFxcYWN0aW9uc1xcRm9ybUFjdGlvbnMuanMiLCJzb3VyY2VcXGNsaWVudFxcYWN0aW9uc1xcTW92aWVBY3Rpb25zLmpzIiwic291cmNlXFxjbGllbnRcXGFjdGlvbnNcXE1vdmllQWRkQWN0aW9ucy5qcyIsInNvdXJjZVxcY2xpZW50XFxhY3Rpb25zXFxOYXZiYXJBY3Rpb25zLmpzIiwic291cmNlXFxjbGllbnRcXGFjdGlvbnNcXFVzZXJBY3Rpb25zLmpzIiwic291cmNlXFxjbGllbnRcXGFsdC5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxBcHAuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcRm9vdGVyLmpzIiwic291cmNlXFxjbGllbnRcXGNvbXBvbmVudHNcXEhvbWUuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcTW92aWVBZGQuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcTmF2YmFyLmpzIiwic291cmNlXFxjbGllbnRcXGNvbXBvbmVudHNcXFVzZXJMb2dpbi5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxVc2VyUHJvZmlsZS5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxVc2VyUmVnaXN0ZXIuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcZm9ybVxcRm9ybS5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxmb3JtXFxSYWRpb0VsZW1lbnQuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcZm9ybVxcUmFkaW9Hcm91cC5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxmb3JtXFxTdWJtaXQuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcZm9ybVxcVGV4dEdyb3VwLmpzIiwic291cmNlXFxjbGllbnRcXGNvbXBvbmVudHNcXHN1Yi1jb21wb25lbnRzXFxDb21tZW50Rm9ybS5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxzdWItY29tcG9uZW50c1xcTW92aWVDYXJkLmpzIiwic291cmNlXFxjbGllbnRcXGNvbXBvbmVudHNcXHN1Yi1jb21wb25lbnRzXFxNb3ZpZUNvbW1lbnRzUGFuZWwuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcc3ViLWNvbXBvbmVudHNcXE1vdmllSW5mby5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxzdWItY29tcG9uZW50c1xcTW92aWVQYW5lbHNUb2dnbGUuanMiLCJzb3VyY2VcXGNsaWVudFxcY29tcG9uZW50c1xcc3ViLWNvbXBvbmVudHNcXE1vdmllUG9zdGVyLmpzIiwic291cmNlXFxjbGllbnRcXGNvbXBvbmVudHNcXHN1Yi1jb21wb25lbnRzXFxNb3ZpZVZvdGVQYW5lbC5qcyIsInNvdXJjZVxcY2xpZW50XFxjb21wb25lbnRzXFxzdWItY29tcG9uZW50c1xcTmF2YmFyVXNlck1lbnUuanMiLCJzb3VyY2VcXGNsaWVudFxcbWFpbi5qcyIsInNvdXJjZVxcY2xpZW50XFxyb3V0ZXMuanMiLCJzb3VyY2VcXGNsaWVudFxcc3RvcmVzXFxGb3JtU3RvcmUuanMiLCJzb3VyY2VcXGNsaWVudFxcc3RvcmVzXFxNb3ZpZUFkZFN0b3JlLmpzIiwic291cmNlXFxjbGllbnRcXHN0b3Jlc1xcTW92aWVTdG9yZS5qcyIsInNvdXJjZVxcY2xpZW50XFxzdG9yZXNcXE5hdmJhclN0b3JlLmpzIiwic291cmNlXFxjbGllbnRcXHN0b3Jlc1xcVXNlclN0b3JlLmpzIiwic291cmNlXFxjbGllbnRcXHV0aWxpdGllc1xcQXV0aG9yaXplLmpzIiwic291cmNlXFxjbGllbnRcXHV0aWxpdGllc1xcSGVscGVycy5qcyIsInNvdXJjZVxcY2xpZW50XFx1dGlsaXRpZXNcXFJlcXVlc3RlclRNREIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3RPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDakxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUM1REE7Ozs7Ozs7O0lBRU0sVyxHQUNKLHVCQUFlO0FBQUE7O0FBQ2IsT0FBSyxlQUFMLENBQ0Usc0JBREYsRUFFRSxzQkFGRixFQUdFLCtCQUhGLEVBSUUsdUJBSkYsRUFLRSxzQkFMRixFQU1FLGlC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RUFBQyxXQUFXLDJCQUFaLEVBQVI7QUFDQTtBQUNEOztBQUVELGNBQUksYUFBYSxhQUFhLE9BQWIsQ0FBcUIsQ0FBckIsRUFBd0IsV0FBekM7QUFDQSxjQUFJLGVBQWUsSUFBbkIsRUFBeUI7QUFDdkIsb0JBQVEsRUFBQyxXQUFXLHVCQUFaLEVBQVI7QUFDQTtBQUNEOztBQUVELGtCQUFRLEVBQUMsV0FBYyxlQUFkLFNBQWlDLFVBQWxDLEVBQVI7QUFDRCxTQWhCSCxFQWlCRyxJQWpCSCxDQWlCUSxVQUFDLEtBQUQsRUFBVztBQUNmLGlCQUFPO0FBQ0wsMkJBQWUsZ0JBRFY7QUFFTCxtQkFBTztBQUZGLFdBQVA7QUFJRCxTQXRCSDtBQXVCRCxPQTdCTSxDQUFQO0FBOEJEOzs7Ozs7a0JBaENrQixhIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IG1ha2VBY3Rpb247XG5cbnZhciBfZnVuY3Rpb25zID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zJyk7XG5cbnZhciBmbiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9mdW5jdGlvbnMpO1xuXG52YXIgX0FsdFV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvQWx0VXRpbHMnKTtcblxudmFyIHV0aWxzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX0FsdFV0aWxzKTtcblxudmFyIF9pc1Byb21pc2UgPSByZXF1aXJlKCdpcy1wcm9taXNlJyk7XG5cbnZhciBfaXNQcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzUHJvbWlzZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09ialsnZGVmYXVsdCddID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gbWFrZUFjdGlvbihhbHQsIG5hbWVzcGFjZSwgbmFtZSwgaW1wbGVtZW50YXRpb24sIG9iaikge1xuICB2YXIgaWQgPSB1dGlscy51aWQoYWx0Ll9hY3Rpb25zUmVnaXN0cnksIFN0cmluZyhuYW1lc3BhY2UpICsgJy4nICsgU3RyaW5nKG5hbWUpKTtcbiAgYWx0Ll9hY3Rpb25zUmVnaXN0cnlbaWRdID0gMTtcblxuICB2YXIgZGF0YSA9IHsgaWQ6IGlkLCBuYW1lc3BhY2U6IG5hbWVzcGFjZSwgbmFtZTogbmFtZSB9O1xuXG4gIHZhciBkaXNwYXRjaCA9IGZ1bmN0aW9uIGRpc3BhdGNoKHBheWxvYWQpIHtcbiAgICByZXR1cm4gYWx0LmRpc3BhdGNoKGlkLCBwYXlsb2FkLCBkYXRhKTtcbiAgfTtcblxuICAvLyB0aGUgYWN0aW9uIGl0c2VsZlxuICB2YXIgYWN0aW9uID0gZnVuY3Rpb24gYWN0aW9uKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBpbnZvY2F0aW9uUmVzdWx0ID0gaW1wbGVtZW50YXRpb24uYXBwbHkob2JqLCBhcmdzKTtcbiAgICB2YXIgYWN0aW9uUmVzdWx0ID0gaW52b2NhdGlvblJlc3VsdDtcblxuICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBwcm9taXNlcyBzaG91bGQgbm90IGJlIGRpc3BhdGNoZWRcbiAgICBpZiAoaW52b2NhdGlvblJlc3VsdCAhPT0gdW5kZWZpbmVkICYmICEoMCwgX2lzUHJvbWlzZTJbJ2RlZmF1bHQnXSkoaW52b2NhdGlvblJlc3VsdCkpIHtcbiAgICAgIGlmIChmbi5pc0Z1bmN0aW9uKGludm9jYXRpb25SZXN1bHQpKSB7XG4gICAgICAgIC8vIGlubmVyIGZ1bmN0aW9uIHJlc3VsdCBzaG91bGQgYmUgcmV0dXJuZWQgYXMgYW4gYWN0aW9uIHJlc3VsdFxuICAgICAgICBhY3Rpb25SZXN1bHQgPSBpbnZvY2F0aW9uUmVzdWx0KGRpc3BhdGNoLCBhbHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGF0Y2goaW52b2NhdGlvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGludm9jYXRpb25SZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdXRpbHMud2FybignQW4gYWN0aW9uIHdhcyBjYWxsZWQgYnV0IG5vdGhpbmcgd2FzIGRpc3BhdGNoZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uUmVzdWx0O1xuICB9O1xuICBhY3Rpb24uZGVmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYWN0aW9uLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0pO1xuICB9O1xuICBhY3Rpb24uaWQgPSBpZDtcbiAgYWN0aW9uLmRhdGEgPSBkYXRhO1xuXG4gIC8vIGVuc3VyZSBlYWNoIHJlZmVyZW5jZSBpcyB1bmlxdWUgaW4gdGhlIG5hbWVzcGFjZVxuICB2YXIgY29udGFpbmVyID0gYWx0LmFjdGlvbnNbbmFtZXNwYWNlXTtcbiAgdmFyIG5hbWVzcGFjZUlkID0gdXRpbHMudWlkKGNvbnRhaW5lciwgbmFtZSk7XG4gIGNvbnRhaW5lcltuYW1lc3BhY2VJZF0gPSBhY3Rpb247XG5cbiAgLy8gZ2VuZXJhdGUgYSBjb25zdGFudFxuICB2YXIgY29uc3RhbnQgPSB1dGlscy5mb3JtYXRBc0NvbnN0YW50KG5hbWVzcGFjZUlkKTtcbiAgY29udGFpbmVyW2NvbnN0YW50XSA9IGlkO1xuXG4gIHJldHVybiBhY3Rpb247XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmlzTXV0YWJsZU9iamVjdCA9IGlzTXV0YWJsZU9iamVjdDtcbmV4cG9ydHMuZWFjaE9iamVjdCA9IGVhY2hPYmplY3Q7XG5leHBvcnRzLmFzc2lnbiA9IGFzc2lnbjtcbnZhciBpc0Z1bmN0aW9uID0gZXhwb3J0cy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cbmZ1bmN0aW9uIGlzTXV0YWJsZU9iamVjdCh0YXJnZXQpIHtcbiAgdmFyIEN0b3IgPSB0YXJnZXQuY29uc3RydWN0b3I7XG5cbiAgcmV0dXJuICEhdGFyZ2V0ICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0YXJnZXQpID09PSAnW29iamVjdCBPYmplY3RdJyAmJiBpc0Z1bmN0aW9uKEN0b3IpICYmICFPYmplY3QuaXNGcm96ZW4odGFyZ2V0KSAmJiAoQ3RvciBpbnN0YW5jZW9mIEN0b3IgfHwgdGFyZ2V0LnR5cGUgPT09ICdBbHRTdG9yZScpO1xufVxuXG5mdW5jdGlvbiBlYWNoT2JqZWN0KGYsIG8pIHtcbiAgby5mb3JFYWNoKGZ1bmN0aW9uIChmcm9tKSB7XG4gICAgT2JqZWN0LmtleXMoT2JqZWN0KGZyb20pKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGYoa2V5LCBmcm9tW2tleV0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYXNzaWduKHRhcmdldCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIHNvdXJjZVtfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICBlYWNoT2JqZWN0KGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRhcmdldFtrZXldID0gdmFsdWU7XG4gIH0sIHNvdXJjZSk7XG4gIHJldHVybiB0YXJnZXQ7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2ZsdXggPSByZXF1aXJlKCdmbHV4Jyk7XG5cbnZhciBfU3RhdGVGdW5jdGlvbnMgPSByZXF1aXJlKCcuL3V0aWxzL1N0YXRlRnVuY3Rpb25zJyk7XG5cbnZhciBTdGF0ZUZ1bmN0aW9ucyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9TdGF0ZUZ1bmN0aW9ucyk7XG5cbnZhciBfZnVuY3Rpb25zID0gcmVxdWlyZSgnLi9mdW5jdGlvbnMnKTtcblxudmFyIGZuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2Z1bmN0aW9ucyk7XG5cbnZhciBfc3RvcmUgPSByZXF1aXJlKCcuL3N0b3JlJyk7XG5cbnZhciBzdG9yZSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9zdG9yZSk7XG5cbnZhciBfQWx0VXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL0FsdFV0aWxzJyk7XG5cbnZhciB1dGlscyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9BbHRVdGlscyk7XG5cbnZhciBfYWN0aW9ucyA9IHJlcXVpcmUoJy4vYWN0aW9ucycpO1xuXG52YXIgX2FjdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYWN0aW9ucyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09ialsnZGVmYXVsdCddID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfSAvKiBnbG9iYWwgd2luZG93ICovXG5cblxudmFyIEFsdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQWx0KCkge1xuICAgIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBbHQpO1xuXG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zZXJpYWxpemUgPSBjb25maWcuc2VyaWFsaXplIHx8IEpTT04uc3RyaW5naWZ5O1xuICAgIHRoaXMuZGVzZXJpYWxpemUgPSBjb25maWcuZGVzZXJpYWxpemUgfHwgSlNPTi5wYXJzZTtcbiAgICB0aGlzLmRpc3BhdGNoZXIgPSBjb25maWcuZGlzcGF0Y2hlciB8fCBuZXcgX2ZsdXguRGlzcGF0Y2hlcigpO1xuICAgIHRoaXMuYmF0Y2hpbmdGdW5jdGlvbiA9IGNvbmZpZy5iYXRjaGluZ0Z1bmN0aW9uIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfTtcbiAgICB0aGlzLmFjdGlvbnMgPSB7IGdsb2JhbDoge30gfTtcbiAgICB0aGlzLnN0b3JlcyA9IHt9O1xuICAgIHRoaXMuc3RvcmVUcmFuc2Zvcm1zID0gY29uZmlnLnN0b3JlVHJhbnNmb3JtcyB8fCBbXTtcbiAgICB0aGlzLnRyYXBBc3luYyA9IGZhbHNlO1xuICAgIHRoaXMuX2FjdGlvbnNSZWdpc3RyeSA9IHt9O1xuICAgIHRoaXMuX2luaXRTbmFwc2hvdCA9IHt9O1xuICAgIHRoaXMuX2xhc3RTbmFwc2hvdCA9IHt9O1xuICB9XG5cbiAgQWx0LnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24sIGRhdGEsIGRldGFpbHMpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMuYmF0Y2hpbmdGdW5jdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTgpLnN1YnN0cigyLCAxNik7XG5cbiAgICAgICAgLy8gc3VwcG9ydCBzdHJhaWdodCBkaXNwYXRjaGluZyBvZiBGU0Etc3R5bGUgYWN0aW9uc1xuICAgICAgICBpZiAoYWN0aW9uLmhhc093blByb3BlcnR5KCd0eXBlJykgJiYgYWN0aW9uLmhhc093blByb3BlcnR5KCdwYXlsb2FkJykpIHtcbiAgICAgICAgICB2YXIgZnNhRGV0YWlscyA9IHtcbiAgICAgICAgICAgIGlkOiBhY3Rpb24udHlwZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogYWN0aW9uLnR5cGUsXG4gICAgICAgICAgICBuYW1lOiBhY3Rpb24udHlwZVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3BhdGNoZXIuZGlzcGF0Y2godXRpbHMuZnNhKGlkLCBhY3Rpb24udHlwZSwgYWN0aW9uLnBheWxvYWQsIGZzYURldGFpbHMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3Rpb24uaWQgJiYgYWN0aW9uLmRpc3BhdGNoKSB7XG4gICAgICAgICAgcmV0dXJuIHV0aWxzLmRpc3BhdGNoKGlkLCBhY3Rpb24sIGRhdGEsIF90aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoKHV0aWxzLmZzYShpZCwgYWN0aW9uLCBkYXRhLCBkZXRhaWxzKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlzcGF0Y2g7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLmNyZWF0ZVVuc2F2ZWRTdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVVbnNhdmVkU3RvcmUoU3RvcmVNb2RlbCkge1xuICAgICAgdmFyIGtleSA9IFN0b3JlTW9kZWwuZGlzcGxheU5hbWUgfHwgJyc7XG4gICAgICBzdG9yZS5jcmVhdGVTdG9yZUNvbmZpZyh0aGlzLmNvbmZpZywgU3RvcmVNb2RlbCk7XG4gICAgICB2YXIgU3RvcmUgPSBzdG9yZS50cmFuc2Zvcm1TdG9yZSh0aGlzLnN0b3JlVHJhbnNmb3JtcywgU3RvcmVNb2RlbCk7XG5cbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuLmlzRnVuY3Rpb24oU3RvcmUpID8gc3RvcmUuY3JlYXRlU3RvcmVGcm9tQ2xhc3MuYXBwbHkoc3RvcmUsIFt0aGlzLCBTdG9yZSwga2V5XS5jb25jYXQoYXJncykpIDogc3RvcmUuY3JlYXRlU3RvcmVGcm9tT2JqZWN0KHRoaXMsIFN0b3JlLCBrZXkpO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVVbnNhdmVkU3RvcmU7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLmNyZWF0ZVN0b3JlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVN0b3JlKFN0b3JlTW9kZWwsIGlkZW4pIHtcbiAgICAgIHZhciBrZXkgPSBpZGVuIHx8IFN0b3JlTW9kZWwuZGlzcGxheU5hbWUgfHwgU3RvcmVNb2RlbC5uYW1lIHx8ICcnO1xuICAgICAgc3RvcmUuY3JlYXRlU3RvcmVDb25maWcodGhpcy5jb25maWcsIFN0b3JlTW9kZWwpO1xuICAgICAgdmFyIFN0b3JlID0gc3RvcmUudHJhbnNmb3JtU3RvcmUodGhpcy5zdG9yZVRyYW5zZm9ybXMsIFN0b3JlTW9kZWwpO1xuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgaWYgKG1vZHVsZS5ob3QpIGRlbGV0ZSB0aGlzLnN0b3Jlc1trZXldO1xuXG4gICAgICBpZiAodGhpcy5zdG9yZXNba2V5XSB8fCAha2V5KSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3Jlc1trZXldKSB7XG4gICAgICAgICAgdXRpbHMud2FybignQSBzdG9yZSBuYW1lZCAnICsgU3RyaW5nKGtleSkgKyAnIGFscmVhZHkgZXhpc3RzLCBkb3VibGUgY2hlY2sgeW91ciBzdG9yZSAnICsgJ25hbWVzIG9yIHBhc3MgaW4geW91ciBvd24gY3VzdG9tIGlkZW50aWZpZXIgZm9yIGVhY2ggc3RvcmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1dGlscy53YXJuKCdTdG9yZSBuYW1lIHdhcyBub3Qgc3BlY2lmaWVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBrZXkgPSB1dGlscy51aWQodGhpcy5zdG9yZXMsIGtleSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMiA/IF9sZW4yIC0gMiA6IDApLCBfa2V5MiA9IDI7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5MiAtIDJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0b3JlSW5zdGFuY2UgPSBmbi5pc0Z1bmN0aW9uKFN0b3JlKSA/IHN0b3JlLmNyZWF0ZVN0b3JlRnJvbUNsYXNzLmFwcGx5KHN0b3JlLCBbdGhpcywgU3RvcmUsIGtleV0uY29uY2F0KGFyZ3MpKSA6IHN0b3JlLmNyZWF0ZVN0b3JlRnJvbU9iamVjdCh0aGlzLCBTdG9yZSwga2V5KTtcblxuICAgICAgdGhpcy5zdG9yZXNba2V5XSA9IHN0b3JlSW5zdGFuY2U7XG4gICAgICBTdGF0ZUZ1bmN0aW9ucy5zYXZlSW5pdGlhbFNuYXBzaG90KHRoaXMsIGtleSk7XG5cbiAgICAgIHJldHVybiBzdG9yZUluc3RhbmNlO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVTdG9yZTtcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUuZ2VuZXJhdGVBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGdlbmVyYXRlQWN0aW9ucygpIHtcbiAgICAgIHZhciBhY3Rpb25zID0geyBuYW1lOiAnZ2xvYmFsJyB9O1xuXG4gICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFjdGlvbk5hbWVzID0gQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgICAgYWN0aW9uTmFtZXNbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQWN0aW9ucyhhY3Rpb25OYW1lcy5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgYWN0aW9uKSB7XG4gICAgICAgIG9ialthY3Rpb25dID0gdXRpbHMuZGlzcGF0Y2hJZGVudGl0eTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH0sIGFjdGlvbnMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2VuZXJhdGVBY3Rpb25zO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5jcmVhdGVBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlQWN0aW9uKG5hbWUsIGltcGxlbWVudGF0aW9uLCBvYmopIHtcbiAgICAgIHJldHVybiAoMCwgX2FjdGlvbnMyWydkZWZhdWx0J10pKHRoaXMsICdnbG9iYWwnLCBuYW1lLCBpbXBsZW1lbnRhdGlvbiwgb2JqKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlQWN0aW9uO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5jcmVhdGVBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUFjdGlvbnMoQWN0aW9uc0NsYXNzKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIGV4cG9ydE9iaiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuXG4gICAgICB2YXIgYWN0aW9ucyA9IHt9O1xuICAgICAgdmFyIGtleSA9IHV0aWxzLnVpZCh0aGlzLl9hY3Rpb25zUmVnaXN0cnksIEFjdGlvbnNDbGFzcy5kaXNwbGF5TmFtZSB8fCBBY3Rpb25zQ2xhc3MubmFtZSB8fCAnVW5rbm93bicpO1xuXG4gICAgICBpZiAoZm4uaXNGdW5jdGlvbihBY3Rpb25zQ2xhc3MpKSB7XG4gICAgICAgIGZuLmFzc2lnbihhY3Rpb25zLCB1dGlscy5nZXRQcm90b3R5cGVDaGFpbihBY3Rpb25zQ2xhc3MpKTtcblxuICAgICAgICB2YXIgQWN0aW9uc0dlbmVyYXRvciA9IGZ1bmN0aW9uIChfQWN0aW9uc0NsYXNzKSB7XG4gICAgICAgICAgX2luaGVyaXRzKEFjdGlvbnNHZW5lcmF0b3IsIF9BY3Rpb25zQ2xhc3MpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gQWN0aW9uc0dlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBY3Rpb25zR2VuZXJhdG9yKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgX2xlbjUgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjUpLCBfa2V5NSA9IDA7IF9rZXk1IDwgX2xlbjU7IF9rZXk1KyspIHtcbiAgICAgICAgICAgICAgYXJnc1tfa2V5NV0gPSBhcmd1bWVudHNbX2tleTVdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0FjdGlvbnNDbGFzcy5jYWxsLmFwcGx5KF9BY3Rpb25zQ2xhc3MsIFt0aGlzXS5jb25jYXQoYXJncykpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBBY3Rpb25zR2VuZXJhdG9yLnByb3RvdHlwZS5nZW5lcmF0ZUFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUFjdGlvbnMoKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIF9sZW42ID0gYXJndW1lbnRzLmxlbmd0aCwgYWN0aW9uTmFtZXMgPSBBcnJheShfbGVuNiksIF9rZXk2ID0gMDsgX2tleTYgPCBfbGVuNjsgX2tleTYrKykge1xuICAgICAgICAgICAgICAgIGFjdGlvbk5hbWVzW19rZXk2XSA9IGFyZ3VtZW50c1tfa2V5Nl07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBhY3Rpb25OYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb25OYW1lKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uc1thY3Rpb25OYW1lXSA9IHV0aWxzLmRpc3BhdGNoSWRlbnRpdHk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVBY3Rpb25zO1xuICAgICAgICAgIH0oKTtcblxuICAgICAgICAgIHJldHVybiBBY3Rpb25zR2VuZXJhdG9yO1xuICAgICAgICB9KEFjdGlvbnNDbGFzcyk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzRm9yQ29uc3RydWN0b3IgPSBBcnJheShfbGVuNCA+IDIgPyBfbGVuNCAtIDIgOiAwKSwgX2tleTQgPSAyOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICAgICAgYXJnc0ZvckNvbnN0cnVjdG9yW19rZXk0IC0gMl0gPSBhcmd1bWVudHNbX2tleTRdO1xuICAgICAgICB9XG5cbiAgICAgICAgZm4uYXNzaWduKGFjdGlvbnMsIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoQWN0aW9uc0dlbmVyYXRvciwgW251bGxdLmNvbmNhdChhcmdzRm9yQ29uc3RydWN0b3IpKSkoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbi5hc3NpZ24oYWN0aW9ucywgQWN0aW9uc0NsYXNzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hY3Rpb25zW2tleV0gPSB0aGlzLmFjdGlvbnNba2V5XSB8fCB7fTtcblxuICAgICAgZm4uZWFjaE9iamVjdChmdW5jdGlvbiAoYWN0aW9uTmFtZSwgYWN0aW9uKSB7XG4gICAgICAgIGlmICghZm4uaXNGdW5jdGlvbihhY3Rpb24pKSB7XG4gICAgICAgICAgZXhwb3J0T2JqW2FjdGlvbk5hbWVdID0gYWN0aW9uO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgYWN0aW9uXG4gICAgICAgIGV4cG9ydE9ialthY3Rpb25OYW1lXSA9ICgwLCBfYWN0aW9uczJbJ2RlZmF1bHQnXSkoX3RoaXMzLCBrZXksIGFjdGlvbk5hbWUsIGFjdGlvbiwgZXhwb3J0T2JqKTtcblxuICAgICAgICAvLyBnZW5lcmF0ZSBhIGNvbnN0YW50XG4gICAgICAgIHZhciBjb25zdGFudCA9IHV0aWxzLmZvcm1hdEFzQ29uc3RhbnQoYWN0aW9uTmFtZSk7XG4gICAgICAgIGV4cG9ydE9ialtjb25zdGFudF0gPSBleHBvcnRPYmpbYWN0aW9uTmFtZV0uaWQ7XG4gICAgICB9LCBbYWN0aW9uc10pO1xuXG4gICAgICByZXR1cm4gZXhwb3J0T2JqO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVBY3Rpb25zO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS50YWtlU25hcHNob3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gdGFrZVNuYXBzaG90KCkge1xuICAgICAgZm9yICh2YXIgX2xlbjcgPSBhcmd1bWVudHMubGVuZ3RoLCBzdG9yZU5hbWVzID0gQXJyYXkoX2xlbjcpLCBfa2V5NyA9IDA7IF9rZXk3IDwgX2xlbjc7IF9rZXk3KyspIHtcbiAgICAgICAgc3RvcmVOYW1lc1tfa2V5N10gPSBhcmd1bWVudHNbX2tleTddO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhdGUgPSBTdGF0ZUZ1bmN0aW9ucy5zbmFwc2hvdCh0aGlzLCBzdG9yZU5hbWVzKTtcbiAgICAgIGZuLmFzc2lnbih0aGlzLl9sYXN0U25hcHNob3QsIHN0YXRlKTtcbiAgICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZShzdGF0ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRha2VTbmFwc2hvdDtcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUucm9sbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gcm9sbGJhY2soKSB7XG4gICAgICBTdGF0ZUZ1bmN0aW9ucy5zZXRBcHBTdGF0ZSh0aGlzLCB0aGlzLnNlcmlhbGl6ZSh0aGlzLl9sYXN0U25hcHNob3QpLCBmdW5jdGlvbiAoc3RvcmVJbnN0KSB7XG4gICAgICAgIHN0b3JlSW5zdC5saWZlY3ljbGUoJ3JvbGxiYWNrJyk7XG4gICAgICAgIHN0b3JlSW5zdC5lbWl0Q2hhbmdlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm9sbGJhY2s7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLnJlY3ljbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gcmVjeWNsZSgpIHtcbiAgICAgIGZvciAodmFyIF9sZW44ID0gYXJndW1lbnRzLmxlbmd0aCwgc3RvcmVOYW1lcyA9IEFycmF5KF9sZW44KSwgX2tleTggPSAwOyBfa2V5OCA8IF9sZW44OyBfa2V5OCsrKSB7XG4gICAgICAgIHN0b3JlTmFtZXNbX2tleThdID0gYXJndW1lbnRzW19rZXk4XTtcbiAgICAgIH1cblxuICAgICAgdmFyIGluaXRpYWxTbmFwc2hvdCA9IHN0b3JlTmFtZXMubGVuZ3RoID8gU3RhdGVGdW5jdGlvbnMuZmlsdGVyU25hcHNob3RzKHRoaXMsIHRoaXMuX2luaXRTbmFwc2hvdCwgc3RvcmVOYW1lcykgOiB0aGlzLl9pbml0U25hcHNob3Q7XG5cbiAgICAgIFN0YXRlRnVuY3Rpb25zLnNldEFwcFN0YXRlKHRoaXMsIHRoaXMuc2VyaWFsaXplKGluaXRpYWxTbmFwc2hvdCksIGZ1bmN0aW9uIChzdG9yZUluc3QpIHtcbiAgICAgICAgc3RvcmVJbnN0LmxpZmVjeWNsZSgnaW5pdCcpO1xuICAgICAgICBzdG9yZUluc3QuZW1pdENoYW5nZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlY3ljbGU7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgICAgdmFyIHN0YXRlID0gdGhpcy5zZXJpYWxpemUoU3RhdGVGdW5jdGlvbnMuc25hcHNob3QodGhpcykpO1xuICAgICAgdGhpcy5yZWN5Y2xlKCk7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZsdXNoO1xuICB9KCk7XG5cbiAgQWx0LnByb3RvdHlwZS5ib290c3RyYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gYm9vdHN0cmFwKGRhdGEpIHtcbiAgICAgIFN0YXRlRnVuY3Rpb25zLnNldEFwcFN0YXRlKHRoaXMsIGRhdGEsIGZ1bmN0aW9uIChzdG9yZUluc3QsIHN0YXRlKSB7XG4gICAgICAgIHN0b3JlSW5zdC5saWZlY3ljbGUoJ2Jvb3RzdHJhcCcsIHN0YXRlKTtcbiAgICAgICAgc3RvcmVJbnN0LmVtaXRDaGFuZ2UoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBib290c3RyYXA7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLnByZXBhcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gcHJlcGFyZShzdG9yZUluc3QsIHBheWxvYWQpIHtcbiAgICAgIHZhciBkYXRhID0ge307XG4gICAgICBpZiAoIXN0b3JlSW5zdC5kaXNwbGF5TmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ1N0b3JlIHByb3ZpZGVkIGRvZXMgbm90IGhhdmUgYSBuYW1lJyk7XG4gICAgICB9XG4gICAgICBkYXRhW3N0b3JlSW5zdC5kaXNwbGF5TmFtZV0gPSBwYXlsb2FkO1xuICAgICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplKGRhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiBwcmVwYXJlO1xuICB9KCk7XG5cbiAgLy8gSW5zdGFuY2UgdHlwZSBtZXRob2RzIGZvciBpbmplY3RpbmcgYWx0IGludG8geW91ciBhcHBsaWNhdGlvbiBhcyBjb250ZXh0XG5cbiAgQWx0LnByb3RvdHlwZS5hZGRBY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGFkZEFjdGlvbnMobmFtZSwgQWN0aW9uc0NsYXNzKSB7XG4gICAgICBmb3IgKHZhciBfbGVuOSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuOSA+IDIgPyBfbGVuOSAtIDIgOiAwKSwgX2tleTkgPSAyOyBfa2V5OSA8IF9sZW45OyBfa2V5OSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleTkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5OV07XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYWN0aW9uc1tuYW1lXSA9IEFycmF5LmlzQXJyYXkoQWN0aW9uc0NsYXNzKSA/IHRoaXMuZ2VuZXJhdGVBY3Rpb25zLmFwcGx5KHRoaXMsIEFjdGlvbnNDbGFzcykgOiB0aGlzLmNyZWF0ZUFjdGlvbnMuYXBwbHkodGhpcywgW0FjdGlvbnNDbGFzc10uY29uY2F0KGFyZ3MpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWRkQWN0aW9ucztcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUuYWRkU3RvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gYWRkU3RvcmUobmFtZSwgU3RvcmVNb2RlbCkge1xuICAgICAgZm9yICh2YXIgX2xlbjEwID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4xMCA+IDIgPyBfbGVuMTAgLSAyIDogMCksIF9rZXkxMCA9IDI7IF9rZXkxMCA8IF9sZW4xMDsgX2tleTEwKyspIHtcbiAgICAgICAgYXJnc1tfa2V5MTAgLSAyXSA9IGFyZ3VtZW50c1tfa2V5MTBdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNyZWF0ZVN0b3JlLmFwcGx5KHRoaXMsIFtTdG9yZU1vZGVsLCBuYW1lXS5jb25jYXQoYXJncykpO1xuICAgIH1cblxuICAgIHJldHVybiBhZGRTdG9yZTtcbiAgfSgpO1xuXG4gIEFsdC5wcm90b3R5cGUuZ2V0QWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBnZXRBY3Rpb25zKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdGlvbnNbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldEFjdGlvbnM7XG4gIH0oKTtcblxuICBBbHQucHJvdG90eXBlLmdldFN0b3JlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGdldFN0b3JlKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3Jlc1tuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0U3RvcmU7XG4gIH0oKTtcblxuICBBbHQuZGVidWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZGVidWcobmFtZSwgYWx0LCB3aW4pIHtcbiAgICAgIHZhciBrZXkgPSAnYWx0LmpzLm9yZyc7XG4gICAgICB2YXIgY29udGV4dCA9IHdpbjtcbiAgICAgIGlmICghY29udGV4dCAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb250ZXh0ID0gd2luZG93O1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb250ZXh0W2tleV0gPSBjb250ZXh0W2tleV0gfHwgW107XG4gICAgICAgIGNvbnRleHRba2V5XS5wdXNoKHsgbmFtZTogbmFtZSwgYWx0OiBhbHQgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWx0O1xuICAgIH1cblxuICAgIHJldHVybiBkZWJ1ZztcbiAgfSgpO1xuXG4gIHJldHVybiBBbHQ7XG59KCk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IEFsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9mdW5jdGlvbnMgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMnKTtcblxudmFyIGZuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2Z1bmN0aW9ucyk7XG5cbnZhciBfdHJhbnNtaXR0ZXIgPSByZXF1aXJlKCd0cmFuc21pdHRlcicpO1xuXG52YXIgX3RyYW5zbWl0dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RyYW5zbWl0dGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqWydkZWZhdWx0J10gPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQWx0U3RvcmUgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEFsdFN0b3JlKGFsdCwgbW9kZWwsIHN0YXRlLCBTdG9yZU1vZGVsKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBbHRTdG9yZSk7XG5cbiAgICB2YXIgbGlmZWN5Y2xlRXZlbnRzID0gbW9kZWwubGlmZWN5Y2xlRXZlbnRzO1xuICAgIHRoaXMudHJhbnNtaXR0ZXIgPSAoMCwgX3RyYW5zbWl0dGVyMlsnZGVmYXVsdCddKSgpO1xuICAgIHRoaXMubGlmZWN5Y2xlID0gZnVuY3Rpb24gKGV2ZW50LCB4KSB7XG4gICAgICBpZiAobGlmZWN5Y2xlRXZlbnRzW2V2ZW50XSkgbGlmZWN5Y2xlRXZlbnRzW2V2ZW50XS5wdWJsaXNoKHgpO1xuICAgIH07XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuXG4gICAgdGhpcy5hbHQgPSBhbHQ7XG4gICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IGZhbHNlO1xuICAgIHRoaXMuZGlzcGxheU5hbWUgPSBtb2RlbC5kaXNwbGF5TmFtZTtcbiAgICB0aGlzLmJvdW5kTGlzdGVuZXJzID0gbW9kZWwuYm91bmRMaXN0ZW5lcnM7XG4gICAgdGhpcy5TdG9yZU1vZGVsID0gU3RvcmVNb2RlbDtcbiAgICB0aGlzLnJlZHVjZSA9IG1vZGVsLnJlZHVjZSB8fCBmdW5jdGlvbiAoeCkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcblxuICAgIHZhciBvdXRwdXQgPSBtb2RlbC5vdXRwdXQgfHwgZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH07XG5cbiAgICB0aGlzLmVtaXRDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMudHJhbnNtaXR0ZXIucHVibGlzaChvdXRwdXQoX3RoaXMuc3RhdGUpKTtcbiAgICB9O1xuXG4gICAgdmFyIGhhbmRsZURpc3BhdGNoID0gZnVuY3Rpb24gaGFuZGxlRGlzcGF0Y2goZiwgcGF5bG9hZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKG1vZGVsLmhhbmRsZXNPd25FcnJvcnMpIHtcbiAgICAgICAgICBfdGhpcy5saWZlY3ljbGUoJ2Vycm9yJywge1xuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxuICAgICAgICAgICAgc3RhdGU6IF90aGlzLnN0YXRlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm4uYXNzaWduKHRoaXMsIG1vZGVsLnB1YmxpY01ldGhvZHMpO1xuXG4gICAgLy8gUmVnaXN0ZXIgZGlzcGF0Y2hlclxuICAgIHRoaXMuZGlzcGF0Y2hUb2tlbiA9IGFsdC5kaXNwYXRjaGVyLnJlZ2lzdGVyKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICBfdGhpcy5wcmV2ZW50RGVmYXVsdCA9IGZhbHNlO1xuXG4gICAgICBfdGhpcy5saWZlY3ljbGUoJ2JlZm9yZUVhY2gnLCB7XG4gICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgIHN0YXRlOiBfdGhpcy5zdGF0ZVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBhY3Rpb25IYW5kbGVycyA9IG1vZGVsLmFjdGlvbkxpc3RlbmVyc1twYXlsb2FkLmFjdGlvbl07XG5cbiAgICAgIGlmIChhY3Rpb25IYW5kbGVycyB8fCBtb2RlbC5vdGhlcndpc2UpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcblxuICAgICAgICBpZiAoYWN0aW9uSGFuZGxlcnMpIHtcbiAgICAgICAgICByZXN1bHQgPSBoYW5kbGVEaXNwYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0aW9uSGFuZGxlcnMuZmlsdGVyKEJvb2xlYW4pLmV2ZXJ5KGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwobW9kZWwsIHBheWxvYWQuZGF0YSwgcGF5bG9hZC5hY3Rpb24pICE9PSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIHBheWxvYWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZURpc3BhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBtb2RlbC5vdGhlcndpc2UocGF5bG9hZC5kYXRhLCBwYXlsb2FkLmFjdGlvbik7XG4gICAgICAgICAgfSwgcGF5bG9hZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSAmJiAhX3RoaXMucHJldmVudERlZmF1bHQpIF90aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGVsLnJlZHVjZSkge1xuICAgICAgICBoYW5kbGVEaXNwYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gbW9kZWwucmVkdWNlKF90aGlzLnN0YXRlLCBwYXlsb2FkKTtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgX3RoaXMuc3RhdGUgPSB2YWx1ZTtcbiAgICAgICAgfSwgcGF5bG9hZCk7XG4gICAgICAgIGlmICghX3RoaXMucHJldmVudERlZmF1bHQpIF90aGlzLmVtaXRDaGFuZ2UoKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMubGlmZWN5Y2xlKCdhZnRlckVhY2gnLCB7XG4gICAgICAgIHBheWxvYWQ6IHBheWxvYWQsXG4gICAgICAgIHN0YXRlOiBfdGhpcy5zdGF0ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmxpZmVjeWNsZSgnaW5pdCcpO1xuICB9XG5cbiAgQWx0U3RvcmUucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBsaXN0ZW4oY2IpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAoIWZuLmlzRnVuY3Rpb24oY2IpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0ZW4gZXhwZWN0cyBhIGZ1bmN0aW9uJyk7XG5cbiAgICAgIHZhciBfdHJhbnNtaXR0ZXIkc3Vic2NyaWIgPSB0aGlzLnRyYW5zbWl0dGVyLnN1YnNjcmliZShjYik7XG5cbiAgICAgIHZhciBkaXNwb3NlID0gX3RyYW5zbWl0dGVyJHN1YnNjcmliLmRpc3Bvc2U7XG5cbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHsgY2I6IGNiLCBkaXNwb3NlOiBkaXNwb3NlIH0pO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLmxpZmVjeWNsZSgndW5saXN0ZW4nKTtcbiAgICAgICAgZGlzcG9zZSgpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdGVuO1xuICB9KCk7XG5cbiAgQWx0U3RvcmUucHJvdG90eXBlLnVubGlzdGVuID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHVubGlzdGVuKGNiKSB7XG4gICAgICB0aGlzLmxpZmVjeWNsZSgndW5saXN0ZW4nKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmNiID09PSBjYjtcbiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB1bmxpc3RlbjtcbiAgfSgpO1xuXG4gIEFsdFN0b3JlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLlN0b3JlTW9kZWwuY29uZmlnLmdldFN0YXRlLmNhbGwodGhpcywgdGhpcy5zdGF0ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldFN0YXRlO1xuICB9KCk7XG5cbiAgcmV0dXJuIEFsdFN0b3JlO1xufSgpO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBBbHRTdG9yZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90cmFuc21pdHRlciA9IHJlcXVpcmUoJ3RyYW5zbWl0dGVyJyk7XG5cbnZhciBfdHJhbnNtaXR0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHJhbnNtaXR0ZXIpO1xuXG52YXIgX2Z1bmN0aW9ucyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucycpO1xuXG52YXIgZm4gPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfZnVuY3Rpb25zKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09ialsnZGVmYXVsdCddID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgU3RvcmVNaXhpbiA9IHtcbiAgd2FpdEZvcjogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHdhaXRGb3IoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBzb3VyY2VzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignRGlzcGF0Y2ggdG9rZW5zIG5vdCBwcm92aWRlZCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlc0FycmF5ID0gc291cmNlcztcbiAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBzb3VyY2VzQXJyYXkgPSBBcnJheS5pc0FycmF5KHNvdXJjZXNbMF0pID8gc291cmNlc1swXSA6IHNvdXJjZXM7XG4gICAgICB9XG5cbiAgICAgIHZhciB0b2tlbnMgPSBzb3VyY2VzQXJyYXkubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5kaXNwYXRjaFRva2VuIHx8IHNvdXJjZTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmRpc3BhdGNoZXIud2FpdEZvcih0b2tlbnMpO1xuICAgIH1cblxuICAgIHJldHVybiB3YWl0Rm9yO1xuICB9KCksXG4gIGV4cG9ydEFzeW5jOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZXhwb3J0QXN5bmMoYXN5bmNNZXRob2RzKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyQXN5bmMoYXN5bmNNZXRob2RzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXhwb3J0QXN5bmM7XG4gIH0oKSxcbiAgcmVnaXN0ZXJBc3luYzogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQXN5bmMoYXN5bmNEZWYpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBsb2FkQ291bnRlciA9IDA7XG5cbiAgICAgIHZhciBhc3luY01ldGhvZHMgPSBmbi5pc0Z1bmN0aW9uKGFzeW5jRGVmKSA/IGFzeW5jRGVmKHRoaXMuYWx0KSA6IGFzeW5jRGVmO1xuXG4gICAgICB2YXIgdG9FeHBvcnQgPSBPYmplY3Qua2V5cyhhc3luY01ldGhvZHMpLnJlZHVjZShmdW5jdGlvbiAocHVibGljTWV0aG9kcywgbWV0aG9kTmFtZSkge1xuICAgICAgICB2YXIgZGVzYyA9IGFzeW5jTWV0aG9kc1ttZXRob2ROYW1lXTtcbiAgICAgICAgdmFyIHNwZWMgPSBmbi5pc0Z1bmN0aW9uKGRlc2MpID8gZGVzYyhfdGhpcykgOiBkZXNjO1xuXG4gICAgICAgIHZhciB2YWxpZEhhbmRsZXJzID0gWydzdWNjZXNzJywgJ2Vycm9yJywgJ2xvYWRpbmcnXTtcbiAgICAgICAgdmFsaWRIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgICAgaWYgKHNwZWNbaGFuZGxlcl0gJiYgIXNwZWNbaGFuZGxlcl0uaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihTdHJpbmcoaGFuZGxlcikgKyAnIGhhbmRsZXIgbXVzdCBiZSBhbiBhY3Rpb24gZnVuY3Rpb24nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHB1YmxpY01ldGhvZHNbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgc3RhdGUgPSBfdGhpcy5nZXRJbnN0YW5jZSgpLmdldFN0YXRlKCk7XG4gICAgICAgICAgdmFyIHZhbHVlID0gc3BlYy5sb2NhbCAmJiBzcGVjLmxvY2FsLmFwcGx5KHNwZWMsIFtzdGF0ZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICB2YXIgc2hvdWxkRmV0Y2ggPSBzcGVjLnNob3VsZEZldGNoID8gc3BlYy5zaG91bGRGZXRjaC5hcHBseShzcGVjLCBbc3RhdGVdLmNvbmNhdChhcmdzKSlcbiAgICAgICAgICAvKmVzbGludC1kaXNhYmxlKi9cbiAgICAgICAgICA6IHZhbHVlID09IG51bGw7XG4gICAgICAgICAgLyplc2xpbnQtZW5hYmxlKi9cbiAgICAgICAgICB2YXIgaW50ZXJjZXB0ID0gc3BlYy5pbnRlcmNlcHRSZXNwb25zZSB8fCBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBtYWtlQWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1ha2VBY3Rpb25IYW5kbGVyKGFjdGlvbiwgaXNFcnJvcikge1xuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZpcmUoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRDb3VudGVyIC09IDE7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbihpbnRlcmNlcHQoeCwgYWN0aW9uLCBhcmdzKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0Vycm9yKSB0aHJvdyB4O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcmU7XG4gICAgICAgICAgICAgICAgfSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hbHQudHJhcEFzeW5jID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcmUoKTtcbiAgICAgICAgICAgICAgICB9IDogZmlyZSgpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbWFrZUFjdGlvbkhhbmRsZXI7XG4gICAgICAgICAgfSgpO1xuXG4gICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBpdCBpbiBjYWNoZSB0aGVuIGZldGNoIGl0XG4gICAgICAgICAgaWYgKHNob3VsZEZldGNoKSB7XG4gICAgICAgICAgICBsb2FkQ291bnRlciArPSAxO1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgICAgIGlmIChzcGVjLmxvYWRpbmcpIHNwZWMubG9hZGluZyhpbnRlcmNlcHQobnVsbCwgc3BlYy5sb2FkaW5nLCBhcmdzKSk7XG4gICAgICAgICAgICByZXR1cm4gc3BlYy5yZW1vdGUuYXBwbHkoc3BlYywgW3N0YXRlXS5jb25jYXQoYXJncykpLnRoZW4obWFrZUFjdGlvbkhhbmRsZXIoc3BlYy5zdWNjZXNzKSwgbWFrZUFjdGlvbkhhbmRsZXIoc3BlYy5lcnJvciwgMSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG90aGVyd2lzZSBlbWl0IHRoZSBjaGFuZ2Ugbm93XG4gICAgICAgICAgX3RoaXMuZW1pdENoYW5nZSgpO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gcHVibGljTWV0aG9kcztcbiAgICAgIH0sIHt9KTtcblxuICAgICAgdGhpcy5leHBvcnRQdWJsaWNNZXRob2RzKHRvRXhwb3J0KTtcbiAgICAgIHRoaXMuZXhwb3J0UHVibGljTWV0aG9kcyh7XG4gICAgICAgIGlzTG9hZGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZ1bmN0aW9uIGlzTG9hZGluZygpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2FkQ291bnRlciA+IDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGlzTG9hZGluZztcbiAgICAgICAgfSgpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVnaXN0ZXJBc3luYztcbiAgfSgpLFxuICBleHBvcnRQdWJsaWNNZXRob2RzOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZXhwb3J0UHVibGljTWV0aG9kcyhtZXRob2RzKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgZm4uZWFjaE9iamVjdChmdW5jdGlvbiAobWV0aG9kTmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFmbi5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4cG9ydFB1YmxpY01ldGhvZHMgZXhwZWN0cyBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIucHVibGljTWV0aG9kc1ttZXRob2ROYW1lXSA9IHZhbHVlO1xuICAgICAgfSwgW21ldGhvZHNdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXhwb3J0UHVibGljTWV0aG9kcztcbiAgfSgpLFxuICBlbWl0Q2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZW1pdENoYW5nZSgpIHtcbiAgICAgIHRoaXMuZ2V0SW5zdGFuY2UoKS5lbWl0Q2hhbmdlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVtaXRDaGFuZ2U7XG4gIH0oKSxcbiAgb246IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBvbihsaWZlY3ljbGVFdmVudCwgaGFuZGxlcikge1xuICAgICAgaWYgKGxpZmVjeWNsZUV2ZW50ID09PSAnZXJyb3InKSB0aGlzLmhhbmRsZXNPd25FcnJvcnMgPSB0cnVlO1xuICAgICAgdmFyIGJ1cyA9IHRoaXMubGlmZWN5Y2xlRXZlbnRzW2xpZmVjeWNsZUV2ZW50XSB8fCAoMCwgX3RyYW5zbWl0dGVyMlsnZGVmYXVsdCddKSgpO1xuICAgICAgdGhpcy5saWZlY3ljbGVFdmVudHNbbGlmZWN5Y2xlRXZlbnRdID0gYnVzO1xuICAgICAgcmV0dXJuIGJ1cy5zdWJzY3JpYmUoaGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb247XG4gIH0oKSxcbiAgYmluZEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGJpbmRBY3Rpb24oc3ltYm9sLCBoYW5kbGVyKSB7XG4gICAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoJ0ludmFsaWQgYWN0aW9uIHJlZmVyZW5jZSBwYXNzZWQgaW4nKTtcbiAgICAgIH1cbiAgICAgIGlmICghZm4uaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdiaW5kQWN0aW9uIGV4cGVjdHMgYSBmdW5jdGlvbicpO1xuICAgICAgfVxuXG4gICAgICAvLyBZb3UgY2FuIHBhc3MgaW4gdGhlIGNvbnN0YW50IG9yIHRoZSBmdW5jdGlvbiBpdHNlbGZcbiAgICAgIHZhciBrZXkgPSBzeW1ib2wuaWQgPyBzeW1ib2wuaWQgOiBzeW1ib2w7XG4gICAgICB0aGlzLmFjdGlvbkxpc3RlbmVyc1trZXldID0gdGhpcy5hY3Rpb25MaXN0ZW5lcnNba2V5XSB8fCBbXTtcbiAgICAgIHRoaXMuYWN0aW9uTGlzdGVuZXJzW2tleV0ucHVzaChoYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5ib3VuZExpc3RlbmVycy5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJpbmRBY3Rpb247XG4gIH0oKSxcbiAgYmluZEFjdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBiaW5kQWN0aW9ucyhhY3Rpb25zKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgZm4uZWFjaE9iamVjdChmdW5jdGlvbiAoYWN0aW9uLCBzeW1ib2wpIHtcbiAgICAgICAgdmFyIG1hdGNoRmlyc3RDaGFyYWN0ZXIgPSAvLi87XG4gICAgICAgIHZhciBhc3N1bWVkRXZlbnRIYW5kbGVyID0gYWN0aW9uLnJlcGxhY2UobWF0Y2hGaXJzdENoYXJhY3RlciwgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICByZXR1cm4gJ29uJyArIFN0cmluZyh4WzBdLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoX3RoaXMzW2FjdGlvbl0gJiYgX3RoaXMzW2Fzc3VtZWRFdmVudEhhbmRsZXJdKSB7XG4gICAgICAgICAgLy8gSWYgeW91IGhhdmUgYm90aCBhY3Rpb24gYW5kIG9uQWN0aW9uXG4gICAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdZb3UgaGF2ZSBtdWx0aXBsZSBhY3Rpb24gaGFuZGxlcnMgYm91bmQgdG8gYW4gYWN0aW9uOiAnICsgKFN0cmluZyhhY3Rpb24pICsgJyBhbmQgJyArIFN0cmluZyhhc3N1bWVkRXZlbnRIYW5kbGVyKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhhbmRsZXIgPSBfdGhpczNbYWN0aW9uXSB8fCBfdGhpczNbYXNzdW1lZEV2ZW50SGFuZGxlcl07XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgX3RoaXMzLmJpbmRBY3Rpb24oc3ltYm9sLCBoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgfSwgW2FjdGlvbnNdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmluZEFjdGlvbnM7XG4gIH0oKSxcbiAgYmluZExpc3RlbmVyczogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGJpbmRMaXN0ZW5lcnMob2JqKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgZm4uZWFjaE9iamVjdChmdW5jdGlvbiAobWV0aG9kTmFtZSwgc3ltYm9sKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lciA9IF90aGlzNFttZXRob2ROYW1lXTtcblxuICAgICAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFN0cmluZyhtZXRob2ROYW1lKSArICcgZGVmaW5lZCBidXQgZG9lcyBub3QgZXhpc3QgaW4gJyArIFN0cmluZyhfdGhpczQuZGlzcGxheU5hbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN5bWJvbCkpIHtcbiAgICAgICAgICBzeW1ib2wuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICBfdGhpczQuYmluZEFjdGlvbihhY3Rpb24sIGxpc3RlbmVyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpczQuYmluZEFjdGlvbihzeW1ib2wsIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgfSwgW29ial0pO1xuICAgIH1cblxuICAgIHJldHVybiBiaW5kTGlzdGVuZXJzO1xuICB9KClcbn07XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IFN0b3JlTWl4aW47XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmNyZWF0ZVN0b3JlQ29uZmlnID0gY3JlYXRlU3RvcmVDb25maWc7XG5leHBvcnRzLnRyYW5zZm9ybVN0b3JlID0gdHJhbnNmb3JtU3RvcmU7XG5leHBvcnRzLmNyZWF0ZVN0b3JlRnJvbU9iamVjdCA9IGNyZWF0ZVN0b3JlRnJvbU9iamVjdDtcbmV4cG9ydHMuY3JlYXRlU3RvcmVGcm9tQ2xhc3MgPSBjcmVhdGVTdG9yZUZyb21DbGFzcztcblxudmFyIF9BbHRVdGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL0FsdFV0aWxzJyk7XG5cbnZhciB1dGlscyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9BbHRVdGlscyk7XG5cbnZhciBfZnVuY3Rpb25zID0gcmVxdWlyZSgnLi4vZnVuY3Rpb25zJyk7XG5cbnZhciBmbiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9mdW5jdGlvbnMpO1xuXG52YXIgX0FsdFN0b3JlID0gcmVxdWlyZSgnLi9BbHRTdG9yZScpO1xuXG52YXIgX0FsdFN0b3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FsdFN0b3JlKTtcblxudmFyIF9TdG9yZU1peGluID0gcmVxdWlyZSgnLi9TdG9yZU1peGluJyk7XG5cbnZhciBfU3RvcmVNaXhpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TdG9yZU1peGluKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqWydkZWZhdWx0J10gPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmZ1bmN0aW9uIGRvU2V0U3RhdGUoc3RvcmUsIHN0b3JlSW5zdGFuY2UsIHN0YXRlKSB7XG4gIGlmICghc3RhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY29uZmlnID0gc3RvcmVJbnN0YW5jZS5TdG9yZU1vZGVsLmNvbmZpZztcblxuXG4gIHZhciBuZXh0U3RhdGUgPSBmbi5pc0Z1bmN0aW9uKHN0YXRlKSA/IHN0YXRlKHN0b3JlSW5zdGFuY2Uuc3RhdGUpIDogc3RhdGU7XG5cbiAgc3RvcmVJbnN0YW5jZS5zdGF0ZSA9IGNvbmZpZy5zZXRTdGF0ZS5jYWxsKHN0b3JlLCBzdG9yZUluc3RhbmNlLnN0YXRlLCBuZXh0U3RhdGUpO1xuXG4gIGlmICghc3RvcmUuYWx0LmRpc3BhdGNoZXIuaXNEaXNwYXRjaGluZygpKSB7XG4gICAgc3RvcmUuZW1pdENoYW5nZSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb3RvdHlwZShwcm90bywgYWx0LCBrZXksIGV4dHJhcykge1xuICByZXR1cm4gZm4uYXNzaWduKHByb3RvLCBfU3RvcmVNaXhpbjJbJ2RlZmF1bHQnXSwge1xuICAgIGRpc3BsYXlOYW1lOiBrZXksXG4gICAgYWx0OiBhbHQsXG4gICAgZGlzcGF0Y2hlcjogYWx0LmRpc3BhdGNoZXIsXG4gICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICB0aGlzLmdldEluc3RhbmNlKCkucHJldmVudERlZmF1bHQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmVudERlZmF1bHQ7XG4gICAgfSgpLFxuXG4gICAgYm91bmRMaXN0ZW5lcnM6IFtdLFxuICAgIGxpZmVjeWNsZUV2ZW50czoge30sXG4gICAgYWN0aW9uTGlzdGVuZXJzOiB7fSxcbiAgICBwdWJsaWNNZXRob2RzOiB7fSxcbiAgICBoYW5kbGVzT3duRXJyb3JzOiBmYWxzZVxuICB9LCBleHRyYXMpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZUNvbmZpZyhnbG9iYWxDb25maWcsIFN0b3JlTW9kZWwpIHtcbiAgU3RvcmVNb2RlbC5jb25maWcgPSBmbi5hc3NpZ24oe1xuICAgIGdldFN0YXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBnZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzdGF0ZSkpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGUuc2xpY2UoKTtcbiAgICAgICAgfSBlbHNlIGlmIChmbi5pc011dGFibGVPYmplY3Qoc3RhdGUpKSB7XG4gICAgICAgICAgcmV0dXJuIGZuLmFzc2lnbih7fSwgc3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ2V0U3RhdGU7XG4gICAgfSgpLFxuICAgIHNldFN0YXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBzZXRTdGF0ZShjdXJyZW50U3RhdGUsIG5leHRTdGF0ZSkge1xuICAgICAgICBpZiAoZm4uaXNNdXRhYmxlT2JqZWN0KG5leHRTdGF0ZSkpIHtcbiAgICAgICAgICByZXR1cm4gZm4uYXNzaWduKGN1cnJlbnRTdGF0ZSwgbmV4dFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dFN0YXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2V0U3RhdGU7XG4gICAgfSgpXG4gIH0sIGdsb2JhbENvbmZpZywgU3RvcmVNb2RlbC5jb25maWcpO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1TdG9yZSh0cmFuc2Zvcm1zLCBTdG9yZU1vZGVsKSB7XG4gIHJldHVybiB0cmFuc2Zvcm1zLnJlZHVjZShmdW5jdGlvbiAoU3RvcmUsIHRyYW5zZm9ybSkge1xuICAgIHJldHVybiB0cmFuc2Zvcm0oU3RvcmUpO1xuICB9LCBTdG9yZU1vZGVsKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3RvcmVGcm9tT2JqZWN0KGFsdCwgU3RvcmVNb2RlbCwga2V5KSB7XG4gIHZhciBzdG9yZUluc3RhbmNlID0gdm9pZCAwO1xuXG4gIHZhciBTdG9yZVByb3RvID0gY3JlYXRlUHJvdG90eXBlKHt9LCBhbHQsIGtleSwgZm4uYXNzaWduKHtcbiAgICBnZXRJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBzdG9yZUluc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZ2V0SW5zdGFuY2U7XG4gICAgfSgpLFxuICAgIHNldFN0YXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBzZXRTdGF0ZShuZXh0U3RhdGUpIHtcbiAgICAgICAgZG9TZXRTdGF0ZSh0aGlzLCBzdG9yZUluc3RhbmNlLCBuZXh0U3RhdGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2V0U3RhdGU7XG4gICAgfSgpXG4gIH0sIFN0b3JlTW9kZWwpKTtcblxuICAvLyBiaW5kIHRoZSBzdG9yZSBsaXN0ZW5lcnNcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKFN0b3JlUHJvdG8uYmluZExpc3RlbmVycykge1xuICAgIF9TdG9yZU1peGluMlsnZGVmYXVsdCddLmJpbmRMaXN0ZW5lcnMuY2FsbChTdG9yZVByb3RvLCBTdG9yZVByb3RvLmJpbmRMaXN0ZW5lcnMpO1xuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChTdG9yZVByb3RvLm9ic2VydmUpIHtcbiAgICBfU3RvcmVNaXhpbjJbJ2RlZmF1bHQnXS5iaW5kTGlzdGVuZXJzLmNhbGwoU3RvcmVQcm90bywgU3RvcmVQcm90by5vYnNlcnZlKGFsdCkpO1xuICB9XG5cbiAgLy8gYmluZCB0aGUgbGlmZWN5Y2xlIGV2ZW50c1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoU3RvcmVQcm90by5saWZlY3ljbGUpIHtcbiAgICBmbi5lYWNoT2JqZWN0KGZ1bmN0aW9uIChldmVudE5hbWUsIGV2ZW50KSB7XG4gICAgICBfU3RvcmVNaXhpbjJbJ2RlZmF1bHQnXS5vbi5jYWxsKFN0b3JlUHJvdG8sIGV2ZW50TmFtZSwgZXZlbnQpO1xuICAgIH0sIFtTdG9yZVByb3RvLmxpZmVjeWNsZV0pO1xuICB9XG5cbiAgLy8gY3JlYXRlIHRoZSBpbnN0YW5jZSBhbmQgZm4uYXNzaWduIHRoZSBwdWJsaWMgbWV0aG9kcyB0byB0aGUgaW5zdGFuY2VcbiAgc3RvcmVJbnN0YW5jZSA9IGZuLmFzc2lnbihuZXcgX0FsdFN0b3JlMlsnZGVmYXVsdCddKGFsdCwgU3RvcmVQcm90bywgU3RvcmVQcm90by5zdGF0ZSAhPT0gdW5kZWZpbmVkID8gU3RvcmVQcm90by5zdGF0ZSA6IHt9LCBTdG9yZU1vZGVsKSwgU3RvcmVQcm90by5wdWJsaWNNZXRob2RzLCB7XG4gICAgZGlzcGxheU5hbWU6IGtleSxcbiAgICBjb25maWc6IFN0b3JlTW9kZWwuY29uZmlnXG4gIH0pO1xuXG4gIHJldHVybiBzdG9yZUluc3RhbmNlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZUZyb21DbGFzcyhhbHQsIFN0b3JlTW9kZWwsIGtleSkge1xuICB2YXIgc3RvcmVJbnN0YW5jZSA9IHZvaWQgMDtcbiAgdmFyIGNvbmZpZyA9IFN0b3JlTW9kZWwuY29uZmlnO1xuXG4gIC8vIENyZWF0aW5nIGEgY2xhc3MgaGVyZSBzbyB3ZSBkb24ndCBvdmVybG9hZCB0aGUgcHJvdmlkZWQgc3RvcmUnc1xuICAvLyBwcm90b3R5cGUgd2l0aCB0aGUgbWl4aW4gYmVoYXZpb3VyIGFuZCBJJ20gZXh0ZW5kaW5nIGZyb20gU3RvcmVNb2RlbFxuICAvLyBzbyB3ZSBjYW4gaW5oZXJpdCBhbnkgZXh0ZW5zaW9ucyBmcm9tIHRoZSBwcm92aWRlZCBzdG9yZS5cblxuICB2YXIgU3RvcmUgPSBmdW5jdGlvbiAoX1N0b3JlTW9kZWwpIHtcbiAgICBfaW5oZXJpdHMoU3RvcmUsIF9TdG9yZU1vZGVsKTtcblxuICAgIGZ1bmN0aW9uIFN0b3JlKCkge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JlKTtcblxuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1N0b3JlTW9kZWwuY2FsbC5hcHBseShfU3RvcmVNb2RlbCwgW3RoaXNdLmNvbmNhdChhcmdzKSkpO1xuICAgIH1cblxuICAgIHJldHVybiBTdG9yZTtcbiAgfShTdG9yZU1vZGVsKTtcblxuICBjcmVhdGVQcm90b3R5cGUoU3RvcmUucHJvdG90eXBlLCBhbHQsIGtleSwge1xuICAgIHR5cGU6ICdBbHRTdG9yZScsXG4gICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gc3RvcmVJbnN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldEluc3RhbmNlO1xuICAgIH0oKSxcbiAgICBzZXRTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gc2V0U3RhdGUobmV4dFN0YXRlKSB7XG4gICAgICAgIGRvU2V0U3RhdGUodGhpcywgc3RvcmVJbnN0YW5jZSwgbmV4dFN0YXRlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNldFN0YXRlO1xuICAgIH0oKVxuICB9KTtcblxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJnc0ZvckNsYXNzID0gQXJyYXkoX2xlbiA+IDMgPyBfbGVuIC0gMyA6IDApLCBfa2V5ID0gMzsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NGb3JDbGFzc1tfa2V5IC0gM10gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICB2YXIgc3RvcmUgPSBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KFN0b3JlLCBbbnVsbF0uY29uY2F0KGFyZ3NGb3JDbGFzcykpKSgpO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmIChjb25maWcuYmluZExpc3RlbmVycykgc3RvcmUuYmluZExpc3RlbmVycyhjb25maWcuYmluZExpc3RlbmVycyk7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmIChjb25maWcuZGF0YXNvdXJjZSkgc3RvcmUucmVnaXN0ZXJBc3luYyhjb25maWcuZGF0YXNvdXJjZSk7XG5cbiAgc3RvcmVJbnN0YW5jZSA9IGZuLmFzc2lnbihuZXcgX0FsdFN0b3JlMlsnZGVmYXVsdCddKGFsdCwgc3RvcmUsIHN0b3JlLnN0YXRlICE9PSB1bmRlZmluZWQgPyBzdG9yZS5zdGF0ZSA6IHN0b3JlLCBTdG9yZU1vZGVsKSwgdXRpbHMuZ2V0SW50ZXJuYWxNZXRob2RzKFN0b3JlTW9kZWwpLCBjb25maWcucHVibGljTWV0aG9kcywgeyBkaXNwbGF5TmFtZToga2V5IH0pO1xuXG4gIHJldHVybiBzdG9yZUluc3RhbmNlO1xufSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5nZXRJbnRlcm5hbE1ldGhvZHMgPSBnZXRJbnRlcm5hbE1ldGhvZHM7XG5leHBvcnRzLmdldFByb3RvdHlwZUNoYWluID0gZ2V0UHJvdG90eXBlQ2hhaW47XG5leHBvcnRzLndhcm4gPSB3YXJuO1xuZXhwb3J0cy51aWQgPSB1aWQ7XG5leHBvcnRzLmZvcm1hdEFzQ29uc3RhbnQgPSBmb3JtYXRBc0NvbnN0YW50O1xuZXhwb3J0cy5kaXNwYXRjaElkZW50aXR5ID0gZGlzcGF0Y2hJZGVudGl0eTtcbmV4cG9ydHMuZnNhID0gZnNhO1xuZXhwb3J0cy5kaXNwYXRjaCA9IGRpc3BhdGNoO1xuXG52YXIgX2Z1bmN0aW9ucyA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9ucycpO1xuXG52YXIgZm4gPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfZnVuY3Rpb25zKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09ialsnZGVmYXVsdCddID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuLyplc2xpbnQtZGlzYWJsZSovXG52YXIgYnVpbHRJbnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhOb29wQ2xhc3MpO1xudmFyIGJ1aWx0SW5Qcm90byA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE5vb3BDbGFzcy5wcm90b3R5cGUpO1xuLyplc2xpbnQtZW5hYmxlKi9cblxuZnVuY3Rpb24gZ2V0SW50ZXJuYWxNZXRob2RzKE9iaiwgaXNQcm90bykge1xuICB2YXIgZXhjbHVkZWQgPSBpc1Byb3RvID8gYnVpbHRJblByb3RvIDogYnVpbHRJbnM7XG4gIHZhciBvYmogPSBpc1Byb3RvID8gT2JqLnByb3RvdHlwZSA6IE9iajtcbiAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikucmVkdWNlKGZ1bmN0aW9uICh2YWx1ZSwgbSkge1xuICAgIGlmIChleGNsdWRlZC5pbmRleE9mKG0pICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHZhbHVlW21dID0gb2JqW21dO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSwge30pO1xufVxuXG5mdW5jdGlvbiBnZXRQcm90b3R5cGVDaGFpbihPYmopIHtcbiAgdmFyIG1ldGhvZHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuICByZXR1cm4gT2JqID09PSBGdW5jdGlvbi5wcm90b3R5cGUgPyBtZXRob2RzIDogZ2V0UHJvdG90eXBlQ2hhaW4oT2JqZWN0LmdldFByb3RvdHlwZU9mKE9iaiksIGZuLmFzc2lnbihnZXRJbnRlcm5hbE1ldGhvZHMoT2JqLCB0cnVlKSwgbWV0aG9kcykpO1xufVxuXG5mdW5jdGlvbiB3YXJuKG1zZykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAvKmVzbGludC1kaXNhYmxlKi9cbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUud2FybihuZXcgUmVmZXJlbmNlRXJyb3IobXNnKSk7XG4gIH1cbiAgLyplc2xpbnQtZW5hYmxlKi9cbn1cblxuZnVuY3Rpb24gdWlkKGNvbnRhaW5lciwgbmFtZSkge1xuICB2YXIgY291bnQgPSAwO1xuICB2YXIga2V5ID0gbmFtZTtcbiAgd2hpbGUgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbnRhaW5lciwga2V5KSkge1xuICAgIGtleSA9IG5hbWUgKyBTdHJpbmcoKytjb3VudCk7XG4gIH1cbiAgcmV0dXJuIGtleTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0QXNDb25zdGFudChuYW1lKSB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoL1thLXpdKFtBLVpdKS9nLCBmdW5jdGlvbiAoaSkge1xuICAgIHJldHVybiBTdHJpbmcoaVswXSkgKyAnXycgKyBTdHJpbmcoaVsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgfSkudG9VcHBlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hJZGVudGl0eSh4KSB7XG4gIGlmICh4ID09PSB1bmRlZmluZWQpIHJldHVybiBudWxsO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGEubGVuZ3RoID8gW3hdLmNvbmNhdChhKSA6IHg7XG59XG5cbmZ1bmN0aW9uIGZzYShpZCwgdHlwZSwgcGF5bG9hZCwgZGV0YWlscykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IHR5cGUsXG4gICAgcGF5bG9hZDogcGF5bG9hZCxcbiAgICBtZXRhOiBfZXh0ZW5kcyh7XG4gICAgICBkaXNwYXRjaElkOiBpZFxuICAgIH0sIGRldGFpbHMpLFxuXG4gICAgaWQ6IGlkLFxuICAgIGFjdGlvbjogdHlwZSxcbiAgICBkYXRhOiBwYXlsb2FkLFxuICAgIGRldGFpbHM6IGRldGFpbHNcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2goaWQsIGFjdGlvbk9iaiwgcGF5bG9hZCwgYWx0KSB7XG4gIHZhciBkYXRhID0gYWN0aW9uT2JqLmRpc3BhdGNoKHBheWxvYWQpO1xuICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcblxuICB2YXIgdHlwZSA9IGFjdGlvbk9iai5pZDtcbiAgdmFyIG5hbWVzcGFjZSA9IHR5cGU7XG4gIHZhciBuYW1lID0gdHlwZTtcbiAgdmFyIGRldGFpbHMgPSB7IGlkOiB0eXBlLCBuYW1lc3BhY2U6IG5hbWVzcGFjZSwgbmFtZTogbmFtZSB9O1xuXG4gIHZhciBkaXNwYXRjaExhdGVyID0gZnVuY3Rpb24gZGlzcGF0Y2hMYXRlcih4KSB7XG4gICAgcmV0dXJuIGFsdC5kaXNwYXRjaCh0eXBlLCB4LCBkZXRhaWxzKTtcbiAgfTtcblxuICBpZiAoZm4uaXNGdW5jdGlvbihkYXRhKSkgcmV0dXJuIGRhdGEoZGlzcGF0Y2hMYXRlciwgYWx0KTtcblxuICAvLyBYWFggc3RhbmRhcmRpemUgdGhpc1xuICByZXR1cm4gYWx0LmRpc3BhdGNoZXIuZGlzcGF0Y2goZnNhKGlkLCB0eXBlLCBkYXRhLCBkZXRhaWxzKSk7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBOb29wQ2xhc3MoKSB7fSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuc2V0QXBwU3RhdGUgPSBzZXRBcHBTdGF0ZTtcbmV4cG9ydHMuc25hcHNob3QgPSBzbmFwc2hvdDtcbmV4cG9ydHMuc2F2ZUluaXRpYWxTbmFwc2hvdCA9IHNhdmVJbml0aWFsU25hcHNob3Q7XG5leHBvcnRzLmZpbHRlclNuYXBzaG90cyA9IGZpbHRlclNuYXBzaG90cztcblxudmFyIF9mdW5jdGlvbnMgPSByZXF1aXJlKCcuLi9mdW5jdGlvbnMnKTtcblxudmFyIGZuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2Z1bmN0aW9ucyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmpbJ2RlZmF1bHQnXSA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIHNldEFwcFN0YXRlKGluc3RhbmNlLCBkYXRhLCBvblN0b3JlKSB7XG4gIHZhciBvYmogPSBpbnN0YW5jZS5kZXNlcmlhbGl6ZShkYXRhKTtcbiAgZm4uZWFjaE9iamVjdChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHZhciBzdG9yZSA9IGluc3RhbmNlLnN0b3Jlc1trZXldO1xuICAgIGlmIChzdG9yZSkge1xuICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHN0b3JlLlN0b3JlTW9kZWwuY29uZmlnO1xuXG4gICAgICAgIHZhciBzdGF0ZSA9IHN0b3JlLnN0YXRlO1xuICAgICAgICBpZiAoY29uZmlnLm9uRGVzZXJpYWxpemUpIG9ialtrZXldID0gY29uZmlnLm9uRGVzZXJpYWxpemUodmFsdWUpIHx8IHZhbHVlO1xuICAgICAgICBpZiAoZm4uaXNNdXRhYmxlT2JqZWN0KHN0YXRlKSkge1xuICAgICAgICAgIGZuLmVhY2hPYmplY3QoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICAgIHJldHVybiBkZWxldGUgc3RhdGVba107XG4gICAgICAgICAgfSwgW3N0YXRlXSk7XG4gICAgICAgICAgZm4uYXNzaWduKHN0YXRlLCBvYmpba2V5XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RvcmUuc3RhdGUgPSBvYmpba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBvblN0b3JlKHN0b3JlLCBzdG9yZS5zdGF0ZSk7XG4gICAgICB9KSgpO1xuICAgIH1cbiAgfSwgW29ial0pO1xufVxuXG5mdW5jdGlvbiBzbmFwc2hvdChpbnN0YW5jZSkge1xuICB2YXIgc3RvcmVOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IFtdIDogYXJndW1lbnRzWzFdO1xuXG4gIHZhciBzdG9yZXMgPSBzdG9yZU5hbWVzLmxlbmd0aCA/IHN0b3JlTmFtZXMgOiBPYmplY3Qua2V5cyhpbnN0YW5jZS5zdG9yZXMpO1xuICByZXR1cm4gc3RvcmVzLnJlZHVjZShmdW5jdGlvbiAob2JqLCBzdG9yZUhhbmRsZSkge1xuICAgIHZhciBzdG9yZU5hbWUgPSBzdG9yZUhhbmRsZS5kaXNwbGF5TmFtZSB8fCBzdG9yZUhhbmRsZTtcbiAgICB2YXIgc3RvcmUgPSBpbnN0YW5jZS5zdG9yZXNbc3RvcmVOYW1lXTtcbiAgICB2YXIgY29uZmlnID0gc3RvcmUuU3RvcmVNb2RlbC5jb25maWc7XG5cbiAgICBzdG9yZS5saWZlY3ljbGUoJ3NuYXBzaG90Jyk7XG4gICAgdmFyIGN1c3RvbVNuYXBzaG90ID0gY29uZmlnLm9uU2VyaWFsaXplICYmIGNvbmZpZy5vblNlcmlhbGl6ZShzdG9yZS5zdGF0ZSk7XG4gICAgb2JqW3N0b3JlTmFtZV0gPSBjdXN0b21TbmFwc2hvdCA/IGN1c3RvbVNuYXBzaG90IDogc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICByZXR1cm4gb2JqO1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIHNhdmVJbml0aWFsU25hcHNob3QoaW5zdGFuY2UsIGtleSkge1xuICB2YXIgc3RhdGUgPSBpbnN0YW5jZS5kZXNlcmlhbGl6ZShpbnN0YW5jZS5zZXJpYWxpemUoaW5zdGFuY2Uuc3RvcmVzW2tleV0uc3RhdGUpKTtcbiAgaW5zdGFuY2UuX2luaXRTbmFwc2hvdFtrZXldID0gc3RhdGU7XG4gIGluc3RhbmNlLl9sYXN0U25hcHNob3Rba2V5XSA9IHN0YXRlO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJTbmFwc2hvdHMoaW5zdGFuY2UsIHN0YXRlLCBzdG9yZXMpIHtcbiAgcmV0dXJuIHN0b3Jlcy5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgc3RvcmUpIHtcbiAgICB2YXIgc3RvcmVOYW1lID0gc3RvcmUuZGlzcGxheU5hbWUgfHwgc3RvcmU7XG4gICAgaWYgKCFzdGF0ZVtzdG9yZU5hbWVdKSB7XG4gICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoU3RyaW5nKHN0b3JlTmFtZSkgKyAnIGlzIG5vdCBhIHZhbGlkIHN0b3JlJyk7XG4gICAgfVxuICAgIG9ialtzdG9yZU5hbWVdID0gc3RhdGVbc3RvcmVOYW1lXTtcbiAgICByZXR1cm4gb2JqO1xuICB9LCB7fSk7XG59IiwidmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBvYmplY3RLZXlzID0gcmVxdWlyZSgnLi9saWIva2V5cy5qcycpO1xudmFyIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi9saWIvaXNfYXJndW1lbnRzLmpzJyk7XG5cbnZhciBkZWVwRXF1YWwgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhY3R1YWwsIGV4cGVjdGVkLCBvcHRzKSB7XG4gIGlmICghb3B0cykgb3B0cyA9IHt9O1xuICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS5cbiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9IGVsc2UgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIERhdGUgJiYgZXhwZWN0ZWQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblxuICAvLyA3LjMuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsXG4gIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG4gIH0gZWxzZSBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQgfHwgdHlwZW9mIGFjdHVhbCAhPSAnb2JqZWN0JyAmJiB0eXBlb2YgZXhwZWN0ZWQgIT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gb3B0cy5zdHJpY3QgPyBhY3R1YWwgPT09IGV4cGVjdGVkIDogYWN0dWFsID09IGV4cGVjdGVkO1xuXG4gIC8vIDcuNC4gRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpc1xuICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcbiAgLy8gd2l0aCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwpLCB0aGUgc2FtZSBzZXQgb2Yga2V5c1xuICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5XG4gIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG4gIC8vIGFjY291bnRzIGZvciBib3RoIG5hbWVkIGFuZCBpbmRleGVkIHByb3BlcnRpZXMgb24gQXJyYXlzLlxuICB9IGVsc2Uge1xuICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkLCBvcHRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZE9yTnVsbCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIgKHgpIHtcbiAgaWYgKCF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgeC5sZW5ndGggIT09ICdudW1iZXInKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgeC5jb3B5ICE9PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiB4LnNsaWNlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh4Lmxlbmd0aCA+IDAgJiYgdHlwZW9mIHhbMF0gIT09ICdudW1iZXInKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBvYmpFcXVpdihhLCBiLCBvcHRzKSB7XG4gIHZhciBpLCBrZXk7XG4gIGlmIChpc1VuZGVmaW5lZE9yTnVsbChhKSB8fCBpc1VuZGVmaW5lZE9yTnVsbChiKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vIGFuIGlkZW50aWNhbCAncHJvdG90eXBlJyBwcm9wZXJ0eS5cbiAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkgcmV0dXJuIGZhbHNlO1xuICAvL35+fkkndmUgbWFuYWdlZCB0byBicmVhayBPYmplY3Qua2V5cyB0aHJvdWdoIHNjcmV3eSBhcmd1bWVudHMgcGFzc2luZy5cbiAgLy8gICBDb252ZXJ0aW5nIHRvIGFycmF5IHNvbHZlcyB0aGUgcHJvYmxlbS5cbiAgaWYgKGlzQXJndW1lbnRzKGEpKSB7XG4gICAgaWYgKCFpc0FyZ3VtZW50cyhiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG4gICAgYiA9IHBTbGljZS5jYWxsKGIpO1xuICAgIHJldHVybiBkZWVwRXF1YWwoYSwgYiwgb3B0cyk7XG4gIH1cbiAgaWYgKGlzQnVmZmVyKGEpKSB7XG4gICAgaWYgKCFpc0J1ZmZlcihiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhW2ldICE9PSBiW2ldKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIGthID0gb2JqZWN0S2V5cyhhKSxcbiAgICAgICAga2IgPSBvYmplY3RLZXlzKGIpO1xuICB9IGNhdGNoIChlKSB7Ly9oYXBwZW5zIHdoZW4gb25lIGlzIGEgc3RyaW5nIGxpdGVyYWwgYW5kIHRoZSBvdGhlciBpc24ndFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG4gIC8vIGhhc093blByb3BlcnR5KVxuICBpZiAoa2EubGVuZ3RoICE9IGtiLmxlbmd0aClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksXG4gIGthLnNvcnQoKTtcbiAga2Iuc29ydCgpO1xuICAvL35+fmNoZWFwIGtleSB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKGthW2ldICE9IGtiW2ldKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmRcbiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG4gIGZvciAoaSA9IGthLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAga2V5ID0ga2FbaV07XG4gICAgaWYgKCFkZWVwRXF1YWwoYVtrZXldLCBiW2tleV0sIG9wdHMpKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHR5cGVvZiBhID09PSB0eXBlb2YgYjtcbn1cbiIsInZhciBzdXBwb3J0c0FyZ3VtZW50c0NsYXNzID0gKGZ1bmN0aW9uKCl7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnRzKVxufSkoKSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gc3VwcG9ydHNBcmd1bWVudHNDbGFzcyA/IHN1cHBvcnRlZCA6IHVuc3VwcG9ydGVkO1xuXG5leHBvcnRzLnN1cHBvcnRlZCA9IHN1cHBvcnRlZDtcbmZ1bmN0aW9uIHN1cHBvcnRlZChvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xufTtcblxuZXhwb3J0cy51bnN1cHBvcnRlZCA9IHVuc3VwcG9ydGVkO1xuZnVuY3Rpb24gdW5zdXBwb3J0ZWQob2JqZWN0KXtcbiAgcmV0dXJuIG9iamVjdCAmJlxuICAgIHR5cGVvZiBvYmplY3QgPT0gJ29iamVjdCcgJiZcbiAgICB0eXBlb2Ygb2JqZWN0Lmxlbmd0aCA9PSAnbnVtYmVyJyAmJlxuICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdjYWxsZWUnKSAmJlxuICAgICFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob2JqZWN0LCAnY2FsbGVlJykgfHxcbiAgICBmYWxzZTtcbn07XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbidcbiAgPyBPYmplY3Qua2V5cyA6IHNoaW07XG5cbmV4cG9ydHMuc2hpbSA9IHNoaW07XG5mdW5jdGlvbiBzaGltIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gIHJldHVybiBrZXlzO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbm1vZHVsZS5leHBvcnRzLkRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2xpYi9EaXNwYXRjaGVyJyk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERpc3BhdGNoZXJcbiAqIFxuICogQHByZXZlbnRNdW5nZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxudmFyIF9wcmVmaXggPSAnSURfJztcblxuLyoqXG4gKiBEaXNwYXRjaGVyIGlzIHVzZWQgdG8gYnJvYWRjYXN0IHBheWxvYWRzIHRvIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLiBUaGlzIGlzXG4gKiBkaWZmZXJlbnQgZnJvbSBnZW5lcmljIHB1Yi1zdWIgc3lzdGVtcyBpbiB0d28gd2F5czpcbiAqXG4gKiAgIDEpIENhbGxiYWNrcyBhcmUgbm90IHN1YnNjcmliZWQgdG8gcGFydGljdWxhciBldmVudHMuIEV2ZXJ5IHBheWxvYWQgaXNcbiAqICAgICAgZGlzcGF0Y2hlZCB0byBldmVyeSByZWdpc3RlcmVkIGNhbGxiYWNrLlxuICogICAyKSBDYWxsYmFja3MgY2FuIGJlIGRlZmVycmVkIGluIHdob2xlIG9yIHBhcnQgdW50aWwgb3RoZXIgY2FsbGJhY2tzIGhhdmVcbiAqICAgICAgYmVlbiBleGVjdXRlZC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgY29uc2lkZXIgdGhpcyBoeXBvdGhldGljYWwgZmxpZ2h0IGRlc3RpbmF0aW9uIGZvcm0sIHdoaWNoXG4gKiBzZWxlY3RzIGEgZGVmYXVsdCBjaXR5IHdoZW4gYSBjb3VudHJ5IGlzIHNlbGVjdGVkOlxuICpcbiAqICAgdmFyIGZsaWdodERpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcigpO1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY291bnRyeSBpcyBzZWxlY3RlZFxuICogICB2YXIgQ291bnRyeVN0b3JlID0ge2NvdW50cnk6IG51bGx9O1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggY2l0eSBpcyBzZWxlY3RlZFxuICogICB2YXIgQ2l0eVN0b3JlID0ge2NpdHk6IG51bGx9O1xuICpcbiAqICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGJhc2UgZmxpZ2h0IHByaWNlIG9mIHRoZSBzZWxlY3RlZCBjaXR5XG4gKiAgIHZhciBGbGlnaHRQcmljZVN0b3JlID0ge3ByaWNlOiBudWxsfVxuICpcbiAqIFdoZW4gYSB1c2VyIGNoYW5nZXMgdGhlIHNlbGVjdGVkIGNpdHksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gKiAgICAgYWN0aW9uVHlwZTogJ2NpdHktdXBkYXRlJyxcbiAqICAgICBzZWxlY3RlZENpdHk6ICdwYXJpcydcbiAqICAgfSk7XG4gKlxuICogVGhpcyBwYXlsb2FkIGlzIGRpZ2VzdGVkIGJ5IGBDaXR5U3RvcmVgOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NpdHktdXBkYXRlJykge1xuICogICAgICAgQ2l0eVN0b3JlLmNpdHkgPSBwYXlsb2FkLnNlbGVjdGVkQ2l0eTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIGNvdW50cnksIHdlIGRpc3BhdGNoIHRoZSBwYXlsb2FkOlxuICpcbiAqICAgZmxpZ2h0RGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gKiAgICAgYWN0aW9uVHlwZTogJ2NvdW50cnktdXBkYXRlJyxcbiAqICAgICBzZWxlY3RlZENvdW50cnk6ICdhdXN0cmFsaWEnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBib3RoIHN0b3JlczpcbiAqXG4gKiAgIENvdW50cnlTdG9yZS5kaXNwYXRjaFRva2VuID0gZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NvdW50cnktdXBkYXRlJykge1xuICogICAgICAgQ291bnRyeVN0b3JlLmNvdW50cnkgPSBwYXlsb2FkLnNlbGVjdGVkQ291bnRyeTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFdoZW4gdGhlIGNhbGxiYWNrIHRvIHVwZGF0ZSBgQ291bnRyeVN0b3JlYCBpcyByZWdpc3RlcmVkLCB3ZSBzYXZlIGEgcmVmZXJlbmNlXG4gKiB0byB0aGUgcmV0dXJuZWQgdG9rZW4uIFVzaW5nIHRoaXMgdG9rZW4gd2l0aCBgd2FpdEZvcigpYCwgd2UgY2FuIGd1YXJhbnRlZVxuICogdGhhdCBgQ291bnRyeVN0b3JlYCBpcyB1cGRhdGVkIGJlZm9yZSB0aGUgY2FsbGJhY2sgdGhhdCB1cGRhdGVzIGBDaXR5U3RvcmVgXG4gKiBuZWVkcyB0byBxdWVyeSBpdHMgZGF0YS5cbiAqXG4gKiAgIENpdHlTdG9yZS5kaXNwYXRjaFRva2VuID0gZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgaWYgKHBheWxvYWQuYWN0aW9uVHlwZSA9PT0gJ2NvdW50cnktdXBkYXRlJykge1xuICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBtYXkgbm90IGJlIHVwZGF0ZWQuXG4gKiAgICAgICBmbGlnaHREaXNwYXRjaGVyLndhaXRGb3IoW0NvdW50cnlTdG9yZS5kaXNwYXRjaFRva2VuXSk7XG4gKiAgICAgICAvLyBgQ291bnRyeVN0b3JlLmNvdW50cnlgIGlzIG5vdyBndWFyYW50ZWVkIHRvIGJlIHVwZGF0ZWQuXG4gKlxuICogICAgICAgLy8gU2VsZWN0IHRoZSBkZWZhdWx0IGNpdHkgZm9yIHRoZSBuZXcgY291bnRyeVxuICogICAgICAgQ2l0eVN0b3JlLmNpdHkgPSBnZXREZWZhdWx0Q2l0eUZvckNvdW50cnkoQ291bnRyeVN0b3JlLmNvdW50cnkpO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIHVzYWdlIG9mIGB3YWl0Rm9yKClgIGNhbiBiZSBjaGFpbmVkLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgIEZsaWdodFByaWNlU3RvcmUuZGlzcGF0Y2hUb2tlbiA9XG4gKiAgICAgZmxpZ2h0RGlzcGF0Y2hlci5yZWdpc3RlcihmdW5jdGlvbihwYXlsb2FkKSB7XG4gKiAgICAgICBzd2l0Y2ggKHBheWxvYWQuYWN0aW9uVHlwZSkge1xuICogICAgICAgICBjYXNlICdjb3VudHJ5LXVwZGF0ZSc6XG4gKiAgICAgICAgIGNhc2UgJ2NpdHktdXBkYXRlJzpcbiAqICAgICAgICAgICBmbGlnaHREaXNwYXRjaGVyLndhaXRGb3IoW0NpdHlTdG9yZS5kaXNwYXRjaFRva2VuXSk7XG4gKiAgICAgICAgICAgRmxpZ2h0UHJpY2VTdG9yZS5wcmljZSA9XG4gKiAgICAgICAgICAgICBnZXRGbGlnaHRQcmljZVN0b3JlKENvdW50cnlTdG9yZS5jb3VudHJ5LCBDaXR5U3RvcmUuY2l0eSk7XG4gKiAgICAgICAgICAgYnJlYWs7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBUaGUgYGNvdW50cnktdXBkYXRlYCBwYXlsb2FkIHdpbGwgYmUgZ3VhcmFudGVlZCB0byBpbnZva2UgdGhlIHN0b3JlcydcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGluIG9yZGVyOiBgQ291bnRyeVN0b3JlYCwgYENpdHlTdG9yZWAsIHRoZW5cbiAqIGBGbGlnaHRQcmljZVN0b3JlYC5cbiAqL1xuXG52YXIgRGlzcGF0Y2hlciA9IChmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERpc3BhdGNoZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERpc3BhdGNoZXIpO1xuXG4gICAgdGhpcy5fY2FsbGJhY2tzID0ge307XG4gICAgdGhpcy5faXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX2lzSGFuZGxlZCA9IHt9O1xuICAgIHRoaXMuX2lzUGVuZGluZyA9IHt9O1xuICAgIHRoaXMuX2xhc3RJRCA9IDE7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aXRoIGV2ZXJ5IGRpc3BhdGNoZWQgcGF5bG9hZC4gUmV0dXJuc1xuICAgKiBhIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBgd2FpdEZvcigpYC5cbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3RlcihjYWxsYmFjaykge1xuICAgIHZhciBpZCA9IF9wcmVmaXggKyB0aGlzLl9sYXN0SUQrKztcbiAgICB0aGlzLl9jYWxsYmFja3NbaWRdID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIGlkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY2FsbGJhY2sgYmFzZWQgb24gaXRzIHRva2VuLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS51bnJlZ2lzdGVyID0gZnVuY3Rpb24gdW5yZWdpc3RlcihpZCkge1xuICAgICF0aGlzLl9jYWxsYmFja3NbaWRdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIudW5yZWdpc3RlciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJywgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW2lkXTtcbiAgfTtcblxuICAvKipcbiAgICogV2FpdHMgZm9yIHRoZSBjYWxsYmFja3Mgc3BlY2lmaWVkIHRvIGJlIGludm9rZWQgYmVmb3JlIGNvbnRpbnVpbmcgZXhlY3V0aW9uXG4gICAqIG9mIHRoZSBjdXJyZW50IGNhbGxiYWNrLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSB1c2VkIGJ5IGEgY2FsbGJhY2sgaW5cbiAgICogcmVzcG9uc2UgdG8gYSBkaXNwYXRjaGVkIHBheWxvYWQuXG4gICAqL1xuXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLndhaXRGb3IgPSBmdW5jdGlvbiB3YWl0Rm9yKGlkcykge1xuICAgICF0aGlzLl9pc0Rpc3BhdGNoaW5nID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBNdXN0IGJlIGludm9rZWQgd2hpbGUgZGlzcGF0Y2hpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBpZHMubGVuZ3RoOyBpaSsrKSB7XG4gICAgICB2YXIgaWQgPSBpZHNbaWldO1xuICAgICAgaWYgKHRoaXMuX2lzUGVuZGluZ1tpZF0pIHtcbiAgICAgICAgIXRoaXMuX2lzSGFuZGxlZFtpZF0gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IENpcmN1bGFyIGRlcGVuZGVuY3kgZGV0ZWN0ZWQgd2hpbGUgJyArICd3YWl0aW5nIGZvciBgJXNgLicsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgIXRoaXMuX2NhbGxiYWNrc1tpZF0gPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGlzcGF0Y2hlci53YWl0Rm9yKC4uLik6IGAlc2AgZG9lcyBub3QgbWFwIHRvIGEgcmVnaXN0ZXJlZCBjYWxsYmFjay4nLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgdGhpcy5faW52b2tlQ2FsbGJhY2soaWQpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhIHBheWxvYWQgdG8gYWxsIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIGRpc3BhdGNoKHBheWxvYWQpIHtcbiAgICAhIXRoaXMuX2lzRGlzcGF0Y2hpbmcgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGlzcGF0Y2guZGlzcGF0Y2goLi4uKTogQ2Fubm90IGRpc3BhdGNoIGluIHRoZSBtaWRkbGUgb2YgYSBkaXNwYXRjaC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc3RhcnREaXNwYXRjaGluZyhwYXlsb2FkKTtcbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5fY2FsbGJhY2tzKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW52b2tlQ2FsbGJhY2soaWQpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLl9zdG9wRGlzcGF0Y2hpbmcoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIElzIHRoaXMgRGlzcGF0Y2hlciBjdXJyZW50bHkgZGlzcGF0Y2hpbmcuXG4gICAqL1xuXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLmlzRGlzcGF0Y2hpbmcgPSBmdW5jdGlvbiBpc0Rpc3BhdGNoaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl9pc0Rpc3BhdGNoaW5nO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsIHRoZSBjYWxsYmFjayBzdG9yZWQgd2l0aCB0aGUgZ2l2ZW4gaWQuIEFsc28gZG8gc29tZSBpbnRlcm5hbFxuICAgKiBib29ra2VlcGluZy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLl9pbnZva2VDYWxsYmFjayA9IGZ1bmN0aW9uIF9pbnZva2VDYWxsYmFjayhpZCkge1xuICAgIHRoaXMuX2lzUGVuZGluZ1tpZF0gPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxiYWNrc1tpZF0odGhpcy5fcGVuZGluZ1BheWxvYWQpO1xuICAgIHRoaXMuX2lzSGFuZGxlZFtpZF0gPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdXAgYm9va2tlZXBpbmcgbmVlZGVkIHdoZW4gZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5fc3RhcnREaXNwYXRjaGluZyA9IGZ1bmN0aW9uIF9zdGFydERpc3BhdGNoaW5nKHBheWxvYWQpIHtcbiAgICBmb3IgKHZhciBpZCBpbiB0aGlzLl9jYWxsYmFja3MpIHtcbiAgICAgIHRoaXMuX2lzUGVuZGluZ1tpZF0gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lzSGFuZGxlZFtpZF0gPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fcGVuZGluZ1BheWxvYWQgPSBwYXlsb2FkO1xuICAgIHRoaXMuX2lzRGlzcGF0Y2hpbmcgPSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhciBib29ra2VlcGluZyB1c2VkIGZvciBkaXNwYXRjaGluZy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLl9zdG9wRGlzcGF0Y2hpbmcgPSBmdW5jdGlvbiBfc3RvcERpc3BhdGNoaW5nKCkge1xuICAgIGRlbGV0ZSB0aGlzLl9wZW5kaW5nUGF5bG9hZDtcbiAgICB0aGlzLl9pc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gIH07XG5cbiAgcmV0dXJuIERpc3BhdGNoZXI7XG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERpc3BhdGNoZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGludmFyaWFudFxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgaW52YXJpYW50ID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgZm9ybWF0LCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb25kaXRpb24pIHtcbiAgICB2YXIgZXJyb3I7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYXJncyA9IFthLCBiLCBjLCBkLCBlLCBmXTtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignSW52YXJpYW50IFZpb2xhdGlvbjogJyArIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7IiwiLyoqXG4gKiBJbmRpY2F0ZXMgdGhhdCBuYXZpZ2F0aW9uIHdhcyBjYXVzZWQgYnkgYSBjYWxsIHRvIGhpc3RvcnkucHVzaC5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIFBVU0ggPSAnUFVTSCc7XG5cbmV4cG9ydHMuUFVTSCA9IFBVU0g7XG4vKipcbiAqIEluZGljYXRlcyB0aGF0IG5hdmlnYXRpb24gd2FzIGNhdXNlZCBieSBhIGNhbGwgdG8gaGlzdG9yeS5yZXBsYWNlLlxuICovXG52YXIgUkVQTEFDRSA9ICdSRVBMQUNFJztcblxuZXhwb3J0cy5SRVBMQUNFID0gUkVQTEFDRTtcbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgbmF2aWdhdGlvbiB3YXMgY2F1c2VkIGJ5IHNvbWUgb3RoZXIgYWN0aW9uIHN1Y2hcbiAqIGFzIHVzaW5nIGEgYnJvd3NlcidzIGJhY2svZm9yd2FyZCBidXR0b25zIGFuZC9vciBtYW51YWxseSBtYW5pcHVsYXRpbmdcbiAqIHRoZSBVUkwgaW4gYSBicm93c2VyJ3MgbG9jYXRpb24gYmFyLiBUaGlzIGlzIHRoZSBkZWZhdWx0LlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93RXZlbnRIYW5kbGVycy9vbnBvcHN0YXRlXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIFBPUCA9ICdQT1AnO1xuXG5leHBvcnRzLlBPUCA9IFBPUDtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHtcbiAgUFVTSDogUFVTSCxcbiAgUkVQTEFDRTogUkVQTEFDRSxcbiAgUE9QOiBQT1Bcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmxvb3BBc3luYyA9IGxvb3BBc3luYztcblxuZnVuY3Rpb24gbG9vcEFzeW5jKHR1cm5zLCB3b3JrLCBjYWxsYmFjaykge1xuICB2YXIgY3VycmVudFR1cm4gPSAwO1xuICB2YXIgaXNEb25lID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICBpc0RvbmUgPSB0cnVlO1xuICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBmdW5jdGlvbiBuZXh0KCkge1xuICAgIGlmIChpc0RvbmUpIHJldHVybjtcblxuICAgIGlmIChjdXJyZW50VHVybiA8IHR1cm5zKSB7XG4gICAgICB3b3JrLmNhbGwodGhpcywgY3VycmVudFR1cm4rKywgbmV4dCwgZG9uZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBuZXh0KCk7XG59IiwiLyplc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5zYXZlU3RhdGUgPSBzYXZlU3RhdGU7XG5leHBvcnRzLnJlYWRTdGF0ZSA9IHJlYWRTdGF0ZTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCd3YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxudmFyIEtleVByZWZpeCA9ICdAQEhpc3RvcnkvJztcbnZhciBRdW90YUV4Y2VlZGVkRXJyb3IgPSAnUXVvdGFFeGNlZWRlZEVycm9yJztcbnZhciBTZWN1cml0eUVycm9yID0gJ1NlY3VyaXR5RXJyb3InO1xuXG5mdW5jdGlvbiBjcmVhdGVLZXkoa2V5KSB7XG4gIHJldHVybiBLZXlQcmVmaXggKyBrZXk7XG59XG5cbmZ1bmN0aW9uIHNhdmVTdGF0ZShrZXksIHN0YXRlKSB7XG4gIHRyeSB7XG4gICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oY3JlYXRlS2V5KGtleSksIEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLm5hbWUgPT09IFNlY3VyaXR5RXJyb3IpIHtcbiAgICAgIC8vIEJsb2NraW5nIGNvb2tpZXMgaW4gQ2hyb21lL0ZpcmVmb3gvU2FmYXJpIHRocm93cyBTZWN1cml0eUVycm9yIG9uIGFueVxuICAgICAgLy8gYXR0ZW1wdCB0byBhY2Nlc3Mgd2luZG93LnNlc3Npb25TdG9yYWdlLlxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKGZhbHNlLCAnW2hpc3RvcnldIFVuYWJsZSB0byBzYXZlIHN0YXRlOyBzZXNzaW9uU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIGR1ZSB0byBzZWN1cml0eSBzZXR0aW5ncycpIDogdW5kZWZpbmVkO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVycm9yLm5hbWUgPT09IFF1b3RhRXhjZWVkZWRFcnJvciAmJiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBTYWZhcmkgXCJwcml2YXRlIG1vZGVcIiB0aHJvd3MgUXVvdGFFeGNlZWRlZEVycm9yLlxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF93YXJuaW5nMlsnZGVmYXVsdCddKGZhbHNlLCAnW2hpc3RvcnldIFVuYWJsZSB0byBzYXZlIHN0YXRlOyBzZXNzaW9uU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIGluIFNhZmFyaSBwcml2YXRlIG1vZGUnKSA6IHVuZGVmaW5lZDtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRTdGF0ZShrZXkpIHtcbiAgdmFyIGpzb24gPSB1bmRlZmluZWQ7XG4gIHRyeSB7XG4gICAganNvbiA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGNyZWF0ZUtleShrZXkpKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gU2VjdXJpdHlFcnJvcikge1xuICAgICAgLy8gQmxvY2tpbmcgY29va2llcyBpbiBDaHJvbWUvRmlyZWZveC9TYWZhcmkgdGhyb3dzIFNlY3VyaXR5RXJyb3Igb24gYW55XG4gICAgICAvLyBhdHRlbXB0IHRvIGFjY2VzcyB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10oZmFsc2UsICdbaGlzdG9yeV0gVW5hYmxlIHRvIHJlYWQgc3RhdGU7IHNlc3Npb25TdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUgZHVlIHRvIHNlY3VyaXR5IHNldHRpbmdzJykgOiB1bmRlZmluZWQ7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBJZ25vcmUgaW52YWxpZCBKU09OLlxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZEV2ZW50TGlzdGVuZXI7XG5leHBvcnRzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSByZW1vdmVFdmVudExpc3RlbmVyO1xuZXhwb3J0cy5nZXRIYXNoUGF0aCA9IGdldEhhc2hQYXRoO1xuZXhwb3J0cy5yZXBsYWNlSGFzaFBhdGggPSByZXBsYWNlSGFzaFBhdGg7XG5leHBvcnRzLmdldFdpbmRvd1BhdGggPSBnZXRXaW5kb3dQYXRoO1xuZXhwb3J0cy5nbyA9IGdvO1xuZXhwb3J0cy5nZXRVc2VyQ29uZmlybWF0aW9uID0gZ2V0VXNlckNvbmZpcm1hdGlvbjtcbmV4cG9ydHMuc3VwcG9ydHNIaXN0b3J5ID0gc3VwcG9ydHNIaXN0b3J5O1xuZXhwb3J0cy5zdXBwb3J0c0dvV2l0aG91dFJlbG9hZFVzaW5nSGFzaCA9IHN1cHBvcnRzR29XaXRob3V0UmVsb2FkVXNpbmdIYXNoO1xuXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50LCBsaXN0ZW5lcikge1xuICBpZiAobm9kZS5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICB9IGVsc2Uge1xuICAgIG5vZGUuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudCwgbGlzdGVuZXIpIHtcbiAgaWYgKG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgfSBlbHNlIHtcbiAgICBub2RlLmRldGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEhhc2hQYXRoKCkge1xuICAvLyBXZSBjYW4ndCB1c2Ugd2luZG93LmxvY2F0aW9uLmhhc2ggaGVyZSBiZWNhdXNlIGl0J3Mgbm90XG4gIC8vIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzIC0gRmlyZWZveCB3aWxsIHByZS1kZWNvZGUgaXQhXG4gIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzFdIHx8ICcnO1xufVxuXG5mdW5jdGlvbiByZXBsYWNlSGFzaFBhdGgocGF0aCkge1xuICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgJyMnICsgcGF0aCk7XG59XG5cbmZ1bmN0aW9uIGdldFdpbmRvd1BhdGgoKSB7XG4gIHJldHVybiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2g7XG59XG5cbmZ1bmN0aW9uIGdvKG4pIHtcbiAgaWYgKG4pIHdpbmRvdy5oaXN0b3J5LmdvKG4pO1xufVxuXG5mdW5jdGlvbiBnZXRVc2VyQ29uZmlybWF0aW9uKG1lc3NhZ2UsIGNhbGxiYWNrKSB7XG4gIGNhbGxiYWNrKHdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIEhUTUw1IGhpc3RvcnkgQVBJIGlzIHN1cHBvcnRlZC4gVGFrZW4gZnJvbSBNb2Rlcm5penIuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICogaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL2hpc3RvcnkuanNcbiAqIGNoYW5nZWQgdG8gYXZvaWQgZmFsc2UgbmVnYXRpdmVzIGZvciBXaW5kb3dzIFBob25lczogaHR0cHM6Ly9naXRodWIuY29tL3JhY2t0L3JlYWN0LXJvdXRlci9pc3N1ZXMvNTg2XG4gKi9cblxuZnVuY3Rpb24gc3VwcG9ydHNIaXN0b3J5KCkge1xuICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICBpZiAoKHVhLmluZGV4T2YoJ0FuZHJvaWQgMi4nKSAhPT0gLTEgfHwgdWEuaW5kZXhPZignQW5kcm9pZCA0LjAnKSAhPT0gLTEpICYmIHVhLmluZGV4T2YoJ01vYmlsZSBTYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignQ2hyb21lJykgPT09IC0xICYmIHVhLmluZGV4T2YoJ1dpbmRvd3MgUGhvbmUnKSA9PT0gLTEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gRklYTUU6IFdvcmsgYXJvdW5kIG91ciBicm93c2VyIGhpc3Rvcnkgbm90IHdvcmtpbmcgY29ycmVjdGx5IG9uIENocm9tZVxuICAvLyBpT1M6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWNrdC9yZWFjdC1yb3V0ZXIvaXNzdWVzLzI1NjVcbiAgaWYgKHVhLmluZGV4T2YoJ0NyaU9TJykgIT09IC0xKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB3aW5kb3cuaGlzdG9yeSAmJiAncHVzaFN0YXRlJyBpbiB3aW5kb3cuaGlzdG9yeTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGZhbHNlIGlmIHVzaW5nIGdvKG4pIHdpdGggaGFzaCBoaXN0b3J5IGNhdXNlcyBhIGZ1bGwgcGFnZSByZWxvYWQuXG4gKi9cblxuZnVuY3Rpb24gc3VwcG9ydHNHb1dpdGhvdXRSZWxvYWRVc2luZ0hhc2goKSB7XG4gIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG4gIHJldHVybiB1YS5pbmRleE9mKCdGaXJlZm94JykgPT09IC0xO1xufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBjYW5Vc2VET00gPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xuZXhwb3J0cy5jYW5Vc2VET00gPSBjYW5Vc2VET007IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfaW52YXJpYW50ID0gcmVxdWlyZSgnaW52YXJpYW50Jyk7XG5cbnZhciBfaW52YXJpYW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ludmFyaWFudCk7XG5cbnZhciBfQWN0aW9ucyA9IHJlcXVpcmUoJy4vQWN0aW9ucycpO1xuXG52YXIgX0V4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgX0RPTVV0aWxzID0gcmVxdWlyZSgnLi9ET01VdGlscycpO1xuXG52YXIgX0RPTVN0YXRlU3RvcmFnZSA9IHJlcXVpcmUoJy4vRE9NU3RhdGVTdG9yYWdlJyk7XG5cbnZhciBfY3JlYXRlRE9NSGlzdG9yeSA9IHJlcXVpcmUoJy4vY3JlYXRlRE9NSGlzdG9yeScpO1xuXG52YXIgX2NyZWF0ZURPTUhpc3RvcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlRE9NSGlzdG9yeSk7XG5cbnZhciBfcGFyc2VQYXRoID0gcmVxdWlyZSgnLi9wYXJzZVBhdGgnKTtcblxudmFyIF9wYXJzZVBhdGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyc2VQYXRoKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgaGlzdG9yeSBvYmplY3QgdGhhdCB1c2VzIEhUTUw1J3MgaGlzdG9yeSBBUElcbiAqIChwdXNoU3RhdGUsIHJlcGxhY2VTdGF0ZSwgYW5kIHRoZSBwb3BzdGF0ZSBldmVudCkgdG8gbWFuYWdlIGhpc3RvcnkuXG4gKiBUaGlzIGlzIHRoZSByZWNvbW1lbmRlZCBtZXRob2Qgb2YgbWFuYWdpbmcgaGlzdG9yeSBpbiBicm93c2VycyBiZWNhdXNlXG4gKiBpdCBwcm92aWRlcyB0aGUgY2xlYW5lc3QgVVJMcy5cbiAqXG4gKiBOb3RlOiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHRoZSBIVE1MNSBoaXN0b3J5IEFQSSBmdWxsXG4gKiBwYWdlIHJlbG9hZHMgd2lsbCBiZSB1c2VkIHRvIHByZXNlcnZlIFVSTHMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJIaXN0b3J5KCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXG4gICFfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UsICdCcm93c2VyIGhpc3RvcnkgbmVlZHMgYSBET00nKSA6IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIHZhciBmb3JjZVJlZnJlc2ggPSBvcHRpb25zLmZvcmNlUmVmcmVzaDtcblxuICB2YXIgaXNTdXBwb3J0ZWQgPSBfRE9NVXRpbHMuc3VwcG9ydHNIaXN0b3J5KCk7XG4gIHZhciB1c2VSZWZyZXNoID0gIWlzU3VwcG9ydGVkIHx8IGZvcmNlUmVmcmVzaDtcblxuICBmdW5jdGlvbiBnZXRDdXJyZW50TG9jYXRpb24oaGlzdG9yeVN0YXRlKSB7XG4gICAgaGlzdG9yeVN0YXRlID0gaGlzdG9yeVN0YXRlIHx8IHdpbmRvdy5oaXN0b3J5LnN0YXRlIHx8IHt9O1xuXG4gICAgdmFyIHBhdGggPSBfRE9NVXRpbHMuZ2V0V2luZG93UGF0aCgpO1xuICAgIHZhciBfaGlzdG9yeVN0YXRlID0gaGlzdG9yeVN0YXRlO1xuICAgIHZhciBrZXkgPSBfaGlzdG9yeVN0YXRlLmtleTtcblxuICAgIHZhciBzdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICBpZiAoa2V5KSB7XG4gICAgICBzdGF0ZSA9IF9ET01TdGF0ZVN0b3JhZ2UucmVhZFN0YXRlKGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlID0gbnVsbDtcbiAgICAgIGtleSA9IGhpc3RvcnkuY3JlYXRlS2V5KCk7XG5cbiAgICAgIGlmIChpc1N1cHBvcnRlZCkgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKF9leHRlbmRzKHt9LCBoaXN0b3J5U3RhdGUsIHsga2V5OiBrZXkgfSksIG51bGwsIHBhdGgpO1xuICAgIH1cblxuICAgIHZhciBsb2NhdGlvbiA9IF9wYXJzZVBhdGgyWydkZWZhdWx0J10ocGF0aCk7XG5cbiAgICByZXR1cm4gaGlzdG9yeS5jcmVhdGVMb2NhdGlvbihfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHsgc3RhdGU6IHN0YXRlIH0pLCB1bmRlZmluZWQsIGtleSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydFBvcFN0YXRlTGlzdGVuZXIoX3JlZikge1xuICAgIHZhciB0cmFuc2l0aW9uVG8gPSBfcmVmLnRyYW5zaXRpb25UbztcblxuICAgIGZ1bmN0aW9uIHBvcFN0YXRlTGlzdGVuZXIoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5zdGF0ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47IC8vIElnbm9yZSBleHRyYW5lb3VzIHBvcHN0YXRlIGV2ZW50cyBpbiBXZWJLaXQuXG5cbiAgICAgIHRyYW5zaXRpb25UbyhnZXRDdXJyZW50TG9jYXRpb24oZXZlbnQuc3RhdGUpKTtcbiAgICB9XG5cbiAgICBfRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdwb3BzdGF0ZScsIHBvcFN0YXRlTGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9ET01VdGlscy5yZW1vdmVFdmVudExpc3RlbmVyKHdpbmRvdywgJ3BvcHN0YXRlJywgcG9wU3RhdGVMaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmlzaFRyYW5zaXRpb24obG9jYXRpb24pIHtcbiAgICB2YXIgYmFzZW5hbWUgPSBsb2NhdGlvbi5iYXNlbmFtZTtcbiAgICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICB2YXIgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoO1xuICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcbiAgICB2YXIgc3RhdGUgPSBsb2NhdGlvbi5zdGF0ZTtcbiAgICB2YXIgYWN0aW9uID0gbG9jYXRpb24uYWN0aW9uO1xuICAgIHZhciBrZXkgPSBsb2NhdGlvbi5rZXk7XG5cbiAgICBpZiAoYWN0aW9uID09PSBfQWN0aW9ucy5QT1ApIHJldHVybjsgLy8gTm90aGluZyB0byBkby5cblxuICAgIF9ET01TdGF0ZVN0b3JhZ2Uuc2F2ZVN0YXRlKGtleSwgc3RhdGUpO1xuXG4gICAgdmFyIHBhdGggPSAoYmFzZW5hbWUgfHwgJycpICsgcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xuICAgIHZhciBoaXN0b3J5U3RhdGUgPSB7XG4gICAgICBrZXk6IGtleVxuICAgIH07XG5cbiAgICBpZiAoYWN0aW9uID09PSBfQWN0aW9ucy5QVVNIKSB7XG4gICAgICBpZiAodXNlUmVmcmVzaCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHBhdGg7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gUHJldmVudCBsb2NhdGlvbiB1cGRhdGUuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShoaXN0b3J5U3RhdGUsIG51bGwsIHBhdGgpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJFUExBQ0VcbiAgICAgIGlmICh1c2VSZWZyZXNoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHBhdGgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFByZXZlbnQgbG9jYXRpb24gdXBkYXRlLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoaGlzdG9yeVN0YXRlLCBudWxsLCBwYXRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBoaXN0b3J5ID0gX2NyZWF0ZURPTUhpc3RvcnkyWydkZWZhdWx0J10oX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICBnZXRDdXJyZW50TG9jYXRpb246IGdldEN1cnJlbnRMb2NhdGlvbixcbiAgICBmaW5pc2hUcmFuc2l0aW9uOiBmaW5pc2hUcmFuc2l0aW9uLFxuICAgIHNhdmVTdGF0ZTogX0RPTVN0YXRlU3RvcmFnZS5zYXZlU3RhdGVcbiAgfSkpO1xuXG4gIHZhciBsaXN0ZW5lckNvdW50ID0gMCxcbiAgICAgIHN0b3BQb3BTdGF0ZUxpc3RlbmVyID0gdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIGxpc3RlbkJlZm9yZShsaXN0ZW5lcikge1xuICAgIGlmICgrK2xpc3RlbmVyQ291bnQgPT09IDEpIHN0b3BQb3BTdGF0ZUxpc3RlbmVyID0gc3RhcnRQb3BTdGF0ZUxpc3RlbmVyKGhpc3RvcnkpO1xuXG4gICAgdmFyIHVubGlzdGVuID0gaGlzdG9yeS5saXN0ZW5CZWZvcmUobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHVubGlzdGVuKCk7XG5cbiAgICAgIGlmICgtLWxpc3RlbmVyQ291bnQgPT09IDApIHN0b3BQb3BTdGF0ZUxpc3RlbmVyKCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxpc3RlbihsaXN0ZW5lcikge1xuICAgIGlmICgrK2xpc3RlbmVyQ291bnQgPT09IDEpIHN0b3BQb3BTdGF0ZUxpc3RlbmVyID0gc3RhcnRQb3BTdGF0ZUxpc3RlbmVyKGhpc3RvcnkpO1xuXG4gICAgdmFyIHVubGlzdGVuID0gaGlzdG9yeS5saXN0ZW4obGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHVubGlzdGVuKCk7XG5cbiAgICAgIGlmICgtLWxpc3RlbmVyQ291bnQgPT09IDApIHN0b3BQb3BTdGF0ZUxpc3RlbmVyKCk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gcmVnaXN0ZXJUcmFuc2l0aW9uSG9vayhob29rKSB7XG4gICAgaWYgKCsrbGlzdGVuZXJDb3VudCA9PT0gMSkgc3RvcFBvcFN0YXRlTGlzdGVuZXIgPSBzdGFydFBvcFN0YXRlTGlzdGVuZXIoaGlzdG9yeSk7XG5cbiAgICBoaXN0b3J5LnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vayk7XG4gIH1cblxuICAvLyBkZXByZWNhdGVkXG4gIGZ1bmN0aW9uIHVucmVnaXN0ZXJUcmFuc2l0aW9uSG9vayhob29rKSB7XG4gICAgaGlzdG9yeS51bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vayk7XG5cbiAgICBpZiAoLS1saXN0ZW5lckNvdW50ID09PSAwKSBzdG9wUG9wU3RhdGVMaXN0ZW5lcigpO1xuICB9XG5cbiAgcmV0dXJuIF9leHRlbmRzKHt9LCBoaXN0b3J5LCB7XG4gICAgbGlzdGVuQmVmb3JlOiBsaXN0ZW5CZWZvcmUsXG4gICAgbGlzdGVuOiBsaXN0ZW4sXG4gICAgcmVnaXN0ZXJUcmFuc2l0aW9uSG9vazogcmVnaXN0ZXJUcmFuc2l0aW9uSG9vayxcbiAgICB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2s6IHVucmVnaXN0ZXJUcmFuc2l0aW9uSG9va1xuICB9KTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gY3JlYXRlQnJvd3Nlckhpc3Rvcnk7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9pbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxudmFyIF9pbnZhcmlhbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW52YXJpYW50KTtcblxudmFyIF9FeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIF9ET01VdGlscyA9IHJlcXVpcmUoJy4vRE9NVXRpbHMnKTtcblxudmFyIF9jcmVhdGVIaXN0b3J5ID0gcmVxdWlyZSgnLi9jcmVhdGVIaXN0b3J5Jyk7XG5cbnZhciBfY3JlYXRlSGlzdG9yeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVIaXN0b3J5KTtcblxuZnVuY3Rpb24gY3JlYXRlRE9NSGlzdG9yeShvcHRpb25zKSB7XG4gIHZhciBoaXN0b3J5ID0gX2NyZWF0ZUhpc3RvcnkyWydkZWZhdWx0J10oX2V4dGVuZHMoe1xuICAgIGdldFVzZXJDb25maXJtYXRpb246IF9ET01VdGlscy5nZXRVc2VyQ29uZmlybWF0aW9uXG4gIH0sIG9wdGlvbnMsIHtcbiAgICBnbzogX0RPTVV0aWxzLmdvXG4gIH0pKTtcblxuICBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICAhX0V4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfaW52YXJpYW50MlsnZGVmYXVsdCddKGZhbHNlLCAnRE9NIGhpc3RvcnkgbmVlZHMgYSBET00nKSA6IF9pbnZhcmlhbnQyWydkZWZhdWx0J10oZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGhpc3RvcnkubGlzdGVuKGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiBfZXh0ZW5kcyh7fSwgaGlzdG9yeSwge1xuICAgIGxpc3RlbjogbGlzdGVuXG4gIH0pO1xufVxuXG5leHBvcnRzWydkZWZhdWx0J10gPSBjcmVhdGVET01IaXN0b3J5O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiLy9pbXBvcnQgd2FybmluZyBmcm9tICd3YXJuaW5nJ1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfZGVlcEVxdWFsID0gcmVxdWlyZSgnZGVlcC1lcXVhbCcpO1xuXG52YXIgX2RlZXBFcXVhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWVwRXF1YWwpO1xuXG52YXIgX0FzeW5jVXRpbHMgPSByZXF1aXJlKCcuL0FzeW5jVXRpbHMnKTtcblxudmFyIF9BY3Rpb25zID0gcmVxdWlyZSgnLi9BY3Rpb25zJyk7XG5cbnZhciBfY3JlYXRlTG9jYXRpb24yID0gcmVxdWlyZSgnLi9jcmVhdGVMb2NhdGlvbicpO1xuXG52YXIgX2NyZWF0ZUxvY2F0aW9uMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUxvY2F0aW9uMik7XG5cbnZhciBfcnVuVHJhbnNpdGlvbkhvb2sgPSByZXF1aXJlKCcuL3J1blRyYW5zaXRpb25Ib29rJyk7XG5cbnZhciBfcnVuVHJhbnNpdGlvbkhvb2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnVuVHJhbnNpdGlvbkhvb2spO1xuXG52YXIgX3BhcnNlUGF0aCA9IHJlcXVpcmUoJy4vcGFyc2VQYXRoJyk7XG5cbnZhciBfcGFyc2VQYXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnNlUGF0aCk7XG5cbnZhciBfZGVwcmVjYXRlID0gcmVxdWlyZSgnLi9kZXByZWNhdGUnKTtcblxudmFyIF9kZXByZWNhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVwcmVjYXRlKTtcblxuZnVuY3Rpb24gY3JlYXRlUmFuZG9tS2V5KGxlbmd0aCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIGxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIGxvY2F0aW9uc0FyZUVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEucGF0aG5hbWUgPT09IGIucGF0aG5hbWUgJiYgYS5zZWFyY2ggPT09IGIuc2VhcmNoICYmXG4gIC8vYS5hY3Rpb24gPT09IGIuYWN0aW9uICYmIC8vIERpZmZlcmVudCBhY3Rpb24gIT09IGxvY2F0aW9uIGNoYW5nZS5cbiAgYS5rZXkgPT09IGIua2V5ICYmIF9kZWVwRXF1YWwyWydkZWZhdWx0J10oYS5zdGF0ZSwgYi5zdGF0ZSk7XG59XG5cbnZhciBEZWZhdWx0S2V5TGVuZ3RoID0gNjtcblxuZnVuY3Rpb24gY3JlYXRlSGlzdG9yeSgpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcbiAgdmFyIGdldEN1cnJlbnRMb2NhdGlvbiA9IG9wdGlvbnMuZ2V0Q3VycmVudExvY2F0aW9uO1xuICB2YXIgZmluaXNoVHJhbnNpdGlvbiA9IG9wdGlvbnMuZmluaXNoVHJhbnNpdGlvbjtcbiAgdmFyIHNhdmVTdGF0ZSA9IG9wdGlvbnMuc2F2ZVN0YXRlO1xuICB2YXIgZ28gPSBvcHRpb25zLmdvO1xuICB2YXIga2V5TGVuZ3RoID0gb3B0aW9ucy5rZXlMZW5ndGg7XG4gIHZhciBnZXRVc2VyQ29uZmlybWF0aW9uID0gb3B0aW9ucy5nZXRVc2VyQ29uZmlybWF0aW9uO1xuXG4gIGlmICh0eXBlb2Yga2V5TGVuZ3RoICE9PSAnbnVtYmVyJykga2V5TGVuZ3RoID0gRGVmYXVsdEtleUxlbmd0aDtcblxuICB2YXIgdHJhbnNpdGlvbkhvb2tzID0gW107XG5cbiAgZnVuY3Rpb24gbGlzdGVuQmVmb3JlKGhvb2spIHtcbiAgICB0cmFuc2l0aW9uSG9va3MucHVzaChob29rKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB0cmFuc2l0aW9uSG9va3MgPSB0cmFuc2l0aW9uSG9va3MuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtICE9PSBob29rO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIHZhciBhbGxLZXlzID0gW107XG4gIHZhciBjaGFuZ2VMaXN0ZW5lcnMgPSBbXTtcbiAgdmFyIGxvY2F0aW9uID0gdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIGdldEN1cnJlbnQoKSB7XG4gICAgaWYgKHBlbmRpbmdMb2NhdGlvbiAmJiBwZW5kaW5nTG9jYXRpb24uYWN0aW9uID09PSBfQWN0aW9ucy5QT1ApIHtcbiAgICAgIHJldHVybiBhbGxLZXlzLmluZGV4T2YocGVuZGluZ0xvY2F0aW9uLmtleSk7XG4gICAgfSBlbHNlIGlmIChsb2NhdGlvbikge1xuICAgICAgcmV0dXJuIGFsbEtleXMuaW5kZXhPZihsb2NhdGlvbi5rZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTG9jYXRpb24obmV3TG9jYXRpb24pIHtcbiAgICB2YXIgY3VycmVudCA9IGdldEN1cnJlbnQoKTtcblxuICAgIGxvY2F0aW9uID0gbmV3TG9jYXRpb247XG5cbiAgICBpZiAobG9jYXRpb24uYWN0aW9uID09PSBfQWN0aW9ucy5QVVNIKSB7XG4gICAgICBhbGxLZXlzID0gW10uY29uY2F0KGFsbEtleXMuc2xpY2UoMCwgY3VycmVudCArIDEpLCBbbG9jYXRpb24ua2V5XSk7XG4gICAgfSBlbHNlIGlmIChsb2NhdGlvbi5hY3Rpb24gPT09IF9BY3Rpb25zLlJFUExBQ0UpIHtcbiAgICAgIGFsbEtleXNbY3VycmVudF0gPSBsb2NhdGlvbi5rZXk7XG4gICAgfVxuXG4gICAgY2hhbmdlTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICBsaXN0ZW5lcihsb2NhdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBsaXN0ZW4obGlzdGVuZXIpIHtcbiAgICBjaGFuZ2VMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cbiAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgIGxpc3RlbmVyKGxvY2F0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIF9sb2NhdGlvbiA9IGdldEN1cnJlbnRMb2NhdGlvbigpO1xuICAgICAgYWxsS2V5cyA9IFtfbG9jYXRpb24ua2V5XTtcbiAgICAgIHVwZGF0ZUxvY2F0aW9uKF9sb2NhdGlvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoYW5nZUxpc3RlbmVycyA9IGNoYW5nZUxpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gIT09IGxpc3RlbmVyO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbmZpcm1UcmFuc2l0aW9uVG8obG9jYXRpb24sIGNhbGxiYWNrKSB7XG4gICAgX0FzeW5jVXRpbHMubG9vcEFzeW5jKHRyYW5zaXRpb25Ib29rcy5sZW5ndGgsIGZ1bmN0aW9uIChpbmRleCwgbmV4dCwgZG9uZSkge1xuICAgICAgX3J1blRyYW5zaXRpb25Ib29rMlsnZGVmYXVsdCddKHRyYW5zaXRpb25Ib29rc1tpbmRleF0sIGxvY2F0aW9uLCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgIGRvbmUocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICBpZiAoZ2V0VXNlckNvbmZpcm1hdGlvbiAmJiB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbihtZXNzYWdlLCBmdW5jdGlvbiAob2spIHtcbiAgICAgICAgICBjYWxsYmFjayhvayAhPT0gZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG1lc3NhZ2UgIT09IGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhciBwZW5kaW5nTG9jYXRpb24gPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24gdHJhbnNpdGlvblRvKG5leHRMb2NhdGlvbikge1xuICAgIGlmIChsb2NhdGlvbiAmJiBsb2NhdGlvbnNBcmVFcXVhbChsb2NhdGlvbiwgbmV4dExvY2F0aW9uKSkgcmV0dXJuOyAvLyBOb3RoaW5nIHRvIGRvLlxuXG4gICAgcGVuZGluZ0xvY2F0aW9uID0gbmV4dExvY2F0aW9uO1xuXG4gICAgY29uZmlybVRyYW5zaXRpb25UbyhuZXh0TG9jYXRpb24sIGZ1bmN0aW9uIChvaykge1xuICAgICAgaWYgKHBlbmRpbmdMb2NhdGlvbiAhPT0gbmV4dExvY2F0aW9uKSByZXR1cm47IC8vIFRyYW5zaXRpb24gd2FzIGludGVycnVwdGVkLlxuXG4gICAgICBpZiAob2spIHtcbiAgICAgICAgLy8gdHJlYXQgUFVTSCB0byBjdXJyZW50IHBhdGggbGlrZSBSRVBMQUNFIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBicm93c2Vyc1xuICAgICAgICBpZiAobmV4dExvY2F0aW9uLmFjdGlvbiA9PT0gX0FjdGlvbnMuUFVTSCkge1xuICAgICAgICAgIHZhciBwcmV2UGF0aCA9IGNyZWF0ZVBhdGgobG9jYXRpb24pO1xuICAgICAgICAgIHZhciBuZXh0UGF0aCA9IGNyZWF0ZVBhdGgobmV4dExvY2F0aW9uKTtcblxuICAgICAgICAgIGlmIChuZXh0UGF0aCA9PT0gcHJldlBhdGgpIG5leHRMb2NhdGlvbi5hY3Rpb24gPSBfQWN0aW9ucy5SRVBMQUNFO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbmlzaFRyYW5zaXRpb24obmV4dExvY2F0aW9uKSAhPT0gZmFsc2UpIHVwZGF0ZUxvY2F0aW9uKG5leHRMb2NhdGlvbik7XG4gICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uICYmIG5leHRMb2NhdGlvbi5hY3Rpb24gPT09IF9BY3Rpb25zLlBPUCkge1xuICAgICAgICB2YXIgcHJldkluZGV4ID0gYWxsS2V5cy5pbmRleE9mKGxvY2F0aW9uLmtleSk7XG4gICAgICAgIHZhciBuZXh0SW5kZXggPSBhbGxLZXlzLmluZGV4T2YobmV4dExvY2F0aW9uLmtleSk7XG5cbiAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEgJiYgbmV4dEluZGV4ICE9PSAtMSkgZ28ocHJldkluZGV4IC0gbmV4dEluZGV4KTsgLy8gUmVzdG9yZSB0aGUgVVJMLlxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHVzaChsb2NhdGlvbikge1xuICAgIHRyYW5zaXRpb25UbyhjcmVhdGVMb2NhdGlvbihsb2NhdGlvbiwgX0FjdGlvbnMuUFVTSCwgY3JlYXRlS2V5KCkpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcGxhY2UobG9jYXRpb24pIHtcbiAgICB0cmFuc2l0aW9uVG8oY3JlYXRlTG9jYXRpb24obG9jYXRpb24sIF9BY3Rpb25zLlJFUExBQ0UsIGNyZWF0ZUtleSgpKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnb0JhY2soKSB7XG4gICAgZ28oLTEpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ29Gb3J3YXJkKCkge1xuICAgIGdvKDEpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlS2V5KCkge1xuICAgIHJldHVybiBjcmVhdGVSYW5kb21LZXkoa2V5TGVuZ3RoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVBhdGgobG9jYXRpb24pIHtcbiAgICBpZiAobG9jYXRpb24gPT0gbnVsbCB8fCB0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSByZXR1cm4gbG9jYXRpb247XG5cbiAgICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICB2YXIgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoO1xuICAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcblxuICAgIHZhciByZXN1bHQgPSBwYXRobmFtZTtcblxuICAgIGlmIChzZWFyY2gpIHJlc3VsdCArPSBzZWFyY2g7XG5cbiAgICBpZiAoaGFzaCkgcmVzdWx0ICs9IGhhc2g7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlSHJlZihsb2NhdGlvbikge1xuICAgIHJldHVybiBjcmVhdGVQYXRoKGxvY2F0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKGxvY2F0aW9uLCBhY3Rpb24pIHtcbiAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8gY3JlYXRlS2V5KCkgOiBhcmd1bWVudHNbMl07XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vd2FybmluZyhcbiAgICAgIC8vICBmYWxzZSxcbiAgICAgIC8vICAnVGhlIHN0YXRlICgybmQpIGFyZ3VtZW50IHRvIGhpc3RvcnkuY3JlYXRlTG9jYXRpb24gaXMgZGVwcmVjYXRlZDsgdXNlIGEgJyArXG4gICAgICAvLyAgJ2xvY2F0aW9uIGRlc2NyaXB0b3IgaW5zdGVhZCdcbiAgICAgIC8vKVxuXG4gICAgICBpZiAodHlwZW9mIGxvY2F0aW9uID09PSAnc3RyaW5nJykgbG9jYXRpb24gPSBfcGFyc2VQYXRoMlsnZGVmYXVsdCddKGxvY2F0aW9uKTtcblxuICAgICAgbG9jYXRpb24gPSBfZXh0ZW5kcyh7fSwgbG9jYXRpb24sIHsgc3RhdGU6IGFjdGlvbiB9KTtcblxuICAgICAgYWN0aW9uID0ga2V5O1xuICAgICAga2V5ID0gYXJndW1lbnRzWzNdIHx8IGNyZWF0ZUtleSgpO1xuICAgIH1cblxuICAgIHJldHVybiBfY3JlYXRlTG9jYXRpb24zWydkZWZhdWx0J10obG9jYXRpb24sIGFjdGlvbiwga2V5KTtcbiAgfVxuXG4gIC8vIGRlcHJlY2F0ZWRcbiAgZnVuY3Rpb24gc2V0U3RhdGUoc3RhdGUpIHtcbiAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgIHVwZGF0ZUxvY2F0aW9uU3RhdGUobG9jYXRpb24sIHN0YXRlKTtcbiAgICAgIHVwZGF0ZUxvY2F0aW9uKGxvY2F0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXBkYXRlTG9jYXRpb25TdGF0ZShnZXRDdXJyZW50TG9jYXRpb24oKSwgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUxvY2F0aW9uU3RhdGUobG9jYXRpb24sIHN0YXRlKSB7XG4gICAgbG9jYXRpb24uc3RhdGUgPSBfZXh0ZW5kcyh7fSwgbG9jYXRpb24uc3RhdGUsIHN0YXRlKTtcbiAgICBzYXZlU3RhdGUobG9jYXRpb24ua2V5LCBsb2NhdGlvbi5zdGF0ZSk7XG4gIH1cblxuICAvLyBkZXByZWNhdGVkXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vaykge1xuICAgIGlmICh0cmFuc2l0aW9uSG9va3MuaW5kZXhPZihob29rKSA9PT0gLTEpIHRyYW5zaXRpb25Ib29rcy5wdXNoKGhvb2spO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2soaG9vaykge1xuICAgIHRyYW5zaXRpb25Ib29rcyA9IHRyYW5zaXRpb25Ib29rcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtICE9PSBob29rO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiBwdXNoU3RhdGUoc3RhdGUsIHBhdGgpIHtcbiAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSBwYXRoID0gX3BhcnNlUGF0aDJbJ2RlZmF1bHQnXShwYXRoKTtcblxuICAgIHB1c2goX2V4dGVuZHMoeyBzdGF0ZTogc3RhdGUgfSwgcGF0aCkpO1xuICB9XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBmdW5jdGlvbiByZXBsYWNlU3RhdGUoc3RhdGUsIHBhdGgpIHtcbiAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSBwYXRoID0gX3BhcnNlUGF0aDJbJ2RlZmF1bHQnXShwYXRoKTtcblxuICAgIHJlcGxhY2UoX2V4dGVuZHMoeyBzdGF0ZTogc3RhdGUgfSwgcGF0aCkpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsaXN0ZW5CZWZvcmU6IGxpc3RlbkJlZm9yZSxcbiAgICBsaXN0ZW46IGxpc3RlbixcbiAgICB0cmFuc2l0aW9uVG86IHRyYW5zaXRpb25UbyxcbiAgICBwdXNoOiBwdXNoLFxuICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgZ286IGdvLFxuICAgIGdvQmFjazogZ29CYWNrLFxuICAgIGdvRm9yd2FyZDogZ29Gb3J3YXJkLFxuICAgIGNyZWF0ZUtleTogY3JlYXRlS2V5LFxuICAgIGNyZWF0ZVBhdGg6IGNyZWF0ZVBhdGgsXG4gICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZixcbiAgICBjcmVhdGVMb2NhdGlvbjogY3JlYXRlTG9jYXRpb24sXG5cbiAgICBzZXRTdGF0ZTogX2RlcHJlY2F0ZTJbJ2RlZmF1bHQnXShzZXRTdGF0ZSwgJ3NldFN0YXRlIGlzIGRlcHJlY2F0ZWQ7IHVzZSBsb2NhdGlvbi5rZXkgdG8gc2F2ZSBzdGF0ZSBpbnN0ZWFkJyksXG4gICAgcmVnaXN0ZXJUcmFuc2l0aW9uSG9vazogX2RlcHJlY2F0ZTJbJ2RlZmF1bHQnXShyZWdpc3RlclRyYW5zaXRpb25Ib29rLCAncmVnaXN0ZXJUcmFuc2l0aW9uSG9vayBpcyBkZXByZWNhdGVkOyB1c2UgbGlzdGVuQmVmb3JlIGluc3RlYWQnKSxcbiAgICB1bnJlZ2lzdGVyVHJhbnNpdGlvbkhvb2s6IF9kZXByZWNhdGUyWydkZWZhdWx0J10odW5yZWdpc3RlclRyYW5zaXRpb25Ib29rLCAndW5yZWdpc3RlclRyYW5zaXRpb25Ib29rIGlzIGRlcHJlY2F0ZWQ7IHVzZSB0aGUgY2FsbGJhY2sgcmV0dXJuZWQgZnJvbSBsaXN0ZW5CZWZvcmUgaW5zdGVhZCcpLFxuICAgIHB1c2hTdGF0ZTogX2RlcHJlY2F0ZTJbJ2RlZmF1bHQnXShwdXNoU3RhdGUsICdwdXNoU3RhdGUgaXMgZGVwcmVjYXRlZDsgdXNlIHB1c2ggaW5zdGVhZCcpLFxuICAgIHJlcGxhY2VTdGF0ZTogX2RlcHJlY2F0ZTJbJ2RlZmF1bHQnXShyZXBsYWNlU3RhdGUsICdyZXBsYWNlU3RhdGUgaXMgZGVwcmVjYXRlZDsgdXNlIHJlcGxhY2UgaW5zdGVhZCcpXG4gIH07XG59XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNyZWF0ZUhpc3Rvcnk7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIvL2ltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF9BY3Rpb25zID0gcmVxdWlyZSgnLi9BY3Rpb25zJyk7XG5cbnZhciBfcGFyc2VQYXRoID0gcmVxdWlyZSgnLi9wYXJzZVBhdGgnKTtcblxudmFyIF9wYXJzZVBhdGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyc2VQYXRoKTtcblxuZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24oKSB7XG4gIHZhciBsb2NhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/ICcvJyA6IGFyZ3VtZW50c1swXTtcbiAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IF9BY3Rpb25zLlBPUCA6IGFyZ3VtZW50c1sxXTtcbiAgdmFyIGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBhcmd1bWVudHNbMl07XG5cbiAgdmFyIF9mb3VydGhBcmcgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyBudWxsIDogYXJndW1lbnRzWzNdO1xuXG4gIGlmICh0eXBlb2YgbG9jYXRpb24gPT09ICdzdHJpbmcnKSBsb2NhdGlvbiA9IF9wYXJzZVBhdGgyWydkZWZhdWx0J10obG9jYXRpb24pO1xuXG4gIGlmICh0eXBlb2YgYWN0aW9uID09PSAnb2JqZWN0Jykge1xuICAgIC8vd2FybmluZyhcbiAgICAvLyAgZmFsc2UsXG4gICAgLy8gICdUaGUgc3RhdGUgKDJuZCkgYXJndW1lbnQgdG8gY3JlYXRlTG9jYXRpb24gaXMgZGVwcmVjYXRlZDsgdXNlIGEgJyArXG4gICAgLy8gICdsb2NhdGlvbiBkZXNjcmlwdG9yIGluc3RlYWQnXG4gICAgLy8pXG5cbiAgICBsb2NhdGlvbiA9IF9leHRlbmRzKHt9LCBsb2NhdGlvbiwgeyBzdGF0ZTogYWN0aW9uIH0pO1xuXG4gICAgYWN0aW9uID0ga2V5IHx8IF9BY3Rpb25zLlBPUDtcbiAgICBrZXkgPSBfZm91cnRoQXJnO1xuICB9XG5cbiAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUgfHwgJy8nO1xuICB2YXIgc2VhcmNoID0gbG9jYXRpb24uc2VhcmNoIHx8ICcnO1xuICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2ggfHwgJyc7XG4gIHZhciBzdGF0ZSA9IGxvY2F0aW9uLnN0YXRlIHx8IG51bGw7XG5cbiAgcmV0dXJuIHtcbiAgICBwYXRobmFtZTogcGF0aG5hbWUsXG4gICAgc2VhcmNoOiBzZWFyY2gsXG4gICAgaGFzaDogaGFzaCxcbiAgICBzdGF0ZTogc3RhdGUsXG4gICAgYWN0aW9uOiBhY3Rpb24sXG4gICAga2V5OiBrZXlcbiAgfTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gY3JlYXRlTG9jYXRpb247XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIvL2ltcG9ydCB3YXJuaW5nIGZyb20gJ3dhcm5pbmcnXG5cblwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZnVuY3Rpb24gZGVwcmVjYXRlKGZuKSB7XG4gIHJldHVybiBmbjtcbiAgLy9yZXR1cm4gZnVuY3Rpb24gKCkge1xuICAvLyAgd2FybmluZyhmYWxzZSwgJ1toaXN0b3J5XSAnICsgbWVzc2FnZSlcbiAgLy8gIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gIC8vfVxufVxuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGRlcHJlY2F0ZTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBleHRyYWN0UGF0aChzdHJpbmcpIHtcbiAgdmFyIG1hdGNoID0gc3RyaW5nLm1hdGNoKC9eaHR0cHM/OlxcL1xcL1teXFwvXSovKTtcblxuICBpZiAobWF0Y2ggPT0gbnVsbCkgcmV0dXJuIHN0cmluZztcblxuICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xufVxuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGV4dHJhY3RQYXRoO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTsiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfZXh0cmFjdFBhdGggPSByZXF1aXJlKCcuL2V4dHJhY3RQYXRoJyk7XG5cbnZhciBfZXh0cmFjdFBhdGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0cmFjdFBhdGgpO1xuXG5mdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICB2YXIgcGF0aG5hbWUgPSBfZXh0cmFjdFBhdGgyWydkZWZhdWx0J10ocGF0aCk7XG4gIHZhciBzZWFyY2ggPSAnJztcbiAgdmFyIGhhc2ggPSAnJztcblxuICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gX3dhcm5pbmcyWydkZWZhdWx0J10ocGF0aCA9PT0gcGF0aG5hbWUsICdBIHBhdGggbXVzdCBiZSBwYXRobmFtZSArIHNlYXJjaCArIGhhc2ggb25seSwgbm90IGEgZnVsbHkgcXVhbGlmaWVkIFVSTCBsaWtlIFwiJXNcIicsIHBhdGgpIDogdW5kZWZpbmVkO1xuXG4gIHZhciBoYXNoSW5kZXggPSBwYXRobmFtZS5pbmRleE9mKCcjJyk7XG4gIGlmIChoYXNoSW5kZXggIT09IC0xKSB7XG4gICAgaGFzaCA9IHBhdGhuYW1lLnN1YnN0cmluZyhoYXNoSW5kZXgpO1xuICAgIHBhdGhuYW1lID0gcGF0aG5hbWUuc3Vic3RyaW5nKDAsIGhhc2hJbmRleCk7XG4gIH1cblxuICB2YXIgc2VhcmNoSW5kZXggPSBwYXRobmFtZS5pbmRleE9mKCc/Jyk7XG4gIGlmIChzZWFyY2hJbmRleCAhPT0gLTEpIHtcbiAgICBzZWFyY2ggPSBwYXRobmFtZS5zdWJzdHJpbmcoc2VhcmNoSW5kZXgpO1xuICAgIHBhdGhuYW1lID0gcGF0aG5hbWUuc3Vic3RyaW5nKDAsIHNlYXJjaEluZGV4KTtcbiAgfVxuXG4gIGlmIChwYXRobmFtZSA9PT0gJycpIHBhdGhuYW1lID0gJy8nO1xuXG4gIHJldHVybiB7XG4gICAgcGF0aG5hbWU6IHBhdGhuYW1lLFxuICAgIHNlYXJjaDogc2VhcmNoLFxuICAgIGhhc2g6IGhhc2hcbiAgfTtcbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gcGFyc2VQYXRoO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBydW5UcmFuc2l0aW9uSG9vayhob29rLCBsb2NhdGlvbiwgY2FsbGJhY2spIHtcbiAgdmFyIHJlc3VsdCA9IGhvb2sobG9jYXRpb24sIGNhbGxiYWNrKTtcblxuICBpZiAoaG9vay5sZW5ndGggPCAyKSB7XG4gICAgLy8gQXNzdW1lIHRoZSBob29rIHJ1bnMgc3luY2hyb25vdXNseSBhbmQgYXV0b21hdGljYWxseVxuICAgIC8vIGNhbGwgdGhlIGNhbGxiYWNrIHdpdGggdGhlIHJldHVybiB2YWx1ZS5cbiAgICBjYWxsYmFjayhyZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBfd2FybmluZzJbJ2RlZmF1bHQnXShyZXN1bHQgPT09IHVuZGVmaW5lZCwgJ1lvdSBzaG91bGQgbm90IFwicmV0dXJuXCIgaW4gYSB0cmFuc2l0aW9uIGhvb2sgd2l0aCBhIGNhbGxiYWNrIGFyZ3VtZW50OyBjYWxsIHRoZSBjYWxsYmFjayBpbnN0ZWFkJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZXhwb3J0c1snZGVmYXVsdCddID0gcnVuVHJhbnNpdGlvbkhvb2s7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107IH0pXG4gICAgICApO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBpc1Byb21pc2U7XG5cbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmopIHtcbiAgcmV0dXJuICEhb2JqICYmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIHRyYW5zbWl0dGVyKCkge1xuICB2YXIgc3Vic2NyaXB0aW9ucyA9IFtdO1xuICB2YXIgbm93RGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgdmFyIHRvVW5zdWJzY3JpYmUgPSB7fTtcblxuICB2YXIgdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShvbkNoYW5nZSkge1xuICAgIHZhciBpZCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihvbkNoYW5nZSk7XG4gICAgaWYgKGlkIDwgMCkgcmV0dXJuO1xuICAgIGlmIChub3dEaXNwYXRjaGluZykge1xuICAgICAgdG9VbnN1YnNjcmliZVtpZF0gPSBvbkNoYW5nZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3Vic2NyaXB0aW9ucy5zcGxpY2UoaWQsIDEpO1xuICB9O1xuXG4gIHZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUob25DaGFuZ2UpIHtcbiAgICB2YXIgaWQgPSBzdWJzY3JpcHRpb25zLnB1c2gob25DaGFuZ2UpO1xuICAgIHZhciBkaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgIHJldHVybiB1bnN1YnNjcmliZShvbkNoYW5nZSk7XG4gICAgfTtcbiAgICByZXR1cm4geyBkaXNwb3NlOiBkaXNwb3NlIH07XG4gIH07XG5cbiAgdmFyIHB1Ymxpc2ggPSBmdW5jdGlvbiBwdWJsaXNoKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIG5vd0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24sIGlkKSB7XG4gICAgICAgIHJldHVybiB0b1Vuc3Vic2NyaWJlW2lkXSB8fCBzdWJzY3JpcHRpb24uYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBub3dEaXNwYXRjaGluZyA9IGZhbHNlO1xuICAgICAgT2JqZWN0LmtleXModG9VbnN1YnNjcmliZSkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlKHRvVW5zdWJzY3JpYmVbaWRdKTtcbiAgICAgIH0pO1xuICAgICAgdG9VbnN1YnNjcmliZSA9IHt9O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHB1Ymxpc2g6IHB1Ymxpc2gsXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgJHN1YnNjcmlwdGlvbnM6IHN1YnNjcmlwdGlvbnNcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFuc21pdHRlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbFxuICogcGF0aHMuIFJlbW92aW5nIHRoZSBsb2dnaW5nIGNvZGUgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRzIHdpbGwga2VlcCB0aGVcbiAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLlxuICovXG5cbnZhciB3YXJuaW5nID0gZnVuY3Rpb24oKSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgd2FybmluZyA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgZm9ybWF0LCBhcmdzKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgYXJncyA9IG5ldyBBcnJheShsZW4gPiAyID8gbGVuIC0gMiA6IDApO1xuICAgIGZvciAodmFyIGtleSA9IDI7IGtleSA8IGxlbjsga2V5KyspIHtcbiAgICAgIGFyZ3Nba2V5IC0gMl0gPSBhcmd1bWVudHNba2V5XTtcbiAgICB9XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdgd2FybmluZyhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyAnICtcbiAgICAgICAgJ21lc3NhZ2UgYXJndW1lbnQnXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXQubGVuZ3RoIDwgMTAgfHwgKC9eW3NcXFddKiQvKS50ZXN0KGZvcm1hdCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1RoZSB3YXJuaW5nIGZvcm1hdCBzaG91bGQgYmUgYWJsZSB0byB1bmlxdWVseSBpZGVudGlmeSB0aGlzICcgK1xuICAgICAgICAnd2FybmluZy4gUGxlYXNlLCB1c2UgYSBtb3JlIGRlc2NyaXB0aXZlIGZvcm1hdCB0aGFuOiAnICsgZm9ybWF0XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArXG4gICAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gYXJnc1thcmdJbmRleCsrXTtcbiAgICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IHlvdSBjYW4gdXNlIHRoaXMgc3RhY2tcbiAgICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIH0gY2F0Y2goeCkge31cbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybmluZztcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5cclxuY2xhc3MgRm9ybUFjdGlvbnMge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuZ2VuZXJhdGVBY3Rpb25zKFxyXG4gICAgICAnaGFuZGxlVXNlcm5hbWVDaGFuZ2UnLFxyXG4gICAgICAnaGFuZGxlUGFzc3dvcmRDaGFuZ2UnLFxyXG4gICAgICAnaGFuZGxlQ29uZmlybWVkUGFzc3dvcmRDaGFuZ2UnLFxyXG4gICAgICAnaGFuZGxlRmlyc3ROYW1lQ2hhbmdlJyxcclxuICAgICAgJ2hhbmRsZUxhc3ROYW1lQ2hhbmdlJyxcclxuICAgICAgJ2hhbmRsZUFnZUNoYW5nZScsXHJcbiAgICAgICdoYW5kbGVHZW5kZXJDaGFuZ2UnLFxyXG4gICAgICAndXNlcm5hbWVWYWxpZGF0aW9uRmFpbCcsXHJcbiAgICAgICdwYXNzd29yZFZhbGlkYXRpb25GYWlsJyxcclxuICAgICAgJ3VuYXV0aG9yaXplZEFjY2Vzc0F0dGVtcHQnLFxyXG4gICAgICAnaGFuZGxlQ29tbWVudENoYW5nZScsXHJcbiAgICAgICdjb21tZW50VmFsaWRhdGlvbkZhaWwnLFxyXG4gICAgICAnaGFuZGxlU2NvcmVDaGFuZ2UnLFxyXG4gICAgICAnc2NvcmVWYWxpZGF0aW9uRmFpbCdcclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKEZvcm1BY3Rpb25zKVxyXG4iLCJpbXBvcnQgYWx0IGZyb20gJy4uL2FsdCdcclxuXHJcbmltcG9ydCBUTURCIGZyb20gJy4uL3V0aWxpdGllcy9SZXF1ZXN0ZXJUTURCJ1xyXG5cclxuY2xhc3MgTW92aWVBY3Rpb25zIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmdlbmVyYXRlQWN0aW9ucyhcclxuICAgICAgJ2dldFRvcFRlbk1vdmllc1N1Y2Nlc3MnLFxyXG4gICAgICAnZ2V0VG9wVGVuTW92aWVzRmFpbCcsXHJcbiAgICAgICdnZXRGaXZlUmVjZW50TW92aWVzU3VjY2VzcycsXHJcbiAgICAgICdnZXRGaXZlUmVjZW50TW92aWVzRmFpbCcsXHJcbiAgICAgICdlbXB0eVRvcFRlbk1vdmllcycsXHJcbiAgICAgICdhZGRNb3ZpZVRvVG9wVGVuJyxcclxuICAgICAgJ2FkZENvbW1lbnRTdWNjZXNzJyxcclxuICAgICAgJ2FkZENvbW1lbnRGYWlsJyxcclxuICAgICAgJ2FkZFZvdGVTdWNjZXNzJyxcclxuICAgICAgJ2FkZFZvdGVGYWlsJ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0Rml2ZVJlY2VudE1vdmllcyAoKSB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IHtcclxuICAgICAgbWV0aG9kOiAnZ2V0JyxcclxuICAgICAgdXJsOiAnL2FwaS9tb3ZpZXMvZml2ZS1yZWNlbnQnXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHJlcXVlc3QpXHJcbiAgICAgIC5kb25lKGRhdGEgPT4gdGhpcy5nZXRGaXZlUmVjZW50TW92aWVzU3VjY2VzcyhkYXRhKSlcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgZ2V0VG9wVGVuTW92aWVzICgpIHtcclxuICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6ICcvYXBpL21vdmllcy90b3AtdGVuJyxcclxuICAgICAgbWV0aG9kOiAnZ2V0J1xyXG4gICAgfVxyXG4gICAgJC5hamF4KHJlcXVlc3QpXHJcbiAgICAgIC5kb25lKChwYXlsb2FkKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbXB0eVRvcFRlbk1vdmllcygpXHJcbiAgICAgICAgZm9yIChsZXQgbW92aWUgb2YgcGF5bG9hZCkge1xyXG4gICAgICAgICAgbGV0IG1vdmllRGF0YSA9IHtcclxuICAgICAgICAgICAgX2lkOiBtb3ZpZS5faWQsXHJcbiAgICAgICAgICAgIG5hbWU6IG1vdmllLm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBtb3ZpZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgZ2VucmVzOiBtb3ZpZS5nZW5yZXMsXHJcbiAgICAgICAgICAgIHZvdGVzOiBtb3ZpZS52b3RlcyxcclxuICAgICAgICAgICAgc2NvcmU6IG1vdmllLnNjb3JlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgVE1EQi5nZXRNb3ZpZVBvc3Rlcihtb3ZpZS5uYW1lKVxyXG4gICAgICAgICAgICAudGhlbigodG1kYlJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgbW92aWVEYXRhLm1vdmllUG9zdGVyVXJsID0gdG1kYlJlc3BvbnNlLnBvc3RlclVybFxyXG5cclxuICAgICAgICAgICAgICBnZXRDb21tZW50cyhtb3ZpZS5faWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoY29tbWVudHMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgbW92aWVEYXRhLmNvbW1lbnRzID0gY29tbWVudHNcclxuXHJcbiAgICAgICAgICAgICAgICAgIGdldExvZ2dlZEluVXNlclZvdGUobW92aWUuX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCh2b3RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBtb3ZpZURhdGEubG9nZ2VkSW5Vc2VyU2NvcmUgPSB2b3RlLnZvdGVTY29yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNb3ZpZVRvVG9wVGVuKG1vdmllRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5mYWlsKGVyciA9PiB0aGlzLmdldFRvcFRlbk1vdmllc0ZhaWwoZXJyKSlcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgYWRkQ29tbWVudCAobW92aWVJZCwgY29tbWVudCkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgIHVybDogYC9hcGkvbW92aWVzLyR7bW92aWVJZH0vY29tbWVudHNgLFxyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe2NvbnRlbnQ6IGNvbW1lbnR9KVxyXG4gICAgfVxyXG4gICAgJC5hamF4KHJlcXVlc3QpXHJcbiAgICAgIC5kb25lKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy5hZGRDb21tZW50U3VjY2VzcyhkYXRhKVxyXG4gICAgICB9KVxyXG4gICAgICAuZmFpbChlcnIgPT4gdGhpcy5hZGRDb21tZW50RmFpbChlcnIucmVzcG9uc2VKU09OKSlcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgYWRkVm90ZSAobW92aWVJZCwgc2NvcmUpIHtcclxuICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6IGAvYXBpL21vdmllcy8ke21vdmllSWR9L3ZvdGVgLFxyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe3Njb3JlfSlcclxuICAgIH1cclxuXHJcbiAgICAkLmFqYXgocmVxdWVzdClcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBkYXRhLm1vdmllSWQgPSBtb3ZpZUlkXHJcbiAgICAgICAgdGhpcy5hZGRWb3RlU3VjY2VzcyhkYXRhKVxyXG4gICAgICB9KVxyXG4gICAgICAuZmFpbChlcnIgPT4gdGhpcy5hZGRWb3RlRmFpbChlcnIucmVzcG9uc2VKU09OKSlcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZUFjdGlvbnMoTW92aWVBY3Rpb25zKVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29tbWVudHMgKG1vdmllSWQpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgIHVybDogYC9hcGkvbW92aWVzLyR7bW92aWVJZH0vY29tbWVudHNgLFxyXG4gICAgICBtZXRob2Q6ICdnZXQnXHJcbiAgICB9XHJcbiAgICAkLmFqYXgocmVxdWVzdClcclxuICAgICAgLmRvbmUoZGF0YSA9PiByZXNvbHZlKGRhdGEpKVxyXG4gICAgICAuZmFpbChlcnIgPT4gcmVqZWN0KGVycikpXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TG9nZ2VkSW5Vc2VyVm90ZSAobW92aWVJZCwgdXNlcklkKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IHtcclxuICAgICAgbWV0aG9kOiAnZ2V0J1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh1c2VySWQpIHtcclxuICAgICAgcmVxdWVzdC51cmwgPSBgL2FwaS9tb3ZpZXMvJHttb3ZpZUlkfS92b3RlP3VzZXJJZD0ke3VzZXJJZH1gXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXF1ZXN0LnVybCA9IGAvYXBpL21vdmllcy8ke21vdmllSWR9L3ZvdGU/dXNlcj1sb2dnZWRJblVzZXJgXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHJlcXVlc3QpLmRvbmUoZGF0YSA9PiByZXNvbHZlKGRhdGEpKVxyXG4gIH0pXHJcbn1cclxuIiwiaW1wb3J0IGFsdCBmcm9tICcuLi9hbHQnXHJcblxyXG5jbGFzcyBNb3ZpZUFkZEFjdGlvbnMge1xyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHRoaXMuZ2VuZXJhdGVBY3Rpb25zKFxyXG4gICAgICAnaGFuZGxlTmFtZUNoYW5nZScsXHJcbiAgICAgICdoYW5kbGVEZXNjcmlwdGlvbkNoYW5nZScsXHJcbiAgICAgICdoYW5kbGVHZW5yZXNDaGFuZ2UnLFxyXG4gICAgICAnbmFtZVZhbGlkYXRpb25GYWlsJyxcclxuICAgICAgJ2dlbnJlc1ZhbGlkYXRpb25GYWlsJyxcclxuICAgICAgJ2FkZE1vdmllU3VjY2VzcycsXHJcbiAgICAgICdhZGRNb3ZpZUZhaWwnXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBhZGRNb3ZpZSAoZGF0YSkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgIHVybDogJy9hcGkvbW92aWVzL2FkZCcsXHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgfVxyXG5cclxuICAgICQuYWpheChyZXF1ZXN0KVxyXG4gICAgICAuZG9uZSgoKSA9PiB0aGlzLmFkZE1vdmllU3VjY2VzcygpKVxyXG4gICAgICAuZmFpbCgoZXJyKSA9PiB0aGlzLmFkZE1vdmllRmFpbChlcnIpKVxyXG5cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhbHQuY3JlYXRlQWN0aW9ucyhNb3ZpZUFkZEFjdGlvbnMpXHJcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5cclxuY2xhc3MgTmF2YmFyQWN0aW9ucyB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5nZW5lcmF0ZUFjdGlvbnMoXHJcbiAgICAgICd1cGRhdGVBamF4QW5pbWF0aW9uJ1xyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZUFjdGlvbnMoTmF2YmFyQWN0aW9ucylcclxuIiwiaW1wb3J0IGFsdCBmcm9tICcuLi9hbHQnXHJcblxyXG5jbGFzcyBVc2VyQWN0aW9ucyB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5nZW5lcmF0ZUFjdGlvbnMoXHJcbiAgICAgICdyZWdpc3RlclVzZXJTdWNjZXNzJyxcclxuICAgICAgJ3JlZ2lzdGVyVXNlckZhaWwnLFxyXG4gICAgICAnbG9naW5Vc2VyU3VjY2VzcycsXHJcbiAgICAgICdsb2dpblVzZXJGYWlsJyxcclxuICAgICAgJ2xvZ291dFVzZXJTdWNjZXNzJ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJVc2VyIChkYXRhKSB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IHtcclxuICAgICAgdXJsOiAnL3VzZXIvcmVnaXN0ZXInLFxyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxuICAgICQuYWpheChyZXF1ZXN0KVxyXG4gICAgICAuZG9uZSgoKSA9PiB0aGlzLnJlZ2lzdGVyVXNlclN1Y2Nlc3MpXHJcbiAgICAgIC5mYWlsKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCBlcnIpXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclVzZXJGYWlsKGVyci5yZXNwb25zZUpTT04ubWVzc2FnZSlcclxuICAgICAgfSlcclxuXHJcbiAgICByZXR1cm4gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgbG9naW5Vc2VyIChkYXRhKSB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IHtcclxuICAgICAgdXJsOiAnL3VzZXIvbG9naW4nLFxyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxuXHJcbiAgICAkLmFqYXgocmVxdWVzdClcclxuICAgICAgLmRvbmUoKGRhdGEpID0+IHtcclxuICAgICAgICB0aGlzLmxvZ2luVXNlclN1Y2Nlc3MoZGF0YSlcclxuICAgICAgfSlcclxuICAgICAgLmZhaWwoKGVycikgPT4ge1xyXG4gICAgICAgIHRoaXMubG9naW5Vc2VyRmFpbChlcnIucmVzcG9uc2VKU09OKVxyXG4gICAgICB9KVxyXG5cclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBsb2dvdXRVc2VyICgpIHtcclxuICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6ICcvdXNlci9sb2dvdXQnLFxyXG4gICAgICBtZXRob2Q6ICdwb3N0J1xyXG4gICAgfVxyXG5cclxuICAgICQuYWpheChyZXF1ZXN0KVxyXG4gICAgICAuZG9uZSgoKSA9PiB0aGlzLmxvZ291dFVzZXJTdWNjZXNzKCkpXHJcblxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVBY3Rpb25zKFVzZXJBY3Rpb25zKVxyXG4iLCJpbXBvcnQgQWx0IGZyb20gJ2FsdCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBBbHQoKVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcblxyXG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJy4uL3N0b3Jlcy9Vc2VyU3RvcmUnXHJcblxyXG5pbXBvcnQgTmF2YmFyIGZyb20gJy4vTmF2YmFyJ1xyXG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vRm9vdGVyJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSBVc2VyU3RvcmUuZ2V0U3RhdGUoKVxyXG5cclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlIChzdGF0ZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcclxuICAgIFVzZXJTdG9yZS5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIFVzZXJTdG9yZS51bmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgbG9nb3V0VXNlciAoKSB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IHtcclxuICAgICAgdXJsOiAnL3VzZXIvbG9nb3V0JyxcclxuICAgICAgbWV0aG9kOiAncG9zdCdcclxuICAgIH1cclxuXHJcbiAgICAkLmFqYXgocmVxdWVzdClcclxuICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgbG9nZ2VkSW5Vc2VySWQ6ICcnXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLmZhaWwoKGVycikgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgZXJyb3I6IGVyci5yZXNwb25zZUpTT04ubWVzc2FnZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgLy8gY29uc29sZS5sb2coJ0FwcC5qcycpXHJcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb3BzLmNoaWxkcmVuKVxyXG4gICAgLy8gY29uc29sZS5sb2coJ0FwcC5qcycpXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdj5cclxuICAgICAgICA8TmF2YmFyIC8+XHJcbiAgICAgICAgeyB0aGlzLnByb3BzLmNoaWxkcmVuIH1cclxuICAgICAgICA8Rm9vdGVyIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXInXHJcblxyXG5pbXBvcnQgTW92aWVBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvTW92aWVBY3Rpb25zJ1xyXG5pbXBvcnQgTW92aWVTdG9yZSBmcm9tICcuLi9zdG9yZXMvTW92aWVTdG9yZSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvb3RlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICB0aGlzLnN0YXRlID0gTW92aWVTdG9yZS5nZXRTdGF0ZSgpXHJcblxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgTW92aWVTdG9yZS5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuXHJcbiAgICBNb3ZpZUFjdGlvbnMuZ2V0Rml2ZVJlY2VudE1vdmllcygpXHJcbiAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gTW92aWVBY3Rpb25zLmdldEZpdmVSZWNlbnRNb3ZpZXMoKSwgNTAwMClcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIE1vdmllU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbClcclxuICB9XHJcblxyXG4gIGdldEZpdmVSZWNlbnRNb3ZpZXMgKCkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgIG1ldGhvZDogJ2dldCcsXHJcbiAgICAgIHVybDogJ2FwaS9tb3ZpZXMvZml2ZS1yZWNlbnQnXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHJlcXVlc3QpXHJcbiAgICAgIC5kb25lKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBtb3N0UmVjZW50TW92aWVzOiBkYXRhXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLmZhaWwoZXJyID0+IHRvYXN0ci5lcnJvcihlcnIucmVzcG9uc2VKU09OLm1lc3NhZ2UpKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGxldCBtb3N0UmVjZW50TW92aWVzID0gdGhpcy5zdGF0ZS5tb3N0UmVjZW50TW92aWVzLm1hcCgobW92aWUpID0+IHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8bGkga2V5PXttb3ZpZS5faWR9PlxyXG4gICAgICAgICAgPExpbmsgdG89e2AvLi4uYH0+e21vdmllLm5hbWV9PC9MaW5rPlxyXG4gICAgICAgIDwvbGk+XHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGZvb3Rlcj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyJz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb3cnPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTUnPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J2xlYWQnPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz5JbmZvcm1hdGlvbjwvc3Ryb25nPiBhbmRcclxuICAgICAgICAgICAgICAgIDxzdHJvbmc+IENvcHlyaWdodDwvc3Ryb25nPlxyXG4gICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICBQb3dlcmVkIGJ5XHJcbiAgICAgICAgICAgICAgICA8c3Ryb25nPiBFeHByZXNzPC9zdHJvbmc+XHJcbiAgICAgICAgICAgICAgICA8c3Ryb25nPiBNb25nb0RiPC9zdHJvbmc+XHJcbiAgICAgICAgICAgICAgICA8c3Ryb25nPiBSZWFjdDwvc3Ryb25nPlxyXG4gICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICA8cD4mY29weTsgMjAxNyBTb2Z0VW5pLjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNCBoaWRkZW4teHMnPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J2xlYWQnPlxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz5OZXdlc3Q8L3N0cm9uZz4gNSBNb3ZpZXNcclxuICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J2xpc3QtaW5saW5lJz5cclxuICAgICAgICAgICAgICAgIHttb3N0UmVjZW50TW92aWVzfVxyXG4gICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTMnPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J2xlYWQnPkF1dGhvcjwvaDM+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj0naHR0cHM6Ly9naXRodWIuY29tL0N2ZXRhblBldGtvdic+XHJcbiAgICAgICAgICAgICAgICA8c3Ryb25nPiBDdmV0YW4gUGV0a292PC9zdHJvbmc+XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Zvb3Rlcj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuaW1wb3J0IE1vdmllQWN0aW9uIGZyb20gJy4uL2FjdGlvbnMvTW92aWVBY3Rpb25zJ1xyXG5pbXBvcnQgTW92aWVTdG9yZSBmcm9tICcuLi9zdG9yZXMvTW92aWVTdG9yZSdcclxuXHJcbmltcG9ydCBNb3ZpZUNhcmQgZnJvbSAnLi9zdWItY29tcG9uZW50cy9Nb3ZpZUNhcmQnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSBNb3ZpZVN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBNb3ZpZVN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG5cclxuICAgIE1vdmllQWN0aW9uLmdldFRvcFRlbk1vdmllcygpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XHJcbiAgICBNb3ZpZVN0b3JlLnVubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgbGV0IG1vdmllcyA9IHRoaXMuc3RhdGUudG9wVGVuTW92aWVzLm1hcCgobW92aWUsIGluZGV4KSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPE1vdmllQ2FyZFxyXG4gICAgICAgICAga2V5PXttb3ZpZS5faWR9XHJcbiAgICAgICAgICBtb3ZpZT17bW92aWV9XHJcbiAgICAgICAgICBpbmRleD17aW5kZXh9IC8+XHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbnRhaW5lcic+XHJcbiAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1jZW50ZXInPldlbGNvbWUgdG9cclxuICAgICAgICAgIDxzdHJvbmc+IE1vdmllIERhdGFiYXNlPC9zdHJvbmc+XHJcbiAgICAgICAgPC9oMz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdC1ncm91cCc+XHJcbiAgICAgICAgICB7bW92aWVzfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuaW1wb3J0IE1vdmllQWRkQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL01vdmllQWRkQWN0aW9ucydcclxuaW1wb3J0IE1vdmllQWRkU3RvcmUgZnJvbSAnLi4vc3RvcmVzL01vdmllQWRkU3RvcmUnXHJcblxyXG5pbXBvcnQgSGVscGVycyBmcm9tICcuLi91dGlsaXRpZXMvSGVscGVycydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkZE1vdmllIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSBNb3ZpZUFkZFN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBNb3ZpZUFkZFN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgTW92aWVBZGRTdG9yZS51bmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU3VibWl0IChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KClcclxuXHJcbiAgICBsZXQgbmFtZSA9IHRoaXMuc3RhdGUubmFtZS50cmltKClcclxuICAgIGxldCBnZW5yZXMgPSB0aGlzLnN0YXRlLmdlbnJlc1xyXG4gICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgIE1vdmllQWRkQWN0aW9ucy5uYW1lVmFsaWRhdGlvbkZhaWwoKVxyXG4gICAgfVxyXG4gICAgaWYgKGdlbnJlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgTW92aWVBZGRBY3Rpb25zLmdlbnJlc1ZhbGlkYXRpb25GYWlsKClcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICBuYW1lOiB0aGlzLnN0YXRlLm5hbWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuc3RhdGUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgZ2VucmVzOiB0aGlzLnN0YXRlLmdlbnJlc1xyXG4gICAgICB9XHJcblxyXG4gICAgICBNb3ZpZUFkZEFjdGlvbnMuYWRkTW92aWUoZGF0YSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZU5hbWVDaGFuZ2UgKGUpIHtcclxuICAgIGxldCBuYW1lID0gZS50YXJnZXQudmFsdWVcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBuYW1lOiBuYW1lXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVzY3JpcHRpb25DaGFuZ2UgKGUpIHtcclxuICAgIGxldCBkZXNjcmlwdGlvbiA9IGUudGFyZ2V0LnZhbHVlXHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlR2VucmVzQ2hhbmdlIChlKSB7XHJcbiAgICBsZXQgZ2VucmVWYWx1ZSA9IGUudGFyZ2V0LnZhbHVlXHJcbiAgICBjb25zb2xlLmxvZygnTW92aWVBZGQgc3RhdGUnLCB0aGlzLnN0YXRlKVxyXG4gICAgaWYgKHRoaXMuc3RhdGUuZ2VucmVzLmluZGV4T2YoZ2VucmVWYWx1ZSkgPT09IC0xKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+ICh7XHJcbiAgICAgICAgZ2VucmVzOiBIZWxwZXJzLmFwcGVuZFRvQXJyYXkoZ2VucmVWYWx1ZSwgcHJldlN0YXRlLmdlbnJlcylcclxuICAgICAgfSkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiAoe1xyXG4gICAgICAgIGdlbnJlczogSGVscGVycy5yZW1vdmVGcm9tQXJyYXkoZ2VucmVWYWx1ZSwgcHJldlN0YXRlLmdlbnJlcylcclxuICAgICAgfSkpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbnRhaW5lcic+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JvdyBmbGlwSW5YIGFuaW1hdGVkJz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tOCc+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYW5lbCBwYW5lbC1kZWZhdWx0Jz5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtaGVhZGluZyc+QWRkIE1vdmllPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BhbmVsLWJvZHknPlxyXG4gICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcyl9PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J2Zvcm0tZ3JvdXAgJyArIHRoaXMuc3RhdGUubmFtZVZhbGlkYXRpb25TdGF0ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29udHJvbC1sYWJlbCc+TmFtZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJyByZWY9J25hbWVUZXh0RmllbGQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtNb3ZpZUFkZEFjdGlvbnMuaGFuZGxlTmFtZUNoYW5nZX0gYXV0b0ZvY3VzIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdoZWxwLWJsb2NrJz57IHRoaXMuc3RhdGUuaGVscEJsb2NrIH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9ybS1ncm91cCc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29udHJvbC1sYWJlbCc+RGVzY3JpcHRpb248L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz1cIjVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17IHRoaXMuc3RhdGUuZGVzY3JpcHRpb24gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZURlc2NyaXB0aW9uQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9eydmb3JtLWdyb3VwICcgKyB0aGlzLnN0YXRlLmdlbnJlc1ZhbGlkYXRpb25TdGF0ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94IGNoZWNrYm94LWlubGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2dlbnJlcycgaWQ9J2FjdGlvbicgdmFsdWU9J0FjdGlvbidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXsgdGhpcy5zdGF0ZS5nZW5yZXMuaW5kZXhPZignQWN0aW9uJykgIT09IC0xIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtNb3ZpZUFkZEFjdGlvbnMuaGFuZGxlR2VucmVzQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J2FjdGlvbic+QWN0aW9uPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hlY2tib3ggY2hlY2tib3gtaW5saW5lJz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0nZ2VucmVzJyBpZD0naG9ycm9yJyB2YWx1ZT0nSG9ycm9yJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9eyB0aGlzLnN0YXRlLmdlbnJlcy5pbmRleE9mKCdIb3Jyb3InKSAhPT0gLTEgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtNb3ZpZUFkZEFjdGlvbnMuaGFuZGxlR2VucmVzQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J2hvcnJvcic+SG9ycm9yPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hlY2tib3ggY2hlY2tib3gtaW5saW5lJz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0nZ2VucmVzJyBpZD0nc2NpLWZpJyB2YWx1ZT0nU2NpLWZpJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9eyB0aGlzLnN0YXRlLmdlbnJlcy5pbmRleE9mKCdTY2ktZmknKSAhPT0gLTEgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtNb3ZpZUFkZEFjdGlvbnMuaGFuZGxlR2VucmVzQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J3NjaS1maSc+U2NpLWZpPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hlY2tib3ggY2hlY2tib3gtaW5saW5lJz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0nZ2VucmVzJyBpZD0nZmFudGFzeScgdmFsdWU9J0ZhbnRhc3knXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17IHRoaXMuc3RhdGUuZ2VucmVzLmluZGV4T2YoJ0ZhbnRhc3knKSAhPT0gLTEgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtNb3ZpZUFkZEFjdGlvbnMuaGFuZGxlR2VucmVzQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J2ZhbnRhc3knPkZhbnRhc3k8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjaGVja2JveCBjaGVja2JveC1pbmxpbmUnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSdnZW5yZXMnIGlkPSdyb21hbmNlJyB2YWx1ZT0nUm9tYW5jZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXsgdGhpcy5zdGF0ZS5nZW5yZXMuaW5kZXhPZignUm9tYW5jZScpICE9PSAtMSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e01vdmllQWRkQWN0aW9ucy5oYW5kbGVHZW5yZXNDaGFuZ2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0ncm9tYW5jZSc+Um9tYW5jZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94IGNoZWNrYm94LWlubGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2dlbnJlcycgaWQ9J3RocmlsbGVyJyB2YWx1ZT0nVGhyaWxsZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17IHRoaXMuc3RhdGUuZ2VucmVzLmluZGV4T2YoJ1RocmlsbGVyJykgIT09IC0xIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17TW92aWVBZGRBY3Rpb25zLmhhbmRsZUdlbnJlc0NoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPSd0aHJpbGxlcic+VGhyaWxsZXI8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjaGVja2JveCBjaGVja2JveC1pbmxpbmUnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSdnZW5yZXMnIGlkPSdhZHZlbnR1cmUnIHZhbHVlPSdBZHZlbnR1cmUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17IHRoaXMuc3RhdGUuZ2VucmVzLmluZGV4T2YoJ0FkdmVudHVyZScpICE9PSAtMSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e01vdmllQWRkQWN0aW9ucy5oYW5kbGVHZW5yZXNDaGFuZ2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0nYWR2ZW50dXJlJz5BZHZlbnR1cmU8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSdzdWJtaXQnIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5Jz5TdWJtaXQ8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlcidcclxuXHJcbmltcG9ydCBOYXZiYXJBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvTmF2YmFyQWN0aW9ucydcclxuaW1wb3J0IE5hdmJhclN0b3JlIGZyb20gJy4uL3N0b3Jlcy9OYXZiYXJTdG9yZSdcclxuaW1wb3J0IE5hdmJhclVzZXJNZW51IGZyb20gJy4vc3ViLWNvbXBvbmVudHMvTmF2YmFyVXNlck1lbnUnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOYXZiYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IE5hdmJhclN0b3JlLmdldFN0YXRlKClcclxuXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBOYXZiYXJTdG9yZS5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuXHJcbiAgICAkKGRvY3VtZW50KS5hamF4U3RhcnQoKCkgPT4gTmF2YmFyQWN0aW9ucy51cGRhdGVBamF4QW5pbWF0aW9uKCdmYWRlSW4nKSlcclxuXHJcbiAgICAkKGRvY3VtZW50KS5hamF4Q29tcGxldGUoKCkgPT4gTmF2YmFyQWN0aW9ucy51cGRhdGVBamF4QW5pbWF0aW9uKCdmYWRlT3V0JykpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XHJcbiAgICBOYXZiYXJTdG9yZS51bmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdOYXZiYXIuanMnKVxyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9wcylcclxuICAgIC8vIGNvbnNvbGUubG9nKCdOYXZiYXIuanMnKVxyXG5cclxuICAgIGxldCBuYXZiYXJVc2VyTWVudSA9IDxOYXZiYXJVc2VyTWVudSB1c2VyRGF0YT17dGhpcy5wcm9wcy51c2VyRGF0YX0gLz5cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8bmF2IGNsYXNzTmFtZT0nbmF2YmFyIG5hdmJhci1kZWZhdWx0IG5hdmJhci1zdGF0aWMtdG9wJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmF2YmFyLWhlYWRlcic+XHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcclxuICAgICAgICAgICAgY2xhc3NOYW1lPSduYXZiYXItdG9nZ2xlJ1xyXG4gICAgICAgICAgICBkYXRhLXRvZ2dsZT0nY29sbGFwc2UnXHJcbiAgICAgICAgICAgIGRhdGEtdGFyZ2V0PScjbmF2YmFyJz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzci1vbmx5Jz5Ub2dnbGUgbmF2aWdhdGlvbjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdpY29uLWJhcicgLz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdpY29uLWJhcicgLz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdpY29uLWJhcicgLz5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPExpbmsgdG89Jy8nIGNsYXNzTmFtZT0nbmF2YmFyLWJyYW5kJz5cclxuICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICByZWY9J3RyaWFuZ2xlcydcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9eyd0cmlhbmdsZXMgYW5pbWF0ZWQgJyArIHRoaXMuc3RhdGUuYWpheEFuaW1hdGlvbkNsYXNzfT5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJpIGludmVydCcgLz5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJpIGludmVydCcgLz5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJpJyAvPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmkgaW52ZXJ0JyAvPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmkgaW52ZXJ0JyAvPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmknIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyaSBpbnZlcnQnIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyaScgLz5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJpIGludmVydCcgLz5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICBNREJcclxuICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGlkPSduYXZiYXInIGNsYXNzTmFtZT0nbmF2YmFyLWNvbGxhcHNlJz5cclxuICAgICAgICAgIDx1bCBjbGFzc05hbWU9J25hdiBuYXZiYXItbmF2Jz5cclxuICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgIDxMaW5rIHRvPScvJz5Ib21lPC9MaW5rPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgPExpbmsgdG89Jy9tb3ZpZS9hZGQnPkFkZCBNb3ZpZTwvTGluaz5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICB7bmF2YmFyVXNlck1lbnV9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbmF2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcblxyXG5pbXBvcnQgVXNlckFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Vc2VyQWN0aW9ucydcclxuaW1wb3J0IEZvcm1BY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvRm9ybUFjdGlvbnMnXHJcbmltcG9ydCBGb3JtU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0Zvcm1TdG9yZSdcclxuaW1wb3J0IEZvcm0gZnJvbSAnLi9mb3JtL0Zvcm0nXHJcbmltcG9ydCBUZXh0R3JvdXAgZnJvbSAnLi9mb3JtL1RleHRHcm91cCdcclxuaW1wb3J0IFN1Ym1pdCBmcm9tICcuL2Zvcm0vU3VibWl0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckxvZ2luIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSBGb3JtU3RvcmUuZ2V0U3RhdGUoKVxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgRm9ybVN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgRm9ybVN0b3JlLnVubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQgKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGxldCB1c2VybmFtZSA9IHRoaXMuc3RhdGUudXNlcm5hbWVcclxuICAgIGxldCBwYXNzd29yZCA9IHRoaXMuc3RhdGUucGFzc3dvcmRcclxuXHJcbiAgICBpZiAoIXVzZXJuYW1lKSB7XHJcbiAgICAgIEZvcm1BY3Rpb25zLnVzZXJuYW1lVmFsaWRhdGlvbkZhaWwoKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXBhc3N3b3JkKSB7XHJcbiAgICAgIEZvcm1BY3Rpb25zLnBhc3N3b3JkVmFsaWRhdGlvbkZhaWwoKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBVc2VyQWN0aW9ucy5sb2dpblVzZXIoe3VzZXJuYW1lLCBwYXNzd29yZH0pXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEZvcm1cclxuICAgICAgICB0aXRsZT0nbG9naW4nXHJcbiAgICAgICAgaGFuZGxlU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpfVxyXG4gICAgICAgIHN1Ym1pdFN0YXRlPXt0aGlzLnN0YXRlLmZvcm1TdWJtaXRTdGF0ZX1cclxuICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9PlxyXG5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSd0ZXh0J1xyXG4gICAgICAgICAgbGFiZWw9J1VzZXJuYW1lJ1xyXG4gICAgICAgICAgaGFuZGxlQ2hhbmdlPXtGb3JtQWN0aW9ucy5oYW5kbGVVc2VybmFtZUNoYW5nZX1cclxuICAgICAgICAgIHZhbGlkYXRpb25TdGF0ZT17dGhpcy5zdGF0ZS51c2VybmFtZVZhbGlkYXRpb25TdGF0ZX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRHcm91cFxyXG4gICAgICAgICAgdHlwZT0ncGFzc3dvcmQnXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5wYXNzd29yZH1cclxuICAgICAgICAgIGxhYmVsPSdQYXNzd29yZCdcclxuICAgICAgICAgIGhhbmRsZUNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlUGFzc3dvcmRDaGFuZ2V9XHJcbiAgICAgICAgICB2YWxpZGF0aW9uU3RhdGU9e3RoaXMuc3RhdGUucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGV9XHJcbiAgICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9IC8+XHJcblxyXG4gICAgICAgIDxTdWJtaXQgdHlwZT0nYnRuLXByaW1hcnknIHZhbHVlPSdMb2dpbicgLz5cclxuXHJcbiAgICAgIDwvRm9ybT5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJ1xyXG5cclxuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICcuLi9zdG9yZXMvVXNlclN0b3JlJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlclByb2ZpbGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IFVzZXJTdG9yZS5nZXRTdGF0ZSgpXHJcblxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgVXNlclN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgVXNlclN0b3JlLnVubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgbGV0IG5vZGVzID0ge31cclxuICAgIG5vZGVzLnJvbGVzID0gdGhpcy5zdGF0ZS5yb2xlcy5tYXAoKHJvbGUsIGluZGV4KSA9PiB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGg0IGtleT17aW5kZXh9IGNsYXNzTmFtZT0nbGVhZCc+XHJcbiAgICAgICAgICA8c3Ryb25nPntyb2xlfTwvc3Ryb25nPlxyXG4gICAgICAgIDwvaDQ+XHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyIHByb2ZpbGUtY29udGFpbmVyJz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcm9maWxlLWltZyc+XHJcbiAgICAgICAgICAgIDxpbWcgc3JjPScvcHVibGljL2ltYWdlcy91c2VyLWRlZmF1bHQucG5nJyAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJvZmlsZS1pbmZvIGNsZWFyZml4Jz5cclxuICAgICAgICAgICAgPGgyPjxzdHJvbmc+e3RoaXMuc3RhdGUubmFtZX08L3N0cm9uZz48L2gyPlxyXG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdsZWFkJz5Sb2xlczo8L2g0PlxyXG4gICAgICAgICAgICB7bm9kZXMucm9sZXN9XHJcbiAgICAgICAgICAgIDxwPnt0aGlzLnN0YXRlLmluZm9ybWF0aW9ufTwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb250YWluZXIgcHJvZmlsZS1jb250YWluZXInPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Byb2ZpbGUtc3RhdHMgY2xlYXJmaXgnPlxyXG4gICAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzdGF0cy1udW1iZXInPnt0aGlzLnN0YXRlLnZvdGVzfTwvc3Bhbj5cclxuICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHVsbC1yaWdodCBidG4tZ3JvdXAnPlxyXG4gICAgICAgICAgICA8TGluayB0bz0nL3VzZXIvcHJvZmlsZS86dXNlcklkJyBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeScgLz5cclxuICAgICAgICAgICAge3RoaXMuc3RhdGUuc2hvd1JhdGVkTW92aWVzID8gJ0hpZGUnIDogJ1JhdGVkIG1vdmllcyd9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuXHJcbmltcG9ydCBGb3JtQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0Zvcm1BY3Rpb25zJ1xyXG5pbXBvcnQgVXNlckFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Vc2VyQWN0aW9ucydcclxuaW1wb3J0IEZvcm1TdG9yZSBmcm9tICcuLi9zdG9yZXMvRm9ybVN0b3JlJ1xyXG5pbXBvcnQgRm9ybSBmcm9tICcuL2Zvcm0vRm9ybSdcclxuaW1wb3J0IFRleHRHcm91cCBmcm9tICcuL2Zvcm0vVGV4dEdyb3VwJ1xyXG5pbXBvcnQgUmFkaW9Hcm91cCBmcm9tICcuL2Zvcm0vUmFkaW9Hcm91cCdcclxuaW1wb3J0IFJhZGlvRWxlbWVudCBmcm9tICcuL2Zvcm0vUmFkaW9FbGVtZW50J1xyXG5pbXBvcnQgU3VibWl0IGZyb20gJy4vZm9ybS9TdWJtaXQnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyUmVnaXN0ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IEZvcm1TdG9yZS5nZXRTdGF0ZSgpXHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAoc3RhdGUpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBGb3JtU3RvcmUubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XHJcbiAgICBGb3JtU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pdCAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgIHVzZXJuYW1lOiB0aGlzLnN0YXRlLnVzZXJuYW1lLFxyXG4gICAgICBwYXNzd29yZDogdGhpcy5zdGF0ZS5wYXNzd29yZCxcclxuICAgICAgY29uZmlybWVkUGFzc3dvcmQ6IHRoaXMuc3RhdGUuY29uZmlybWVkUGFzc3dvcmQsXHJcbiAgICAgIGZpcnN0TmFtZTogdGhpcy5zdGF0ZS5maXJzdE5hbWUsXHJcbiAgICAgIGxhc3ROYW1lOiB0aGlzLnN0YXRlLmxhc3ROYW1lLFxyXG4gICAgICBhZ2U6IHRoaXMuc3RhdGUuYWdlLFxyXG4gICAgICBnZW5kZXI6IHRoaXMuc3RhdGUuZ2VuZGVyXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhLnVzZXJuYW1lKSB7XHJcbiAgICAgIHJldHVybiBGb3JtQWN0aW9ucy51c2VybmFtZVZhbGlkYXRpb25GYWlsKClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRhdGEucGFzc3dvcmQgfHxcclxuICAgICAgIWRhdGEuY29uZmlybWVkUGFzc3dvcmQgfHxcclxuICAgICAgZGF0YS5wYXNzd29yZCAhPT0gZGF0YS5jb25maXJtZWRQYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gRm9ybUFjdGlvbnMucGFzc3dvcmRWYWxpZGF0aW9uRmFpbCgpXHJcbiAgICB9XHJcblxyXG4gICAgVXNlckFjdGlvbnMucmVnaXN0ZXJVc2VyKGRhdGEpXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEZvcm1cclxuICAgICAgICB0aXRsZT0nUmVnaXN0ZXInXHJcbiAgICAgICAgaGFuZGxlU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpfVxyXG4gICAgICAgIHN1Ym1pdFN0YXRlPXt0aGlzLnN0YXRlLmZvcm1TdWJtaXRTdGF0ZX1cclxuICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9PlxyXG5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSd0ZXh0J1xyXG4gICAgICAgICAgbGFiZWw9J1VzZXJuYW1lJ1xyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXNlcm5hbWV9XHJcbiAgICAgICAgICBhdXRvRm9jdXM9e3RydWV9XHJcbiAgICAgICAgICBoYW5kbGVDaGFuZ2U9e0Zvcm1BY3Rpb25zLmhhbmRsZVVzZXJuYW1lQ2hhbmdlfVxyXG4gICAgICAgICAgdmFsaWRhdGlvblN0YXRlPXt0aGlzLnN0YXRlLnVzZXJuYW1lVmFsaWRhdGlvblN0YXRlfVxyXG4gICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5tZXNzYWdlfSAvPlxyXG5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcclxuICAgICAgICAgIGxhYmVsPSdQYXNzd29yZCdcclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLlBhc3N3b3JkfVxyXG4gICAgICAgICAgaGFuZGxlQ2hhbmdlPXtGb3JtQWN0aW9ucy5oYW5kbGVQYXNzd29yZENoYW5nZX1cclxuICAgICAgICAgIHZhbGlkYXRpb25TdGF0ZT17dGhpcy5zdGF0ZS5wYXNzd29yZFZhbGlkYXRpb25TdGF0ZX1cclxuICAgICAgICAgIG1lc3NhZ2U9e3RoaXMuc3RhdGUubWVzc2FnZX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRHcm91cFxyXG4gICAgICAgICAgdHlwZT0ncGFzc3dvcmQnXHJcbiAgICAgICAgICBsYWJlbD0nQ29uZmlybSBQYXNzd29yZCdcclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmNvbmZpcm1QYXNzd29yZH1cclxuICAgICAgICAgIGhhbmRsZUNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlQ29uZmlybWVkUGFzc3dvcmRDaGFuZ2V9XHJcbiAgICAgICAgICB2YWxpZGF0aW9uU3RhdGU9e3RoaXMuc3RhdGUucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGV9XHJcbiAgICAgICAgICBtZXNzYWdlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9IC8+XHJcblxyXG4gICAgICAgIDxUZXh0R3JvdXBcclxuICAgICAgICAgIHR5cGU9J3RleHQnXHJcbiAgICAgICAgICBsYWJlbD0nRmlyc3QgTmFtZSdcclxuICAgICAgICAgIGhhbmRsZUNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlRmlyc3ROYW1lQ2hhbmdlfVxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZmlyc3ROYW1lfSAvPlxyXG5cclxuICAgICAgICA8VGV4dEdyb3VwXHJcbiAgICAgICAgICB0eXBlPSd0ZXh0J1xyXG4gICAgICAgICAgbGFiZWw9J0xhc3QgTmFtZSdcclxuICAgICAgICAgIGhhbmRsZUNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlTGFzdE5hbWVDaGFuZ2V9XHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5sYXN0TmFtZX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRHcm91cFxyXG4gICAgICAgICAgdHlwZT0nbnVtYmVyJ1xyXG4gICAgICAgICAgbGFiZWw9J0FnZSdcclxuICAgICAgICAgIGhhbmRsZUNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlQWdlQ2hhbmdlfVxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuYWdlfSAvPlxyXG5cclxuICAgICAgICA8UmFkaW9Hcm91cFxyXG4gICAgICAgICAgdmFsaWRhdGlvblN0YXRlPXt0aGlzLnN0YXRlLmdlbmRlclZhbGlkYXRpb25TdGF0ZX1cclxuICAgICAgICAgIG1lc3NhZ2U9e3RoaXMuc3RhdGUubWVzc2FnZX0+XHJcbiAgICAgICAgICA8UmFkaW9FbGVtZW50XHJcbiAgICAgICAgICAgIGdyb3VwTmFtZT0nZ2VuZGVyJ1xyXG4gICAgICAgICAgICB2YWx1ZT0nTWFsZSdcclxuICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZT17dGhpcy5zdGF0ZS5nZW5kZXJ9XHJcbiAgICAgICAgICAgIGhhbmRsZUNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlR2VuZGVyQ2hhbmdlfSAvPlxyXG5cclxuICAgICAgICAgIDxSYWRpb0VsZW1lbnRcclxuICAgICAgICAgICAgZ3JvdXBOYW1lPSdnZW5kZXInXHJcbiAgICAgICAgICAgIHZhbHVlPSdGZW1hbGUnXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVmFsdWU9e3RoaXMuc3RhdGUuZ2VuZGVyfVxyXG4gICAgICAgICAgICBoYW5kbGVDaGFuZ2U9e0Zvcm1BY3Rpb25zLmhhbmRsZUdlbmRlckNoYW5nZX0gLz5cclxuICAgICAgICA8L1JhZGlvR3JvdXA+XHJcblxyXG4gICAgICAgIDxTdWJtaXQgdHlwZT0nYnRuLXByaW1hcnknIHZhbHVlPSdSZWdpc3RlcicgLz5cclxuICAgICAgPC9Gb3JtPlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb250YWluZXInPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb3cgZmxpcEluWCBhbmltYXRlZCc+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTgnPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwgcGFuZWwtZGVmYXVsdHMnPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYW5lbC1oZWFkaW5nJz5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnRpdGxlfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYW5lbC1ib2R5Jz5cclxuICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLnByb3BzLmhhbmRsZVN1Ym1pdH0+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZm9ybS1ncm91cCAke3RoaXMucHJvcHMuc3VibWl0U3RhdGV9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdoZWxwLWJsb2NrJz5cclxuICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLm1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYWRpb0VsZW1lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvIHJhZGlvLWlubGluZSc+XHJcbiAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICB0eXBlPSdyYWRpbydcclxuICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMuZ3JvdXBOYW1lfVxyXG4gICAgICAgICAgaWQ9e3RoaXMucHJvcHMudmFsdWUudG9Mb3dlckNhc2UoKX1cclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxyXG4gICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5zZWxlY3RlZFZhbHVlID09PSB0aGlzLnByb3BzLnZhbHVlfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMuaGFuZGxlQ2hhbmdlfSAvPlxyXG4gICAgICAgIDxsYWJlbCBodG1sRm9yPXt0aGlzLnByb3BzLnZhbHVlLnRvTG93ZXJDYXNlKCl9PlxyXG4gICAgICAgICAgeyB0aGlzLnByb3BzLnZhbHVlIH1cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFkaW9Hcm91cCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YGZvcm0tZ3JvdXAgJHt0aGlzLnByb3BzLnZhbGlkYXRpb25TdGF0ZX1gIH0+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdoZWxwLWJsb2NrJz5cclxuICAgICAgICAgIHt0aGlzLnByb3BzLm1lc3NhZ2V9XHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3VibWl0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiA8aW5wdXQgdHlwZT0nc3VibWl0JyBjbGFzc05hbWU9e2BidG4gJHt0aGlzLnByb3BzLnR5cGV9YH0gdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9IC8+XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRleHRHcm91cCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17J2Zvcm0tZ3JvdXAgJyArIHRoaXMucHJvcHMudmFsaWRhdGlvblN0YXRlfT5cclxuICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJz5cclxuICAgICAgICAgIHt0aGlzLnByb3BzLmxhYmVsfVxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGlucHV0IHR5cGU9e3RoaXMucHJvcHMudHlwZX0gY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXHJcbiAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxyXG4gICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5wcm9wcy5oYW5kbGVDaGFuZ2V9IGF1dG9Gb2N1cz17dGhpcy5wcm9wcy5hdXRvRm9jdXN9IC8+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdoZWxwLWJsb2NrJz5cclxuICAgICAgICAgIHt0aGlzLnByb3BzLm1lc3NhZ2V9XHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuaW1wb3J0IEZvcm1BY3Rpb25zIGZyb20gJy4uLy4uL2FjdGlvbnMvRm9ybUFjdGlvbnMnXHJcbmltcG9ydCBGb3JtU3RvcmUgZnJvbSAnLi4vLi4vc3RvcmVzL0Zvcm1TdG9yZSdcclxuaW1wb3J0IE1vdmllQWN0aW9ucyBmcm9tICcuLi8uLi9hY3Rpb25zL01vdmllQWN0aW9ucydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1lbnRGb3JtIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSBGb3JtU3RvcmUuZ2V0U3RhdGUoKVxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgRm9ybVN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgRm9ybVN0b3JlLnVubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQgKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgIGlmICghdGhpcy5zdGF0ZS5jb21tZW50KSB7XHJcbiAgICAgIEZvcm1BY3Rpb25zLmNvbW1lbnRWYWxpZGF0aW9uRmFpbCgpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIE1vdmllQWN0aW9ucy5hZGRDb21tZW50KHRoaXMucHJvcHMubW92aWVJZCwgdGhpcy5zdGF0ZS5jb21tZW50KVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpfT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZvcm0tZ3JvdXAgJHt0aGlzLnN0YXRlLmNvbW1lbnRWYWxpZGF0aW9uU3RhdGV9YH0+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJyBodG1sRm9yPSdjb250ZW50Jz5BZGQgY29tbWVudDwvbGFiZWw+XHJcbiAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgaWQ9J2NvbnRlbnQnXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xyXG4gICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5jb21tZW50fVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17Rm9ybUFjdGlvbnMuaGFuZGxlQ29tbWVudENoYW5nZX1cclxuICAgICAgICAgICAgcm93cz0nNScgLz5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YGhlbHAtYmxvY2tgfT57dGhpcy5zdGF0ZS5tZXNzYWdlfTwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9ybS1ncm91cCc+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT0nc3VibWl0JyBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeScgdmFsdWU9J0NvbW1lbnQnIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuaW1wb3J0IE1vdmllUG9zdGVyIGZyb20gJy4vTW92aWVQb3N0ZXInXHJcbmltcG9ydCBNb3ZpZUluZm8gZnJvbSAnLi9Nb3ZpZUluZm8nXHJcbmltcG9ydCBNb3ZpZVBhbmVsc1RvZ2dsZSBmcm9tICcuL01vdmllUGFuZWxzVG9nZ2xlJ1xyXG5pbXBvcnQgTW92aWVWb3RlUGFuZWwgZnJvbSAnLi9Nb3ZpZVZvdGVQYW5lbCdcclxuaW1wb3J0IE1vdmllQ29tbWVudHNQYW5lbCBmcm9tICcuL01vdmllQ29tbWVudHNQYW5lbCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdmllQ2FyZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBzaG93Vm90ZVBhbmVsOiBmYWxzZSxcclxuICAgICAgc2hvd0NvbW1lbnRzUGFuZWw6IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGVDb21tZW50c1BhbmVsICgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHtcclxuICAgICAgc2hvd0NvbW1lbnRzUGFuZWw6ICFwcmV2U3RhdGUuc2hvd0NvbW1lbnRzUGFuZWwsXHJcbiAgICAgIHNob3dWb3RlUGFuZWw6IGZhbHNlXHJcbiAgICB9KSlcclxuICB9XHJcblxyXG4gIHRvZ2dsZVZvdGVQYW5lbCAoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+ICh7XHJcbiAgICAgIHNob3dWb3RlUGFuZWw6ICFwcmV2U3RhdGUuc2hvd1ZvdGVQYW5lbCxcclxuICAgICAgc2hvd0NvbW1lbnRzUGFuZWw6IGZhbHNlXHJcbiAgICB9KSlcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWF0ZWQgZmFkZUluJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVkaWEgbW92aWUnPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdwb3NpdGlvbiBwdWxsLWxlZnQnPnt0aGlzLnByb3BzLmluZGV4ICsgMX08L3NwYW4+XHJcbiAgICAgICAgICA8TW92aWVQb3N0ZXIgcG9zdGVyVXJsPXt0aGlzLnByb3BzLm1vdmllLm1vdmllUG9zdGVyVXJsfSAvPlxyXG4gICAgICAgICAgPE1vdmllSW5mbyBtb3ZpZT17dGhpcy5wcm9wcy5tb3ZpZX0gLz5cclxuICAgICAgICAgIDxNb3ZpZVBhbmVsc1RvZ2dsZVxyXG4gICAgICAgICAgICB0b2dnbGVDb21tZW50c1BhbmVsPXt0aGlzLnRvZ2dsZUNvbW1lbnRzUGFuZWwuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgdG9nZ2xlVm90ZVBhbmVsPXt0aGlzLnRvZ2dsZVZvdGVQYW5lbC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICBzaG93Q29tbWVudHNQYW5lbD17dGhpcy5zdGF0ZS5zaG93Q29tbWVudHNQYW5lbH1cclxuICAgICAgICAgICAgc2hvd1ZvdGVQYW5lbD17dGhpcy5zdGF0ZS5zaG93Vm90ZVBhbmVsfVxyXG4gICAgICAgICAgICBtb3ZpZUlkPXt0aGlzLnByb3BzLm1vdmllLl9pZH0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICB7dGhpcy5zdGF0ZS5zaG93Vm90ZVBhbmVsID8gPE1vdmllVm90ZVBhbmVsIG1vdmllSWQ9e3RoaXMucHJvcHMubW92aWUuX2lkfSAvPiA6IG51bGx9XHJcbiAgICAgICAge3RoaXMuc3RhdGUuc2hvd0NvbW1lbnRzUGFuZWwgPyA8TW92aWVDb21tZW50c1BhbmVsIG1vdmllSWQ9e3RoaXMucHJvcHMubW92aWUuX2lkfSAvPiA6IG51bGx9XHJcbiAgICAgICAgPGRpdiBpZD0nY2xlYXInIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcblxyXG5pbXBvcnQgQ29tbWVudEZvcm0gZnJvbSAnLi9Db21tZW50Rm9ybSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdmllQ29tbWVudHNQYW5lbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdbTW92aWVDb21tZW50c1BhbmVsXScsIHRoaXMucHJvcHMpXHJcbiAgICBsZXQgY29tbWVudHMgPSB0aGlzLnByb3BzLmNvbW1lbnRzLm1hcCgoY29tbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYga2V5PXtjb21tZW50Ll9pZH0gY2xhc3NOYW1lPSdjb21tZW50IGNvbC1zbS05IGxpc3QtZ3JvdXAtaXRlbSBhbmltYXRlZCBmYWRlSW4nPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lZGlhJz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lZGlhLWJvZHknPlxyXG4gICAgICAgICAgICAgIDxwPntjb21tZW50LmNvbnRlbnR9PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaXN0LWdyb3VwJz5cclxuICAgICAgICA8aDMgY2xhc3NOYW1lPSdjb2wtc20tMyc+Q29tbWVudHM6PC9oMz5cclxuICAgICAgICB7Y29tbWVudHN9XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbC1zbS02IGNvbC14cy1vZmZzZXQtNiBsaXN0LWdyb3VwLWl0ZW0gYW5pbWF0ZWQgZmFkZUluJz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZWRpYSc+XHJcbiAgICAgICAgICAgIDxDb21tZW50Rm9ybSBtb3ZpZUlkPXt0aGlzLnByb3BzLm1vdmllSWR9IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlcidcclxuaW1wb3J0IEhlbHBlcnMgZnJvbSAnLi4vLi4vdXRpbGl0aWVzL0hlbHBlcnMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZUluZm8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBsZXQgZ2VucmVzID0gdGhpcy5wcm9wcy5tb3ZpZS5nZW5yZXMubWFwKChnZW5yZSkgPT4ge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxzdHJvbmcga2V5PXt0aGlzLnByb3BzLm1vdmllLl9pZCArIGdlbnJlfT57Z2VucmV9PC9zdHJvbmc+XHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgbGV0IHJhdGluZyA9IEhlbHBlcnMuZm9ybWF0TW92aWVSYXRpbmcodGhpcy5wcm9wcy5tb3ZpZS5zY29yZSwgdGhpcy5wcm9wcy5tb3ZpZS52b3RlcylcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVkaWEtYm9keSc+XHJcbiAgICAgICAgPGg0IGNsYXNzTmFtZT0nbWVkaWEtaGVhZGluZyc+XHJcbiAgICAgICAgICA8TGluayB0bz17YC9tb3ZpZS8ke3RoaXMucHJvcHMubW92aWUuX2lkfS8ke3RoaXMucHJvcHMubW92aWUubmFtZX1gfT5cclxuICAgICAgICAgICAge3RoaXMucHJvcHMubW92aWUubmFtZX1cclxuICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICA8L2g0PlxyXG4gICAgICAgIDxzbWFsbD5HZW5yZXM6IHtnZW5yZXN9PC9zbWFsbD5cclxuICAgICAgICA8YnIgLz5cclxuICAgICAgICA8cD57dGhpcy5wcm9wcy5tb3ZpZS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd2b3Rlcyc+XHJcbiAgICAgICAgICBWb3RlczpcclxuICAgICAgICAgIDxzdHJvbmc+XHJcbiAgICAgICAgICAgIHt0aGlzLnByb3BzLnZvdGVzQW1vdW50fVxyXG4gICAgICAgICAgPC9zdHJvbmc+XHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyJ1xyXG5cclxuaW1wb3J0IHsgQ29uY2VhbGVyIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzL0F1dGhvcml6ZSdcclxuXHJcbmNsYXNzIFZvdGVUb2dnbGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8YVxyXG4gICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5J1xyXG4gICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMudG9nZ2xlVm90ZVBhbmVsfT5cclxuICAgICAgICB7dGhpcy5wcm9wcy5zaG93Vm90ZVBhbmVsID8gJ0hpZGUnIDogJ1ZvdGUnfVxyXG4gICAgICA8L2E+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZVBhbmVsVG9nZ2xlcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwdWxsLXJpZ2h0IGJ0bi1ncm91cCc+XHJcbiAgICAgICAgPGFcclxuICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5J1xyXG4gICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy50b2dnbGVDb21tZW50c1BhbmVsfT5cclxuICAgICAgICAgIHt0aGlzLnByb3BzLnNob3dDb21tZW50c1BhbmVsID8gJ0hpZGUnIDogJ0NvbW1lbnRzJ31cclxuICAgICAgICA8L2E+XHJcbiAgICAgICAgPENvbmNlYWxlclxyXG4gICAgICAgICAgQ2hpbGRDb21wb25lbnQ9e1ZvdGVUb2dnbGV9XHJcbiAgICAgICAgICB0b2dnbGVWb3RlUGFuZWw9e3RoaXMucHJvcHMudG9nZ2xlVm90ZVBhbmVsfVxyXG4gICAgICAgICAgc2hvd1ZvdGVQYW5lbD17dGhpcy5wcm9wcy5zaG93Vm90ZVBhbmVsfSAvPlxyXG4gICAgICAgIDxMaW5rIHRvPXtgL21vdmllLyR7dGhpcy5wcm9wcy5tb3ZpZUlkfS9yZXZpZXcvYWRkYH0gY2xhc3NOYW1lPSdidG4gYnRuLXdhcm5pbmcnPlxyXG4gICAgICAgICAgV3JpdGUgcmV2aWV3XHJcbiAgICAgICAgPC9MaW5rPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW92aWVQb3N0ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBsZXQgcG9zdGVyID0gbnVsbFxyXG5cclxuICAgIGlmICh0aGlzLnByb3BzLnBvc3RlclVybCkge1xyXG4gICAgICBwb3N0ZXIgPSAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B1bGwtbGVmdCB0aHVtYi1sZyc+XHJcbiAgICAgICAgICA8aW1nIGNsYXNzTmFtZT0nbWVkaWEtb2JqZWN0JyBzcmM9e3RoaXMucHJvcHMucG9zdGVyVXJsfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBvc3RlclxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCBGb3JtQWN0aW9ucyBmcm9tICcuLi8uLi9hY3Rpb25zL0Zvcm1BY3Rpb25zJ1xyXG5pbXBvcnQgTW92aWVBY3Rpb25zIGZyb20gJy4uLy4uL2FjdGlvbnMvTW92aWVBY3Rpb25zJ1xyXG5pbXBvcnQgRm9ybVN0b3JlIGZyb20gJy4uLy4uL3N0b3Jlcy9Gb3JtU3RvcmUnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb3ZpZVZvdGVQYW5lbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICB0aGlzLnN0YXRlID0gRm9ybVN0b3JlLmdldFN0YXRlKClcclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlIChzdGF0ZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxNb3VudCAoKSB7XHJcbiAgICBGb3JtU3RvcmUubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XHJcbiAgICBGb3JtU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pdCAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgaWYgKHRoaXMuc3RhdGUuc2NvcmUgPiAxMCkge1xyXG4gICAgICBGb3JtQWN0aW9ucy5zY29yZVZhbGlkYXRpb25GYWlsKClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgTW92aWVBY3Rpb25zLmFkZFZvdGUodGhpcy5wcm9wcy5tb3ZpZUlkLCB0aGlzLnN0YXRlLnNjb3JlKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNCBjb2wteHMtb2Zmc2V0LTggbGlzdC1ncm91cC1pdGVtIGFuaW1hdGVkIGZhZGVJbiB2b3RlJz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVkaWEnPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lZGlhLWJvZHknPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZvcm0tZ3JvdXAgJHt0aGlzLnN0YXRlLnNjb3JlVmFsaWRhdGlvblN0YXRlfWB9PlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naGVscC1ibG9jayc+e3RoaXMuc3RhdGUubWVzc2FnZX08L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8Zm9ybSBjbGFzc05hbWU9J2Zvcm0taW5saW5lJyBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKX0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Bmb3JtLWdyb3VwICR7dGhpcy5zdGF0ZS5zY29yZVZhbGlkYXRpb25TdGF0ZX1gfT5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbnRyb2wtbGFiZWwnPlNjb3JlPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCdcclxuICAgICAgICAgICAgICAgICAgc3RlcD0nMC4xJ1xyXG4gICAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnNjb3JlIHx8IHRoaXMucHJvcHMubG9nZ2VkSW5Vc2VyU2NvcmV9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtGb3JtQWN0aW9ucy5oYW5kbGVTY29yZUNoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeScgdHlwZT0nc3VibWl0JyB2YWx1ZT0nVm90ZScgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXInXHJcblxyXG5pbXBvcnQgVXNlckFjdGlvbnMgZnJvbSAnLi4vLi4vYWN0aW9ucy9Vc2VyQWN0aW9ucydcclxuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICcuLi8uLi9zdG9yZXMvVXNlclN0b3JlJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmF2YmFyVXNlck1lbnUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IFVzZXJTdG9yZS5nZXRTdGF0ZSgpXHJcblxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKVxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgVXNlclN0b3JlLmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgVXNlclN0b3JlLnVubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgbGV0IHVzZXJNZW51XHJcbiAgICBpZiAoIXRoaXMuc3RhdGUubG9nZ2VkSW5Vc2VySWQpIHtcclxuICAgICAgdXNlck1lbnUgPSAoXHJcbiAgICAgICAgPHVsIGNsYXNzTmFtZT0nbmF2IG5hdmJhci1uYXYgcHVsbC1yaWdodCc+XHJcbiAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgIDxMaW5rIHRvPScvdXNlci9sb2dpbic+TG9naW48L0xpbms+XHJcbiAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICA8TGluayB0bz0nL3VzZXIvcmVnaXN0ZXInPlJlZ2lzdGVyPC9MaW5rPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG4gICAgICApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1c2VyTWVudSA9IChcclxuICAgICAgICA8dWwgY2xhc3NOYW1lPSduYXYgbmF2YmFyLW5hdiBwdWxsLXJpZ2h0Jz5cclxuICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgPExpbmsgdG89e2AvdXNlci9wcm9maWxlLyR7dGhpcy5zdGF0ZS5sb2dnZWRJblVzZXJJZH1gfT5Qcm9maWxlPC9MaW5rPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgPGEgaHJlZj0nIycgb25DbGljaz17VXNlckFjdGlvbnMubG9nb3V0VXNlcn0+TG9nb3V0PC9hPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICA8L3VsPlxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdj5cclxuICAgICAgICB7dXNlck1lbnV9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXHJcbmltcG9ydCBSb3V0ZXIgZnJvbSAncmVhY3Qtcm91dGVyJ1xyXG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJ1xyXG5pbXBvcnQgY3JlYXRlQnJvd3Nlckhpc3RvcnkgZnJvbSAnaGlzdG9yeS9saWIvY3JlYXRlQnJvd3Nlckhpc3RvcnknXHJcblxyXG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJ1xyXG5cclxubGV0IGhpc3RvcnkgPSBjcmVhdGVCcm93c2VySGlzdG9yeSgpXHJcblxyXG5SZWFjdERPTS5yZW5kZXIoXHJcbiAgPFJvdXRlciBoaXN0b3J5PXtoaXN0b3J5fT57IHJvdXRlcyB9PC9Sb3V0ZXI+LFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKVxyXG4pXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgUm91dGUgfSBmcm9tICdyZWFjdC1yb3V0ZXInXHJcblxyXG5pbXBvcnQgQXBwIGZyb20gJy4vY29tcG9uZW50cy9BcHAnXHJcbmltcG9ydCBVc2VyUmVnaXN0ZXIgZnJvbSAnLi9jb21wb25lbnRzL1VzZXJSZWdpc3RlcidcclxuaW1wb3J0IFVzZXJMb2dpbiBmcm9tICcuL2NvbXBvbmVudHMvVXNlckxvZ2luJ1xyXG5pbXBvcnQgVXNlclByb2ZpbGUgZnJvbSAnLi9jb21wb25lbnRzL1VzZXJQcm9maWxlJ1xyXG5pbXBvcnQgSG9tZSBmcm9tICcuL2NvbXBvbmVudHMvSG9tZSdcclxuaW1wb3J0IE1vdmllQWRkIGZyb20gJy4vY29tcG9uZW50cy9Nb3ZpZUFkZCdcclxuaW1wb3J0IGF1dGhvcml6ZSBmcm9tICcuL3V0aWxpdGllcy9BdXRob3JpemUnXHJcblxyXG5leHBvcnQgZGVmYXVsdCAoXHJcbiAgPFJvdXRlIGNvbXBvbmVudD17QXBwfT5cclxuICAgIDxSb3V0ZSBwYXRoPScvJyBjb21wb25lbnQ9e0hvbWV9IC8+XHJcbiAgICA8Um91dGUgcGF0aD0nL21vdmllL2FkZCcgY29tcG9uZW50PXthdXRob3JpemUoTW92aWVBZGQpfSAvPlxyXG4gICAgPFJvdXRlIHBhdGg9Jy91c2VyL2xvZ2luJyBjb21wb25lbnQ9e1VzZXJMb2dpbn0gLz5cclxuICAgIDxSb3V0ZSBwYXRoPScvdXNlci9yZWdpc3RlcicgY29tcG9uZW50PXtVc2VyUmVnaXN0ZXJ9IC8+XHJcbiAgICA8Um91dGUgcGF0aD0nL3VzZXIvcHJvZmlsZS86dXNlcklkJyBjb21wb25lbnQ9e2F1dGhvcml6ZShVc2VyUHJvZmlsZSl9IC8+XHJcbiAgPC9Sb3V0ZT5cclxuKVxyXG4iLCJpbXBvcnQgYWx0IGZyb20gJy4uL2FsdCdcclxuaW1wb3J0IFVzZXJBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvVXNlckFjdGlvbnMnXHJcbmltcG9ydCBGb3JtQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0Zvcm1BY3Rpb25zJ1xyXG5pbXBvcnQgTW92aWVBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvTW92aWVBY3Rpb25zJ1xyXG5cclxuY2xhc3MgRm9ybVN0b3JlIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmJpbmRBY3Rpb25zKEZvcm1BY3Rpb25zKVxyXG4gICAgdGhpcy5iaW5kTGlzdGVuZXJzKHtcclxuICAgICAgb25SZWdpc3RlclVzZXJGYWlsOiBVc2VyQWN0aW9ucy5yZWdpc3RlclVzZXJGYWlsLFxyXG4gICAgICBvblJlZ2lzdGVyVXNlclN1Y2Nlc3M6IFVzZXJBY3Rpb25zLnJlZ2lzdGVyVXNlclN1Y2Nlc3MsXHJcbiAgICAgIG9uTG9naW5Vc2VyU3VjY2VzczogVXNlckFjdGlvbnMubG9naW5Vc2VyU3VjY2VzcyxcclxuICAgICAgb25Mb2dpblVzZXJGYWlsOiBVc2VyQWN0aW9ucy5sb2dpblVzZXJGYWlsLFxyXG4gICAgICBvbkFkZENvbW1lbnRGYWlsOiBNb3ZpZUFjdGlvbnMuYWRkQ29tbWVudEZhaWwsXHJcbiAgICAgIG9uQWRkVm90ZVN1Y2Nlc3M6IE1vdmllQWN0aW9ucy5hZGRWb3RlU3VjY2VzcyxcclxuICAgICAgb25BZGRWb3RlRmFpbDogTW92aWVBY3Rpb25zLmFkZFZvdGVGYWlsXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMudXNlcm5hbWUgPSAnJ1xyXG4gICAgdGhpcy5wYXNzd29yZCA9ICcnXHJcbiAgICB0aGlzLmNvbmZpcm1lZFBhc3N3b3JkID0gJydcclxuICAgIHRoaXMuZmlyc3ROYW1lID0gJydcclxuICAgIHRoaXMubGFzdE5hbWUgPSAnJ1xyXG4gICAgdGhpcy5hZ2UgPSAnJ1xyXG4gICAgdGhpcy5nZW5kZXIgPSAnJ1xyXG4gICAgdGhpcy5jb21tZW50ID0gJycgIC8vICFcclxuICAgIHRoaXMuc2NvcmUgPSAnJyAgLy8gIVxyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnJ1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuY29tbWVudFZhbGlkYXRpb25TdGF0ZSA9ICcnICAvLyAhXHJcbiAgICB0aGlzLnNjb3JlVmFsaWRhdGlvblN0YXRlID0gJycgIC8vICFcclxuICAgIHRoaXMubWVzc2FnZSA9ICcnXHJcbiAgfVxyXG5cclxuICBvblJlZ2lzdGVyVXNlclN1Y2Nlc3MgKCkge1xyXG4gICAgY29uc29sZS5sb2coJ0Zvcm1TdG9yZSByZWdpc3RlciBzdWNjZXNzJylcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJ2hhcy1zdWNjZXNzJ1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMubWVzc2FnZSA9ICdVc2VyIHJlZ2lzdGVyIHN1Y2Nlc3NmdWwnXHJcbiAgfVxyXG5cclxuICBvblJlZ2lzdGVyVXNlckZhaWwgKGVycikge1xyXG4gICAgY29uc29sZS5sb2coJ0Zvcm1TdG9yZSByZWdpc3RlciBlcnJvcicsIGVycilcclxuICAgIGlmIChlcnIuY29kZSA9PT0gMTEwMDApIHtcclxuICAgICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICdoYXMtZXJyb3InXHJcbiAgICAgIHRoaXMubWVzc2FnZSA9ICdVc2VybmFtZSBhbHJlYWR5IGluIHVzZSdcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gZXJyLmVycm1zZ1xyXG4gIH1cclxuXHJcbiAgb25Mb2dpblVzZXJTdWNjZXNzICgpIHtcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJ2hhcy1zdWNjZXNzJ1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMubWVzc2FnZSA9ICdVc2VyIGxvZ2luIHN1Y2Nlc3NmdWwnXHJcbiAgfVxyXG5cclxuICBvbkxvZ2luVXNlckZhaWwgKGVycikge1xyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICdoYXMtZXJyb3InXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMubWVzc2FnZSA9IGVyci5tZXNzYWdlXHJcbiAgfVxyXG5cclxuICBvblVzZXJuYW1lVmFsaWRhdGlvbkZhaWwgKCkge1xyXG4gICAgdGhpcy51c2VybmFtZVZhbGlkYXRpb25TdGF0ZSA9ICdoYXMtZXJyb3InXHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuZm9ybVN1Ym1pdFN0YXRlID0gJydcclxuICAgIHRoaXMubWVzc2FnZSA9ICdFbnRlciB1c2VybmFtZSdcclxuICB9XHJcblxyXG4gIG9uUGFzc3dvcmRWYWxpZGF0aW9uRmFpbCAoKSB7XHJcbiAgICB0aGlzLnBhc3N3b3JkVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMudXNlcm5hbWVWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5mb3JtU3VibWl0U3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gJ0ludmFsaWQgcGFzc3dvcmQsIG9yIHBhc3N3b3JkcyBkbyBub3QgbWF0Y2gnXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZVVzZXJuYW1lQ2hhbmdlIChlKSB7XHJcbiAgICB0aGlzLnVzZXJuYW1lID0gZS50YXJnZXQudmFsdWVcclxuICB9XHJcblxyXG4gIG9uSGFuZGxlUGFzc3dvcmRDaGFuZ2UgKGUpIHtcclxuICAgIHRoaXMucGFzc3dvcmQgPSBlLnRhcmdldC52YWx1ZVxyXG4gIH1cclxuXHJcbiAgb25IYW5kbGVDb25maXJtZWRQYXNzd29yZENoYW5nZSAoZSkge1xyXG4gICAgdGhpcy5jb25maXJtZWRQYXNzd29yZCA9IGUudGFyZ2V0LnZhbHVlXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZUZpcnN0TmFtZUNoYW5nZSAoZSkge1xyXG4gICAgdGhpcy5maXJzdE5hbWUgPSBlLnRhcmdldC52YWx1ZVxyXG4gIH1cclxuXHJcbiAgb25IYW5kbGVMYXN0TmFtZUNoYW5nZSAoZSkge1xyXG4gICAgdGhpcy5sYXN0TmFtZSA9IGUudGFyZ2V0LnZhbHVlXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZUFnZUNoYW5nZSAoZSkge1xyXG4gICAgdGhpcy5hZ2UgPSBlLnRhcmdldC52YWx1ZVxyXG4gIH1cclxuXHJcbiAgb25IYW5kbGVHZW5kZXJDaGFuZ2UgKGUpIHtcclxuICAgIHRoaXMuZ2VuZGVyID0gZS50YXJnZXQudmFsdWVcclxuICB9XHJcblxyXG4gIG9uVW5hdXRob3JpemVkQWNjZXNzQXR0ZW1wdCAoKSB7XHJcbiAgICB0aGlzLmZvcm1TdWJtaXRTdGF0ZSA9ICdoYXMtZXJyb3InXHJcbiAgICB0aGlzLnVzZXJuYW1lVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMucGFzc3dvcmRWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gJ1BsZWFzZSBsb2dpbidcclxuICB9XHJcblxyXG4gIG9uQWRkQ29tbWVudEZhaWwgKGVycikge1xyXG4gICAgdGhpcy5jb21tZW50VmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMubWVzc2FnZSA9IGVyci5tZXNzYWdlXHJcbiAgfVxyXG5cclxuICBvbkNvbW1lbnRWYWxpZGF0aW9uRmFpbCAoKSB7XHJcbiAgICB0aGlzLmNvbW1lbnRWYWxpZGF0aW9uU3RhdGUgPSAnaGFzLWVycm9yJ1xyXG4gICAgdGhpcy5tZXNzYWdlID0gJ1BsZWFzZSBlbnRlciBjb21tZW50IHRleHQnXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZUNvbW1lbnRDaGFuZ2UgKGUpIHtcclxuICAgIHRoaXMuY29tbWVudCA9IGUudGFyZ2V0LnZhbHVlXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZVNjb3JlQ2hhbmdlIChlKSB7XHJcbiAgICB0aGlzLnNjb3JlID0gZS50YXJnZXQudmFsdWVcclxuICB9XHJcblxyXG4gIG9uU2NvcmVWYWxpZGF0aW9uRmFpbCAoKSB7XHJcbiAgICB0aGlzLnNjb3JlVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMubWVzc2FnZSA9ICdWYWxpZCBzY29yZSBpcyBiZXR3ZWVuIDAgLSAxMCdcclxuICB9XHJcblxyXG4gIG9uQWRkVm90ZVN1Y2Nlc3MgKCkge1xyXG4gICAgdGhpcy5zY29yZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLm1lc3NhZ2UgPSAnJ1xyXG4gIH1cclxuXHJcbiAgb25BZGRWb3RlRmFpbCAoZXJyKSB7XHJcbiAgICB0aGlzLnNjb3JlVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMubWVzc2FnZSA9IGVyci5tZXNzYWdlXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhbHQuY3JlYXRlU3RvcmUoRm9ybVN0b3JlKVxyXG4iLCJpbXBvcnQgYWx0IGZyb20gJy4uL2FsdCdcclxuaW1wb3J0IE1vdmllQWRkQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL01vdmllQWRkQWN0aW9ucydcclxuaW1wb3J0IEhlbHBlcnMgZnJvbSAnLi4vdXRpbGl0aWVzL0hlbHBlcnMnXHJcblxyXG5jbGFzcyBNb3ZpZUFkZFN0b3JlIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmJpbmRBY3Rpb25zKE1vdmllQWRkQWN0aW9ucylcclxuXHJcbiAgICB0aGlzLm5hbWUgPSAnJ1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9ICcnXHJcbiAgICB0aGlzLmdlbnJlcyA9IFtdXHJcbiAgICB0aGlzLm1vdmllUG9zdGVyVXJsID0gJydcclxuICAgIHRoaXMuZ2VucmVzVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMubmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmhlbHBCbG9jayA9ICcnXHJcbiAgfVxyXG5cclxuICBvbkFkZE1vdmllU3VjY2VzcyAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQWRkZWQgbW92aWUgc3VjY2Vzc2Z1bGx5IScpXHJcbiAgfVxyXG5cclxuICBvbkFkZE1vdmllRmFpbCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGFkZCBtb3ZpZScsIGVycilcclxuICB9XHJcblxyXG4gIG9uSGFuZGxlTmFtZUNoYW5nZSAoZSkge1xyXG4gICAgdGhpcy5uYW1lID0gZS50YXJnZXQudmFsdWVcclxuICAgIHRoaXMubmFtZVZhbGlkYXRpb25TdGF0ZSA9ICcnXHJcbiAgICB0aGlzLmhlbHBCbG9jayA9ICcnXHJcbiAgfVxyXG5cclxuICBvbkhhbmRsZURlc2NyaXB0aW9uQ2hhbmdlIChlKSB7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZS50YXJnZXQudmFsdWVcclxuICAgIHRoaXMuZ2VucmVzVmFsaWRhdGlvblN0YXRlID0gJydcclxuICAgIHRoaXMuaGVscEJsb2NrID0gJydcclxuICB9XHJcblxyXG4gIG9uSGFuZGxlR2VucmVzQ2hhbmdlIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKVxyXG4gICAgbGV0IGdlbnJlVmFsdWUgPSBlLnRhcmdldC52YWx1ZVxyXG5cclxuICAgIGlmICh0aGlzLmdlbnJlcy5pbmRleE9mKGdlbnJlVmFsdWUpID09PSAtMSkge1xyXG4gICAgICB0aGlzLmdlbnJlcyA9IEhlbHBlcnMuYXBwZW5kVG9BcnJheShnZW5yZVZhbHVlLCB0aGlzLmdlbnJlcylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZ2VucmVzID0gSGVscGVycy5yZW1vdmVGcm9tQXJyYXkoZ2VucmVWYWx1ZSwgdGhpcy5nZW5yZXMpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nZW5yZXNWYWxpZGF0aW9uU3RhdGUgPSAnJ1xyXG4gICAgdGhpcy5oZWxwQmxvY2sgPSAnJ1xyXG4gIH1cclxuXHJcbiAgb25OYW1lVmFsaWRhdGlvbkZhaWwgKCkge1xyXG4gICAgdGhpcy5uYW1lVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMuaGVscEJsb2NrID0gJ0VudGVyIG1vdmllIG5hbWUnXHJcbiAgfVxyXG5cclxuICBvbkdlbnJlc1ZhbGlkYXRpb25GYWlsICgpIHtcclxuICAgIHRoaXMuZ2VucmVzVmFsaWRhdGlvblN0YXRlID0gJ2hhcy1lcnJvcidcclxuICAgIHRoaXMuaGVscEJsb2NrID0gJ1NlbGVjdCBhdCBsZWFzdCBvbmUgbW92aWUgZ2VucmUnXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhbHQuY3JlYXRlU3RvcmUoTW92aWVBZGRTdG9yZSlcclxuIiwiaW1wb3J0IGFsdCBmcm9tICcuLi9hbHQnXHJcbmltcG9ydCBNb3ZpZUFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9Nb3ZpZUFjdGlvbnMnXHJcblxyXG5jbGFzcyBNb3ZpZVN0b3JlIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmJpbmRBY3Rpb25zKE1vdmllQWN0aW9ucylcclxuICAgIHRoaXMudG9wVGVuTW92aWVzID0gW11cclxuICAgIHRoaXMubW9zdFJlY2VudE1vdmllcyA9IFtdXHJcbiAgfVxyXG5cclxuICBvbkFkZENvbW1lbnRTdWNjZXNzIChkYXRhKSB7XHJcbiAgICBsZXQgY29tbWVudCA9IGRhdGEuY29tbWVudFxyXG4gICAgbGV0IG1vdmllSWQgPSBkYXRhLmNvbW1lbnQubW92aWVcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbiA9IHRoaXMudG9wVGVuTW92aWVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICBpZiAodGhpcy50b3BUZW5Nb3ZpZXNbaV0uX2lkID09PSBtb3ZpZUlkKSB7XHJcbiAgICAgICAgdGhpcy50b3BUZW5Nb3ZpZXNbaV0uY29tbWVudHMudW5zaGlmdChjb21tZW50KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkFkZE1vdmllVG9Ub3BUZW4gKG1vdmllKSB7XHJcbiAgICB0aGlzLnRvcFRlbk1vdmllcy5wdXNoKG1vdmllKVxyXG4gIH1cclxuXHJcbiAgb25FbXB0eVRvcFRlbk1vdmllcyAoKSB7XHJcbiAgICB0aGlzLnRvcFRlbk1vdmllcyA9IFtdXHJcbiAgfVxyXG5cclxuICBvbkdldFRvcFRlbk1vdmllc1N1Y2Nlc3MgKG1vdmllcykge1xyXG4gICAgdGhpcy50b3BUZW5Nb3ZpZXMgPSBtb3ZpZXNcclxuICB9XHJcblxyXG4gIG9uR2V0VG9wVGVuTW92aWVzRmFpbCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ291bGQgbm90IGNvbm5lY3QgdG8gREInLCBlcnIpXHJcbiAgfVxyXG5cclxuICBvbkdldEZpdmVSZWNlbnRNb3ZpZXNTdWNjZXNzIChkYXRhKSB7XHJcbiAgICB0aGlzLm1vc3RSZWNlbnRNb3ZpZXMgPSBkYXRhXHJcbiAgfVxyXG5cclxuICBvbkdldEZpdmVSZWNlbnRNb3ZpZXNGYWlsICgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdDb3VsZCBub3QgY29ubmVjdCB0byBEQicpXHJcbiAgfVxyXG5cclxuICBvbkFkZFZvdGVTdWNjZXNzIChkYXRhKSB7XHJcbiAgICBsZXQgbW92aWVJZCA9IGRhdGEubW92aWVJZFxyXG4gICAgbGV0IGxvZ2dlZEluVXNlclNjb3JlID0gZGF0YS52b3RlU2NvcmVcclxuICAgIGxldCBtb3ZpZVNjb3JlID0gZGF0YS5tb3ZpZVNjb3JlXHJcbiAgICBsZXQgbW92aWVWb3RlcyA9IGRhdGEubW92aWVWb3Rlc1xyXG5cclxuICAgIGZvciAobGV0IG1vdmllIG9mIHRoaXMudG9wVGVuTW92aWVzKSB7XHJcbiAgICAgIGlmIChtb3ZpZS5faWQgPT09IG1vdmllSWQpIHtcclxuICAgICAgICBtb3ZpZS5sb2dnZWRJblVzZXJTY29yZSA9IGxvZ2dlZEluVXNlclNjb3JlXHJcbiAgICAgICAgbW92aWUuc2NvcmUgPSBtb3ZpZVNjb3JlXHJcbiAgICAgICAgbW92aWUudm90ZXMgPSBtb3ZpZVZvdGVzXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZVN0b3JlKE1vdmllU3RvcmUpXHJcbiIsImltcG9ydCBhbHQgZnJvbSAnLi4vYWx0J1xyXG5pbXBvcnQgTmF2YmFyQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL05hdmJhckFjdGlvbnMnXHJcblxyXG5jbGFzcyBOYXZiYXJTdG9yZSB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5iaW5kQWN0aW9ucyhOYXZiYXJBY3Rpb25zKVxyXG5cclxuICAgIHRoaXMuYWpheEFuaW1hdGlvbkNsYXNzID0gJydcclxuICB9XHJcblxyXG4gIG9uVXBkYXRlQWpheEFuaW1hdGlvbiAoYW5pbWF0aW9uQ2xhc3MpIHtcclxuICAgIHRoaXMuYWpheEFuaW1hdGlvbkNsYXNzID0gYW5pbWF0aW9uQ2xhc3NcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFsdC5jcmVhdGVTdG9yZShOYXZiYXJTdG9yZSlcclxuIiwiaW1wb3J0IGFsdCBmcm9tICcuLi9hbHQnXHJcbmltcG9ydCBVc2VyQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL1VzZXJBY3Rpb25zJ1xyXG5cclxuY2xhc3MgVXNlclN0b3JlIHtcclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLmJpbmRBY3Rpb25zKFVzZXJBY3Rpb25zKVxyXG5cclxuICAgIHRoaXMubG9nZ2VkSW5Vc2VySWQgPSAnJ1xyXG4gICAgdGhpcy51c2VybmFtZSA9ICcnXHJcbiAgICB0aGlzLnJvbGVzID0gW11cclxuICB9XHJcblxyXG4gIG9uTG9naW5Vc2VyU3VjY2VzcyAodXNlcikge1xyXG4gICAgdGhpcy5sb2dnZWRJblVzZXJJZCA9IHVzZXIuX2lkXHJcbiAgICB0aGlzLnVzZXJuYW1lID0gdXNlci51c2VybmFtZVxyXG4gICAgdGhpcy5yb2xlcyA9IHVzZXIucm9sZXNcclxuICB9XHJcblxyXG4gIG9uTG9naW5Vc2VyRmFpbCAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIExvZ2luJylcclxuICB9XHJcblxyXG4gIG9uTG9nb3V0VXNlclN1Y2Nlc3MgKCkge1xyXG4gICAgdGhpcy5sb2dnZWRJblVzZXJJZCA9ICcnXHJcbiAgICB0aGlzLnVzZXJuYW1lID0gJydcclxuICAgIHRoaXMucm9sZXMgPSBbXVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWx0LmNyZWF0ZVN0b3JlKFVzZXJTdG9yZSlcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJy4uL3N0b3Jlcy9Vc2VyU3RvcmUnXHJcbmltcG9ydCBGb3JtQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0Zvcm1BY3Rpb25zJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXV0aG9yaXplIChDaGlsZENvbXBvbmVudCkge1xyXG4gIHJldHVybiBjbGFzcyBBdXRob3JpemF0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICAgIHRoaXMuc3RhdGUgPSBVc2VyU3RvcmUuZ2V0U3RhdGUoKVxyXG4gICAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgb25DaGFuZ2UgKHN0YXRlKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpXHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50ICgpIHtcclxuICAgICAgaWYgKCF0aGlzLnN0YXRlLnVzZXJJc0xvZ2dlZEluKSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCAnL3VzZXIvbG9naW4nKVxyXG4gICAgICAgIEZvcm1BY3Rpb25zLnVuYXV0aG9yaXplZEFjY2Vzc0F0dGVtcHQoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQgKCkge1xyXG4gICAgICBVc2VyU3RvcmUubGlzdGVuKHRoaXMub25DaGFuZ2UpXHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xyXG4gICAgICBVc2VyU3RvcmUudW5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIgKCkge1xyXG4gICAgICByZXR1cm4gPENoaWxkQ29tcG9uZW50IHsuLi50aGlzLnByb3BzfSAvPlxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbmNlYWxlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICB0aGlzLnN0YXRlID0gVXNlclN0b3JlLmdldFN0YXRlKClcclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcylcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlIChzdGF0ZSkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcclxuICAgIFVzZXJTdG9yZS5saXN0ZW4odGhpcy5vbkNoYW5nZSlcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIFVzZXJTdG9yZS51bmxpc3Rlbih0aGlzLm9uQ2hhbmdlKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGxldCBDaGlsZENvbXBvbmVudCA9IHRoaXMucHJvcHMuQ2hpbGRDb21wb25lbnRcclxuICAgIHJldHVybiB0aGlzLnN0YXRlLmxvZ2dlZEluVXNlcklkID8gPENoaWxkQ29tcG9uZW50IHsuLi50aGlzLnByb3BzfSAvPiA6IG51bGxcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVscGVycyB7XHJcbiAgc3RhdGljIGZvcm1hdE1vdmllUmF0aW5nIChzY29yZSwgdm90ZXMpIHtcclxuICAgIGxldCByYXRpbmcgPSBzY29yZSAvIHZvdGVzXHJcblxyXG4gICAgaWYgKGlzTmFOKHJhdGluZykpIHsgIC8vIGRpdmlzaW9uIGJ5IHplcm8gaXMgTmFOXHJcbiAgICAgIHJhdGluZyA9IDBcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmF0aW5nICUgMSAhPT0gMCkge1xyXG4gICAgICByYXRpbmcgPSByYXRpbmcudG9GaXhlZCgxKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByYXRpbmdcclxuICB9XHJcbn0iLCJjb25zdCBBUElfS0VZID0gJzcxYWFiZDc5YzcwODJiY2FjYWJjOTY4NzdhYzcyMzhiJ1xyXG5jb25zdCBTRUFSQ0hfQkFTRV9VUkwgPSAnaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9zZWFyY2gvbW92aWUnXHJcbmNvbnN0IFBPU1RFUl9CQVNFX1VSTCA9ICdodHRwczovL2ltYWdlLnRtZGIub3JnL3QvcC93NTAwJ1xyXG5jb25zdCBVTlZFUklGSUVEX01PVklFX1BPU1RFUl9VUkwgPSAnL2ltYWdlcy9tb3ZpZS11bnZlcmlmaWVkLnBuZydcclxuY29uc3QgTUlTU0lOR19EQVRBX1BPU1RFUl9VUkwgPSAnL2ltYWdlcy9tb3ZpZS1taXNzaW5nLWRhdGEuanBnJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdGVyVE1EQiB7XHJcbiAgc3RhdGljIGdldE1vdmllUG9zdGVyIChtb3ZpZU5hbWUpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGxldCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ2dldCcsXHJcbiAgICAgICAgdXJsOiBgJHtTRUFSQ0hfQkFTRV9VUkx9P2FwaV9rZXk9JHtBUElfS0VZfSZxdWVyeT0ke21vdmllTmFtZX1gXHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQuYWpheChyZXF1ZXN0KVxyXG4gICAgICAgIC5kb25lKCh0bWRiUmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdUTURCIHJlc3BvbnNlJywgdG1kYlJlc3BvbnNlKVxyXG5cclxuICAgICAgICAgIGlmICh0bWRiUmVzcG9uc2UudG90YWxfcmVzdWx0cyA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKHtwb3N0ZXJVcmw6IFVOVkVSSUZJRURfTU9WSUVfUE9TVEVSX1VSTH0pXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGxldCBwb3N0ZXJQYXRoID0gdG1kYlJlc3BvbnNlLnJlc3VsdHNbMF0ucG9zdGVyX3BhdGhcclxuICAgICAgICAgIGlmIChwb3N0ZXJQYXRoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoe3Bvc3RlclVybDogTUlTU0lOR19EQVRBX1BPU1RFUl9VUkx9KVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXNvbHZlKHtwb3N0ZXJVcmw6IGAke1BPU1RFUl9CQVNFX1VSTH0vJHtwb3N0ZXJQYXRofWB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZhaWwoKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICByZWplY3Qoe1xyXG4gICAgICAgICAgICBjbGllbnRNZXNzYWdlOiAnUmVxdWVzdCBmYWlsZWQnLFxyXG4gICAgICAgICAgICBlcnJvcjogZXJyb3JcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiJdfQ=="}